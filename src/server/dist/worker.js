/*! For license information please see worker.js.LICENSE.txt */
(()=>{var e={742:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=s(e),a=o[0],u=o[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,u)),f=0,l=u>0?a-4:a;for(n=0;n<l;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[f++]=t>>16&255,c[f++]=t>>8&255,c[f++]=255&t;return 2===u&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[f++]=255&t),1===u&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[f++]=t>>8&255,c[f++]=255&t),c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,u=0,s=r-i;u<s;u+=a)o.push(c(e,u,u+a>s?s:u+a));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=o.length;a<u;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var i,o,a=[],u=t;u<r;u+=3)i=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},489:(e,t)=>{"use strict";t.Q=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},i=t||{},a=e.split(";"),u=i.decode||n,s=0;s<a.length;s++){var c=a[s],f=c.indexOf("=");if(!(f<0)){var l=c.substring(0,f).trim();if(null==r[l]){var p=c.substring(f+1,c.length).trim();'"'===p[0]&&(p=p.slice(1,-1)),r[l]=o(p,u)}}}return r},t.q=function(e,t,n){var o=n||{},a=o.encode||r;if("function"!=typeof a)throw new TypeError("option encode is invalid");if(!i.test(e))throw new TypeError("argument name is invalid");var u=a(t);if(u&&!i.test(u))throw new TypeError("argument val is invalid");var s=e+"="+u;if(null!=o.maxAge){var c=o.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(c)}if(o.domain){if(!i.test(o.domain))throw new TypeError("option domain is invalid");s+="; Domain="+o.domain}if(o.path){if(!i.test(o.path))throw new TypeError("option path is invalid");s+="; Path="+o.path}if(o.expires){if("function"!=typeof o.expires.toUTCString)throw new TypeError("option expires is invalid");s+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(s+="; HttpOnly"),o.secure&&(s+="; Secure"),o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s};var n=decodeURIComponent,r=encodeURIComponent,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(e,t){try{return t(e)}catch(t){return e}}},98:function(e,t){var n="undefined"!=typeof self?self:this,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,a="ArrayBuffer"in e;if(a)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function y(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&i&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var e,t,n,r=d(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=h(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=c(e),t=f(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[c(e)]},p.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},p.prototype.set=function(e,t){this.map[c(e)]=f(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),l(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),l(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),l(e)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(e,t){var n,r,i=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),g.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function b(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},m.call(_.prototype),m.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];b.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function S(e,n){return new Promise((function(r,o){var a=new _(e,n);if(a.signal&&a.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function s(){u.abort()}u.onload=function(){var e,t,n={status:u.status,statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};n.url="responseURL"in u?u.responseURL:n.headers.get("X-Request-URL");var i="response"in u?u.response:u.responseText;r(new b(i,n))},u.onerror=function(){o(new TypeError("Network request failed"))},u.ontimeout=function(){o(new TypeError("Network request failed"))},u.onabort=function(){o(new t.DOMException("Aborted","AbortError"))},u.open(a.method,a.url,!0),"include"===a.credentials?u.withCredentials=!0:"omit"===a.credentials&&(u.withCredentials=!1),"responseType"in u&&i&&(u.responseType="blob"),a.headers.forEach((function(e,t){u.setRequestHeader(t,e)})),a.signal&&(a.signal.addEventListener("abort",s),u.onreadystatechange=function(){4===u.readyState&&a.signal.removeEventListener("abort",s)}),u.send(void 0===a._bodyInit?null:a._bodyInit)}))}S.polyfill=!0,e.fetch||(e.fetch=S,e.Headers=p,e.Request=_,e.Response=b),t.Headers=p,t.Request=_,t.Response=b,t.fetch=S,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},97:(e,t,n)=>{var r=n(541),i=n(555),o=n(168).parseJSON;e.exports=i.mergeObjects({Client:n(760),Expr:n(547),PageHelper:n(292),RequestResult:n(523),clientLogger:n(686),errors:n(908),values:n(885),query:r,parseJSON:o},r)},760:(e,t,n)=>{"use strict";var r=n(844),i=n(292),o=n(523),a=n(908),u=n(637),s=n(168),c=n(541),f=n(316),l=n(555),p=n(885);function d(e){var t,n,r,i=(n="Infinity"===(t=l.getEnvVariable("FAUNADB_HTTP2_SESSION_IDLE_TIME"))?1/0:parseInt(t,10),{shouldOverride:r=!isNaN(n),value:r?n:500});e=l.applyDefaults(e,{domain:"db.fauna.com",scheme:"https",port:null,secret:null,timeout:60,observer:null,keepAlive:!0,headers:{},fetch:void 0,queryTimeout:null,http2SessionIdleTime:i.value,checkNewVersion:!1}),i.shouldOverride&&(e.http2SessionIdleTime=i.value),this._observer=e.observer,this._http=new u.HttpClient(e),this.stream=f.StreamAPI(this)}d.apiVersion=r.apiVersion,d.prototype.query=function(e,t){return this._execute("POST","",c.wrap(e),null,t)},d.prototype.paginate=function(e,t,n){return t=l.defaults(t,{}),n=l.defaults(n,{}),new i(this,e,t,n)},d.prototype.ping=function(e,t){return this._execute("GET","ping",null,{scope:e,timeout:t})},d.prototype.getLastTxnTime=function(){return this._http.getLastTxnTime()},d.prototype.syncLastTxnTime=function(e){this._http.syncLastTxnTime(e)},d.prototype.close=function(e){return this._http.close(e)},d.prototype._execute=function(e,t,n,r,i){r=l.defaults(r,null),(t instanceof p.Ref||l.checkInstanceHasProperty(t,"_isFaunaRef"))&&(t=t.value),null!==r&&(r=l.removeUndefinedValues(r));var a=Date.now(),u=this,c=["GET","HEAD"].indexOf(e)>=0?void 0:JSON.stringify(n);return this._http.execute(Object.assign({},i,{path:t,query:r,method:e,body:c})).then((function(f){var l=Date.now(),p=s.parseJSON(f.body),d=new o(e,t,r,c,n,f.body,p,f.status,f.headers,a,l);return u._handleRequestResult(f,d,i),p.resource}))},d.prototype._handleRequestResult=function(e,t,n){null!=e.headers["x-txn-time"]&&this.syncLastTxnTime(parseInt(e.headers["x-txn-time"],10)),[this._observer,n&&n.observer].forEach((e=>{"function"==typeof e&&e(t,this)})),a.FaunaHTTPError.raiseForStatusCode(t)},e.exports=d},547:(e,t,n)=>{"use strict";var r=n(555);function i(e){this.raw=e}i.prototype._isFaunaExpr=!0,i.prototype.toJSON=function(){return this.raw},i.prototype.toFQL=function(){return f(this.raw)};var o=["Do","Call","Union","Intersection","Difference","Equals","Add","BitAnd","BitOr","BitXor","Divide","Max","Min","Modulo","Multiply","Subtract","LT","LTE","GT","GTE","And","Or"],a={containsstrregex:"ContainsStrRegex",containsstr:"ContainsStr",endswith:"EndsWith",findstr:"FindStr",findstrregex:"FindStrRegex",gt:"GT",gte:"GTE",is_nonempty:"is_non_empty",lowercase:"LowerCase",lt:"LT",lte:"LTE",ltrim:"LTrim",ngram:"NGram",rtrim:"RTrim",regexescape:"RegexEscape",replacestr:"ReplaceStr",replacestrregex:"ReplaceStrRegex",startswith:"StartsWith",substring:"SubString",titlecase:"TitleCase",uppercase:"UpperCase"};function u(e){return e instanceof i||r.checkInstanceHasProperty(e,"_isFaunaExpr")}function s(e){return"{"+Object.keys(e).map((function(t){return'"'+t+'": '+f(e[t])})).join(", ")+"}"}function c(e,t){return e.map((function(e){return t(e)})).join(", ")}var f=function(e,t){if(u(e)){if("value"in e)return e.toString();e=e.raw}if(null===e)return"null";switch(typeof e){case"string":return JSON.stringify(e);case"symbol":case"number":case"boolean":return e.toString();case"undefined":return"undefined"}if(Array.isArray(e)){var n=c(e,f);return-1!=o.indexOf(t)?n:"["+n+"]"}if("match"in e){var r=f(e.match),i=e.terms||[];return u(i)&&(i=i.raw),Array.isArray(i)&&0==i.length?"Match("+r+")":Array.isArray(i)?"Match("+r+", ["+c(i,f)+"])":"Match("+r+", "+f(i)+")"}if("paginate"in e){if(1===Object.keys(e).length)return"Paginate("+f(e.paginate)+")";var l=Object.assign({},e);return delete l.paginate,"Paginate("+f(e.paginate)+", "+s(l)+")"}if("let"in e&&"in"in e)return"Let("+(Array.isArray(e.let)?"["+c(e.let,s)+"]":s(e.let))+", "+f(e.in)+")";if("object"in e)return s(e.object);if("merge"in e)return e.lambda?"Merge("+f(e.merge)+", "+f(e.with)+", "+f(e.lambda)+")":"Merge("+f(e.merge)+", "+f(e.with)+")";if("lambda"in e)return"Lambda("+f(e.lambda)+", "+f(e.expr)+")";if("filter"in e)return"Filter("+f(e.collection)+", "+f(e.filter)+")";if("call"in e)return"Call("+f(e.call)+", "+f(e.arguments)+")";if("map"in e)return"Map("+f(e.collection)+", "+f(e.map)+")";if("foreach"in e)return"Foreach("+f(e.collection)+", "+f(e.foreach)+")";var p=Object.keys(e),d=p[0];d=function(e){return e in a&&(e=a[e]),e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("")}(d);var h=p.filter((t=>null!==e[t]||p.length>1)).map((t=>f(e[t],d))).join(", ");return d+"("+h+")"};i.toString=f,e.exports=i},292:(e,t,n)=>{"use strict";var r=n(541),i=n(418);function o(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r={}),this.reverse=!1,this.params={},this.before=void 0,this.after=void 0,i(this.params,n);var o=this.params.cursor||this.params;"before"in o?(this.before=o.before,delete o.before):"after"in o&&(this.after=o.after,delete o.after),this.options={},i(this.options,r),this.client=e,this.set=t,this._faunaFunctions=[]}o.prototype.map=function(e){var t=this._clone();return t._faunaFunctions.push((function(t){return r.Map(t,e)})),t},o.prototype.filter=function(e){var t=this._clone();return t._faunaFunctions.push((function(t){return r.Filter(t,e)})),t},o.prototype.each=function(e){return this._retrieveNextPage(this.after,!1).then(this._consumePages(e,!1))},o.prototype.eachReverse=function(e){return this._retrieveNextPage(this.before,!0).then(this._consumePages(e,!0))},o.prototype.previousPage=function(){return this._retrieveNextPage(this.before,!0).then(this._adjustCursors.bind(this))},o.prototype.nextPage=function(){return this._retrieveNextPage(this.after,!1).then(this._adjustCursors.bind(this))},o.prototype._adjustCursors=function(e){return void 0!==e.after&&(this.after=e.after),void 0!==e.before&&(this.before=e.before),e.data},o.prototype._consumePages=function(e,t){var n=this;return function(r){var i;return e(r.data),void 0!==(i=t?r.before:r.after)?n._retrieveNextPage(i,t).then(n._consumePages(e,t)):Promise.resolve()}},o.prototype._retrieveNextPage=function(e,t){var n={};i(n,this.params);var o=n.cursor||n;void 0!==e?t?o.before=e:o.after=e:t&&(o.before=null);var a=r.Paginate(this.set,n);return this._faunaFunctions.length>0&&this._faunaFunctions.forEach((function(e){a=e(a)})),this.client.query(a,this.options)},o.prototype._clone=function(){return Object.create(o.prototype,{client:{value:this.client},set:{value:this.set},_faunaFunctions:{value:this._faunaFunctions},before:{value:this.before},after:{value:this.after},params:{value:this.params}})},e.exports=o},523:e=>{"use strict";function t(e,t,n,r,i,o,a,u,s,c,f){this.method=e,this.path=t,this.query=n,this.requestRaw=r,this.requestContent=i,this.responseRaw=o,this.responseContent=a,this.statusCode=u,this.responseHeaders=s,this.startTime=c,this.endTime=f}Object.defineProperty(t.prototype,"timeTaken",{get:function(){return this.endTime-this.startTime}}),e.exports=t},41:(e,t,n)=>{"use strict";var r=n(555);function i(e){Error.call(this),this.message=e||"Request aborted due to timeout",this.isTimeoutError=!0}function o(e){Error.call(this),this.message=e||"Request aborted",this.isAbortError=!0}r.inherits(i,Error),r.inherits(o,Error),e.exports={TimeoutError:i,AbortError:o}},987:(e,t,n)=>{"use strict";var{AbortController:r}=n(779),i=n(555),o=n(908),a=n(41);function u(e){e=e||{},this.type="fetch",this._closed=!1,this._fetch=i.resolveFetch(e.fetch),this._pendingRequests=new Map,i.isNodeEnv()&&e.keepAlive&&(this._keepAliveEnabledAgent=new((e.isHttps?n(764):n(336)).Agent)({keepAlive:!0,timeout:3e3}))}function s(e,t){return e&&"AbortError"===e.name?t?t():new a.AbortError:e}u.prototype.execute=function(e){if(this._closed)return Promise.reject(new o.ClientClosed("The Client has already been closed","No subsequent requests can be issued after the .close method is called. Consider creating a new Client instance"));var t=this,n=null,u=null!=e.streamConsumer,c=!e.signal&&!!e.timeout,f=new r,l={isStreaming:u,isAbortedByClose:!1,onComplete:null};t._pendingRequests.set(f,l);var p=function(){t._pendingRequests.delete(f),e.signal&&e.signal.removeEventListener("abort",h),l.onComplete&&l.onComplete()},d=function(){n&&clearTimeout(n)},h=function(){f.abort()};return c&&(n=setTimeout((function(){n=null,f.abort()}),e.timeout)),e.signal&&e.signal.addEventListener("abort",h),this._fetch(i.formatUrl(e.origin,e.path,e.query),{method:e.method,headers:e.headers,body:e.body,agent:this._keepAliveEnabledAgent,signal:f.signal}).then((function(t){d();var n=function(e){var t={};for(var n of e.entries()){var r=n[0],i=n[1];t[r]=i}return t}(t.headers);return u&&t.ok?(function(e,t,n){var r=function(e){n(),t.onError(s(e))};if(i.isNodeEnv())e.body.on("error",r).on("data",t.onData).on("end",(function(){n(),t.onError(new TypeError("network error"))}));else try{var a=e.body.getReader(),u=new TextDecoder("utf-8");function i(){return a.read().then((function(e){if(!e.done){var r=u.decode(e.value,{stream:!0});return t.onData(r),i()}n(),t.onError(new TypeError("network error"))}))}i().catch(r)}catch(e){throw new o.StreamsNotSupported("Please, consider providing a Fetch API-compatible function with streamable response bodies. "+e)}}(t,e.streamConsumer,p),{body:"[stream]",headers:n,status:t.status}):(p(),t.text().then((function(e){return{body:e,headers:n,status:t.status}})))})).catch((function(e){return d(),p(),Promise.reject(s(e,(function(){return!u&&l.isAbortedByClose?new o.ClientClosed("The request is aborted due to the Client#close call with the force=true option"):c?new a.TimeoutError:new a.AbortError})))}))},u.prototype.close=function(e){e=e||{},this._closed=!0;var t=[];return this._pendingRequests.forEach((function(n,r){if(n.isStreaming||e.force)return n.isAbortedByClose=!0,r.abort();t.push(new Promise((function(e){n.onComplete=e})))})),Promise.all(t).then((function(){}))},e.exports=u},320:(e,t,n)=>{"use strict";var r=n(858),i=n(41),o=n(908),a=n(555),u="stream::";function s(e){this.type="http2",this._sessionMap={},this._http2SessionIdleTime=e.http2SessionIdleTime,this._closed=!1}s.prototype._resolveSessionFor=function(e,t){var n=t?u+e:e;if(this._sessionMap[n])return this._sessionMap[n];var i=this,o=null,a=0,s=function(){i._cleanupSessionFor(e,t)},c=function(){o&&(clearTimeout(o),o=null)},f=r.connect(e).once("error",s).once("goaway",s),l={session:f,close:function(e){return c(),e||t?(f.destroy(),Promise.resolve()):new Promise((function(e){f.close(e)}))},onRequestStart:function(){++a,c()},onRequestEnd:function(){var e=0==--a,t=i._closed||f.closed||f.destroyed;e&&!t&&(c(),i._http2SessionIdleTime!==1/0&&(o=setTimeout((function(){o=null,0===a&&s()}),i._http2SessionIdleTime)))}};return this._sessionMap[n]=l,l},s.prototype._cleanupSessionFor=function(e,t){var n=t?u+e:e;this._sessionMap[n]&&(this._sessionMap[n].session.close(),delete this._sessionMap[n])},s.prototype.execute=function(e){if(this._closed)return Promise.reject(new o.ClientClosed("The Client has already been closed","No subsequent requests can be issued after the .close method is called. Consider creating a new Client instance"));var t=this,n=null!=e.streamConsumer;return new Promise((function(u,s){var c=!1,f=!1,l=function(e){c=!0,u(e)},p=function(r){var i=function({error:e,isClosed:t}){return!t||"ERR_HTTP2_GOAWAY_SESSION"!==e.code&&"ERR_HTTP2_STREAM_CANCEL"!==e.code?e:new o.ClientClosed("The request is aborted due to the Client#close call")}({error:r,isClosed:t._closed});if(c&&n)return e.streamConsumer.onError(i);c=!0,s(i)},d=function(){m.onRequestEnd(),e.signal&&e.signal.removeEventListener("abort",h)},h=function(){f=!0,d(),g.close(r.constants.NGHTTP2_CANCEL),p(new i.AbortError)};try{var y=("/"===e.path[0]?e.path:"/"+e.path)+a.querystringify(e.query,"?"),v=Object.assign({},e.headers,{[r.constants.HTTP2_HEADER_PATH]:y,[r.constants.HTTP2_HEADER_METHOD]:e.method}),m=t._resolveSessionFor(e.origin,n),g=m.session.request(v).setEncoding("utf8").on("error",(function(e){d(),p(e)})).on("response",(function(i){var o=i[r.constants.HTTP2_HEADER_STATUS],a=o>=200&&o<400&&n,u="";a&&l({body:"[stream]",headers:i,status:o}),g.on("data",(function(t){if(a)return e.streamConsumer.onData(t);u+=t})).on("end",(function(){if(f||d(),!a)return l({body:u,headers:i,status:o});f||t._closed||e.streamConsumer.onError(new TypeError("network error"))}))}));m.onRequestStart(),!e.signal&&e.timeout&&g.setTimeout(e.timeout,(function(){f=!0,d(),g.close(r.constants.NGHTTP2_CANCEL),p(new i.TimeoutError)})),e.signal&&e.signal.addEventListener("abort",h),null!=e.body&&g.write(e.body),g.end()}catch(r){t._cleanupSessionFor(e.origin,n),p(r)}}))},s.prototype.close=function(e){return e=e||{},this._closed=!0,Promise.all(Object.values(this._sessionMap).map((function(t){return t.close(e.force)}))).then((function(){}))},e.exports=s},637:(e,t,n)=>{"use strict";var r=n(844);const{getBrowserOsDetails:i}=n(555);var o=n(555),a=n(41);function u(e){var t="https"===e.scheme;e.port||(e.port=t?443:80);var a=!e.fetch&&o.isNodeEnv()&&function(){try{return n(858),!0}catch(e){return!1}}();this._adapter=a?new(n(320))({http2SessionIdleTime:e.http2SessionIdleTime}):new(n(987))({isHttps:t,fetch:e.fetch,keepAlive:e.keepAlive}),this._baseUrl=e.scheme+"://"+e.domain+":"+e.port,this._secret=e.secret,this._headers=Object.assign({},e.headers,function(){var e,t={driver:["javascript",r.version].join("-")};try{e=n.g instanceof ServiceWorkerGlobalScope}catch(t){e=!1}try{if(o.isNodeEnv()){t.runtime=["nodejs",process.version].join("-"),t.env=o.getNodeRuntimeEnv();var a=n(886);t.os=[a.platform(),a.release()].join("-")}else e?t.runtime="Service Worker":(t.runtime=o.getBrowserDetails(),t.env="browser",t.os=i())}catch(e){}var u={"X-FaunaDB-API-Version":r.apiVersion};return o.isNodeEnv()&&(u["X-Driver-Env"]=Object.keys(t).map((e=>[e,t[e].toLowerCase()].join("="))).join("; ")),u}()),this._queryTimeout=e.queryTimeout,this._lastSeen=null,this._timeout=Math.floor(1e3*e.timeout)}u.prototype.getLastTxnTime=function(){return this._lastSeen},u.prototype.syncLastTxnTime=function(e){(null==this._lastSeen||this._lastSeen<e)&&(this._lastSeen=e)},u.prototype.close=function(e){return this._adapter.close(e)},u.prototype.execute=function(e){if((e=e||{}).streamConsumer&&("function"!=typeof e.streamConsumer.onData||"function"!=typeof e.streamConsumer.onError))return Promise.reject(new TypeError('Invalid "streamConsumer" provided'));var t=e.secret||this._secret,n=e.queryTimeout||this._queryTimeout,r=this._headers;return r.Authorization=t&&function(e){return"Bearer "+e}(t),r["X-Last-Seen-Txn"]=this._lastSeen,r["X-Query-Timeout"]=n,this._adapter.execute({origin:this._baseUrl,path:e.path||"/",query:e.query,method:e.method||"GET",headers:o.removeNullAndUndefinedValues(r),body:e.body,signal:e.signal,timeout:this._timeout,streamConsumer:e.streamConsumer})},e.exports={HttpClient:u,TimeoutError:a.TimeoutError,AbortError:a.AbortError}},168:(e,t,n)=>{"use strict";var r=n(885);function i(e){return JSON.parse(e,o)}function o(e,t){if("object"!=typeof t||null===t)return t;if("@ref"in t){var n=t["@ref"];if(!("collection"in n)&&!("database"in n))return r.Native.fromName(n.id);var i=o(0,n.collection),a=o(0,n.database);return new r.Ref(n.id,i,a)}return"@obj"in t?t["@obj"]:"@set"in t?new r.SetRef(t["@set"]):"@ts"in t?new r.FaunaTime(t["@ts"]):"@date"in t?new r.FaunaDate(t["@date"]):"@bytes"in t?new r.Bytes(t["@bytes"]):"@query"in t?new r.Query(t["@query"]):t}e.exports={toJSON:function(e,t){return(t=void 0!==t&&t)?JSON.stringify(e,null,"  "):JSON.stringify(e)},parseJSON:i,parseJSONStreaming:function(e){var t=[];try{t.push(i(e)),e=""}catch(o){for(;;){var n=e.indexOf("\n")+1;if(n<=0)break;var r=e.slice(0,n).trim();r.length>0&&t.push(i(r)),e=e.slice(n)}}return{values:t,buffer:e}}}},555:(e,t,n)=>{"use strict";n(844),n(615),n(305);var r="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:void 0!==n.g?n.g:self;function i(e,t){return"object"==typeof e&&null!==e&&Boolean(e[t])}function o(e,t){t=t||"";var n,r,o=[];for(r in"string"!=typeof t&&(t="?"),e)if(i(e,r)){if((n=e[r])||null!=n&&!isNaN(n)||(n=""),r=a(r),n=a(n),null===r||null===n)continue;o.push(r+"="+n)}return o.length?t+o.join("&"):""}function a(e){try{return encodeURIComponent(e)}catch(e){return null}}e.exports={crossGlobal:r,mergeObjects:function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},formatUrl:function(e,t,n){return n="object"==typeof n?o(n):n,[e,t?"/"===t.charAt(0)?"":"/"+t:"",n?"?"===n.charAt(0)?"":"?"+n:""].join("")},querystringify:o,inherits:function(e,t){if(null==e)throw new TypeError('The constructor to "inherits" must not be null or undefined');if(null==t)throw new TypeError('The super constructor to "inherits" must not be null or undefined');if(void 0===t.prototype)throw new TypeError('The super constructor to "inherits" must have a prototype');e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},isNodeEnv:function(){return"undefined"==typeof window&&"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node},getEnvVariable:function(e){if("undefined"!=typeof process&&process&&process.env&&null!=process.env[e])return process.env[e]},defaults:function(e,t){return void 0===e?t:e},applyDefaults:function(e,t){var n={};for(var r in e){if(!(r in t))throw new Error("No such option "+r);n[r]=e[r]}for(var i in t)i in n||(n[i]=t[i]);return n},removeNullAndUndefinedValues:function(e){var t={};for(var n in e){var r=e[n];null!=r&&(t[n]=r)}return t},removeUndefinedValues:function(e){var t={};for(var n in e){var r=e[n];void 0!==r&&(t[n]=r)}return t},checkInstanceHasProperty:i,getBrowserDetails:function(){var e,t,n,r=navigator.appName,i=""+parseFloat(navigator.appVersion);return-1!=(t=navigator.userAgent.indexOf("Opera"))?(r="Opera",i=navigator.userAgent.substring(t+6),-1!=(t=navigator.userAgent.indexOf("Version"))&&(i=navigator.userAgent.substring(t+8))):-1!=(t=navigator.userAgent.indexOf("MSIE"))?(r="Microsoft Internet Explorer",i=navigator.userAgent.substring(t+5)):"Netscape"==r&&-1!=navigator.userAgent.indexOf("Trident/")?(r="Microsoft Internet Explorer",i=navigator.userAgent.substring(t+5),-1!=(t=navigator.userAgent.indexOf("rv:"))&&(i=navigator.userAgent.substring(t+3))):-1!=(t=navigator.userAgent.indexOf("Chrome"))?(r="Chrome",i=navigator.userAgent.substring(t+7)):-1!=(t=navigator.userAgent.indexOf("Safari"))?(r="Safari",i=navigator.userAgent.substring(t+7),-1!=(t=navigator.userAgent.indexOf("Version"))&&(i=navigator.userAgent.substring(t+8)),-1!=navigator.userAgent.indexOf("CriOS")&&(r="Chrome")):-1!=(t=navigator.userAgent.indexOf("Firefox"))?(r="Firefox",i=navigator.userAgent.substring(t+8)):(e=navigator.userAgent.lastIndexOf(" ")+1)<(t=navigator.userAgent.lastIndexOf("/"))&&(r=navigator.userAgent.substring(e,t),i=navigator.userAgent.substring(t+1),r.toLowerCase()==r.toUpperCase()&&(r=navigator.appName)),-1!=(n=i.indexOf(";"))&&(i=i.substring(0,n)),-1!=(n=i.indexOf(" "))&&(i=i.substring(0,n)),-1!=(n=i.indexOf(")"))&&(i=i.substring(0,n)),[r,i].join("-")},getBrowserOsDetails:function(){var e="unknown",t=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Chrome OS",r:/CrOS/},{s:"Linux",r:/(Linux|X11(?!.*CrOS))/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var n in t){var r=t[n];if(r.r.test(navigator.userAgent)){e=r.s;break}}var i="unknown";switch(/Windows/.test(e)&&(i=/Windows (.*)/.exec(e)[1],e="Windows"),e){case"Mac OS":case"Mac OS X":case"Android":i=/(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([\.\_\d]+)/.exec(navigator.userAgent)[1];break;case"iOS":i=(i=/OS (\d+)_(\d+)_?(\d+)?/.exec(navigator.appVersion))[1]+"."+i[2]+"."+(0|i[3])}return[e,i].join("-")},getNodeRuntimeEnv:function(){var e=[{name:"Netlify",check:function(){return process.env.hasOwnProperty("NETLIFY_IMAGES_CDN_DOMAIN")}},{name:"Vercel",check:function(){return process.env.hasOwnProperty("VERCEL")}},{name:"Heroku",check:function(){return process.env.hasOwnProperty("PATH")&&-1!==process.env.PATH.indexOf(".heroku")}},{name:"AWS Lambda",check:function(){return process.env.hasOwnProperty("AWS_LAMBDA_FUNCTION_VERSION")}},{name:"GCP Cloud Functions",check:function(){return process.env.hasOwnProperty("_")&&-1!==process.env._.indexOf("google")}},{name:"GCP Compute Instances",check:function(){return process.env.hasOwnProperty("GOOGLE_CLOUD_PROJECT")}},{name:"Azure Cloud Functions",check:function(){return process.env.hasOwnProperty("WEBSITE_FUNCTIONS_AZUREMONITOR_CATEGORIES")}},{name:"Azure Compute",check:function(){return process.env.hasOwnProperty("ORYX_ENV_TYPE")&&process.env.hasOwnProperty("WEBSITE_INSTANCE_ID")&&"AppService"===process.env.ORYX_ENV_TYPE}},{name:"Mongo Stitch",check:function(){return"function"==typeof r.StitchError}},{name:"Render",check:function(){return process.env.hasOwnProperty("RENDER_SERVICE_ID")}},{name:"Begin",check:function(){return process.env.hasOwnProperty("BEGIN_DATA_SCOPE_ID")}}].find((e=>e.check()));return e?e.name:"unknown"},resolveFetch:function(e){return"function"==typeof e?e:"function"==typeof r.fetch?r.fetch.bind(r):n(98)}}},686:(e,t,n)=>{"use strict";var r=n(168);function i(e){var t=e.query,n=e.method,r=e.path,i=e.requestContent,a=e.responseHeaders,u=e.responseContent,s=e.statusCode,c=e.timeTaken,f="";function l(e){f+=e}return l("Fauna "+n+" /"+r+function(e){if(null==e)return"";var t=Object.keys(e);return 0===t.length?"":"?"+t.map((function(t){return t+"="+e[t]})).join("&")}(t)+"\n"),null!=i&&l("  Request JSON: "+o(i)+"\n"),l("  Response headers: "+o(a)+"\n"),l("  Response JSON: "+o(u)+"\n"),l("  Response ("+s+"): Network latency "+c+"ms\n"),f}function o(e){return r.toJSON(e,!0).split("\n").join("\n  ")}e.exports={logger:function(e){return function(t,n){return e(i(t),n)}},showRequestResult:i}},908:(e,t,n)=>{"use strict";var r=n(555);function i(e,t,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.name=e,this.message=t,this.description=n}function o(e){i.call(this,"InvalidValue",e)}function a(e,t,n,r){var o=`${r} function requires ${function(e,t){return null===t?"at least "+e:null===e?"up to "+t:e===t?e:"from "+e+" to "+t}(e,t)} argument(s) but ${n} were given`,a=`For more info, see the docs: https://docs.fauna.com/fauna/current/api/fql/functions/${r.toLowerCase()}`;i.call(this,"InvalidArity",`${o}\n${a}`),this.min=e,this.max=t,this.actual=n}function u(e,t){var n=t.responseContent.errors,r=0===n.length?'(empty "errors")':n[0].code,o=0===n.length?'(empty "errors")':n[0].description;i.call(this,e,r,o),this.requestResult=t}function s(e){u.call(this,"BadRequest",e)}function c(e){u.call(this,"Unauthorized",e),this.message=this.message+=". Check that endpoint, schema, port and secret are correct during client’s instantiation"}function f(e){u.call(this,"PermissionDenied",e)}function l(e){u.call(this,"NotFound",e)}function p(e){u.call(this,"MethodNotAllowed",e)}function d(e){u.call(this,"TooManyRequests",e)}function h(e){u.call(this,"InternalError",e)}function y(e){u.call(this,"UnavailableError",e)}function v(e,t,n){i.call(this,e,t,n)}function m(e){i.call(this,"StreamsNotSupported","streams not supported",e)}function g(e){var t=e.data||{};i.call(this,"StreamErrorEvent",t.code,t.description),this.event=e}function _(e,t){i.call(this,"ClientClosed",e,t)}r.inherits(i,Error),r.inherits(o,i),r.inherits(a,i),r.inherits(u,i),u.prototype.errors=function(){return this.requestResult.responseContent.errors},u.raiseForStatusCode=function(e){var t=e.statusCode;if(t<200||t>=300)switch(t){case 400:throw new s(e);case 401:throw new c(e);case 403:throw new f(e);case 404:throw new l(e);case 405:throw new p(e);case 429:throw new d(e);case 500:throw new h(e);case 503:throw new y(e);default:throw new u("UnknownError",e)}},r.inherits(s,u),r.inherits(c,u),r.inherits(f,u),r.inherits(l,u),r.inherits(p,u),r.inherits(d,u),r.inherits(h,u),r.inherits(y,u),r.inherits(v,i),r.inherits(m,v),r.inherits(g,v),r.inherits(_,i),e.exports={FaunaError:i,ClientClosed:_,FaunaHTTPError:u,InvalidValue:o,InvalidArity:a,BadRequest:s,Unauthorized:c,PermissionDenied:f,NotFound:l,MethodNotAllowed:p,TooManyRequests:d,InternalError:h,UnavailableError:y,StreamError:v,StreamsNotSupported:m,StreamErrorEvent:g}},541:(e,t,n)=>{"use strict";var r=n(228),i=n(927),o=n(547),a=n(908),u=n(885),s=n(418),c=n(555);function f(e){return y.exact(1,arguments,f.name),new o({var:_(e)})}var l=function(e){return y.exact(1,arguments,l.name),new o({object:w(e)})};function p(){switch(y.between(1,2,arguments,p.name),arguments.length){case 1:var e=arguments[0];if("function"==typeof e)return d(e);if(e instanceof o||c.checkInstanceHasProperty(e,"_isFaunaExpr"))return e;throw new a.InvalidValue("Lambda function takes either a Function or an Expr.");case 2:var t=arguments[0],n=arguments[1];return h(t,n)}}function d(e){var t=r(e);switch(t.length){case 0:throw new a.InvalidValue("Provided Function must take at least 1 argument.");case 1:return h(t[0],e(f(t[0])));default:return h(t,e.apply(null,t.map((function(e){return f(e)}))))}}function h(e,t){return new o({lambda:_(e),expr:_(t)})}function y(e,t,n,r){if(null!==e&&n.length<e||null!==t&&n.length>t)throw new a.InvalidArity(e,t,n.length,r)}function v(e,t){for(var n in t){var r=t[n];null!=r&&(e[n]=r)}return e}function m(e){var t=Array.isArray(e)?e:Array.prototype.slice.call(e);return 1===e.length?e[0]:t}function g(e){var t=[];return t.push.apply(t,e),t}function _(e){return y.exact(1,arguments,_.name),null===e?null:e instanceof o||c.checkInstanceHasProperty(e,"_isFaunaExpr")?e:"symbol"==typeof e?e.toString().replace(/Symbol\((.*)\)/,(function(e,t){return t})):"function"==typeof e?p(e):Array.isArray(e)?new o(e.map((function(e){return _(e)}))):e instanceof Uint8Array||e instanceof ArrayBuffer?new u.Bytes(e):"object"==typeof e?new o({object:w(e)}):e}function w(e){if(null!==e){var t={};return Object.keys(e).forEach((function(n){t[n]=_(e[n])})),t}return null}y.exact=function(e,t,n){y(e,e,t,n)},y.max=function(e,t,n){y(null,e,t,n)},y.min=function(e,t,n){y(e,null,t,n)},y.between=function(e,t,n,r){y(e,t,n,r)},e.exports={Ref:function e(){switch(y.between(1,2,arguments,e.name),arguments.length){case 1:return new o({"@ref":_(arguments[0])});case 2:return new o({ref:_(arguments[0]),id:_(arguments[1])})}},Bytes:function e(t){return y.exact(1,arguments,e.name),new u.Bytes(t)},Abort:function e(t){return y.exact(1,arguments,e.name),new o({abort:_(t)})},At:function e(t,n){return y.exact(2,arguments,e.name),new o({at:_(t),expr:_(n)})},Let:function e(t,n){y.exact(2,arguments,e.name);var r=[];if(r=Array.isArray(t)?t.map((function(e){return w(e)})):Object.keys(t).filter((function(e){return void 0!==t[e]})).map((function(e){var n={};return n[e]=_(t[e]),n})),"function"==typeof n)if(Array.isArray(t)){var i=[];t.forEach((function(e){Object.keys(e).forEach((function(e){i.push(f(e))}))})),n=n.apply(null,i)}else n=n.apply(null,Object.keys(t).map((function(e){return f(e)})));return new o({let:r,in:_(n)})},Var:f,If:function e(t,n,r){return y.exact(3,arguments,e.name),new o({if:_(t),then:_(n),else:_(r)})},Do:function e(){y.min(1,arguments,e.name);var t=g(arguments);return new o({do:_(t)})},Object:l,Lambda:p,Call:function e(t){y.min(1,arguments,e.name);var n=g(arguments);return n.shift(),new o({call:_(t),arguments:_(m(n))})},Query:function e(t){return y.exact(1,arguments,e.name),new o({query:_(t)})},Map:function e(t,n){return y.exact(2,arguments,e.name),new o({map:_(n),collection:_(t)})},Foreach:function e(t,n){return y.exact(2,arguments,e.name),new o({foreach:_(n),collection:_(t)})},Filter:function e(t,n){return y.exact(2,arguments,e.name),new o({filter:_(n),collection:_(t)})},Take:function e(t,n){return y.exact(2,arguments,e.name),new o({take:_(t),collection:_(n)})},Drop:function e(t,n){return y.exact(2,arguments,e.name),new o({drop:_(t),collection:_(n)})},Prepend:function e(t,n){return y.exact(2,arguments,e.name),new o({prepend:_(t),collection:_(n)})},Append:function e(t,n){return y.exact(2,arguments,e.name),new o({append:_(t),collection:_(n)})},IsEmpty:function e(t){return y.exact(1,arguments,e.name),new o({is_empty:_(t)})},IsNonEmpty:function e(t){return y.exact(1,arguments,e.name),new o({is_nonempty:_(t)})},IsNumber:function e(t){return y.exact(1,arguments,e.name),new o({is_number:_(t)})},IsDouble:function e(t){return y.exact(1,arguments,e.name),new o({is_double:_(t)})},IsInteger:function e(t){return y.exact(1,arguments,e.name),new o({is_integer:_(t)})},IsBoolean:function e(t){return y.exact(1,arguments,e.name),new o({is_boolean:_(t)})},IsNull:function e(t){return y.exact(1,arguments,e.name),new o({is_null:_(t)})},IsBytes:function e(t){return y.exact(1,arguments,e.name),new o({is_bytes:_(t)})},IsTimestamp:function e(t){return y.exact(1,arguments,e.name),new o({is_timestamp:_(t)})},IsDate:function e(t){return y.exact(1,arguments,e.name),new o({is_date:_(t)})},IsString:function e(t){return y.exact(1,arguments,e.name),new o({is_string:_(t)})},IsArray:function e(t){return y.exact(1,arguments,e.name),new o({is_array:_(t)})},IsObject:function e(t){return y.exact(1,arguments,e.name),new o({is_object:_(t)})},IsRef:function e(t){return y.exact(1,arguments,e.name),new o({is_ref:_(t)})},IsSet:function e(t){return y.exact(1,arguments,e.name),new o({is_set:_(t)})},IsDoc:function e(t){return y.exact(1,arguments,e.name),new o({is_doc:_(t)})},IsLambda:function e(t){return y.exact(1,arguments,e.name),new o({is_lambda:_(t)})},IsCollection:function e(t){return y.exact(1,arguments,e.name),new o({is_collection:_(t)})},IsDatabase:function e(t){return y.exact(1,arguments,e.name),new o({is_database:_(t)})},IsIndex:function e(t){return y.exact(1,arguments,e.name),new o({is_index:_(t)})},IsFunction:function e(t){return y.exact(1,arguments,e.name),new o({is_function:_(t)})},IsKey:function e(t){return y.exact(1,arguments,e.name),new o({is_key:_(t)})},IsToken:function e(t){return y.exact(1,arguments,e.name),new o({is_token:_(t)})},IsCredentials:function e(t){return y.exact(1,arguments,e.name),new o({is_credentials:_(t)})},IsRole:function e(t){return y.exact(1,arguments,e.name),new o({is_role:_(t)})},Get:function e(t,n){return y.between(1,2,arguments,e.name),n=c.defaults(n,null),new o(v({get:_(t)},{ts:_(n)}))},KeyFromSecret:function e(t){return y.exact(1,arguments,e.name),new o({key_from_secret:_(t)})},Reduce:function e(t,n,r){return y.exact(3,arguments,e.name),new o({reduce:_(t),initial:_(n),collection:_(r)})},Paginate:function e(t,n){return y.between(1,2,arguments,e.name),n=c.defaults(n,{}),new o(s({paginate:_(t)},w(n)))},Exists:function e(t,n){return y.between(1,2,arguments,e.name),n=c.defaults(n,null),new o(v({exists:_(t)},{ts:_(n)}))},Create:function e(t,n){return y.between(1,2,arguments,e.name),new o({create:_(t),params:_(n)})},Update:function e(t,n){return y.exact(2,arguments,e.name),new o({update:_(t),params:_(n)})},Replace:function e(t,n){return y.exact(2,arguments,e.name),new o({replace:_(t),params:_(n)})},Delete:function e(t){return y.exact(1,arguments,e.name),new o({delete:_(t)})},Insert:function e(t,n,r,i){return y.exact(4,arguments,e.name),new o({insert:_(t),ts:_(n),action:_(r),params:_(i)})},Remove:function e(t,n,r){return y.exact(3,arguments,e.name),new o({remove:_(t),ts:_(n),action:_(r)})},CreateClass:i((function e(t){return y.exact(1,arguments,e.name),new o({create_class:_(t)})}),"CreateClass() is deprecated, use CreateCollection() instead"),CreateCollection:function e(t){return y.exact(1,arguments,e.name),new o({create_collection:_(t)})},CreateDatabase:function e(t){return y.exact(1,arguments,e.name),new o({create_database:_(t)})},CreateIndex:function e(t){return y.exact(1,arguments,e.name),new o({create_index:_(t)})},CreateKey:function e(t){return y.exact(1,arguments,e.name),new o({create_key:_(t)})},CreateFunction:function e(t){return y.exact(1,arguments,e.name),new o({create_function:_(t)})},CreateRole:function e(t){return y.exact(1,arguments,e.name),new o({create_role:_(t)})},CreateAccessProvider:function e(t){return y.exact(1,arguments,e.name),new o({create_access_provider:_(t)})},Singleton:function e(t){return y.exact(1,arguments,e.name),new o({singleton:_(t)})},Events:function e(t){return y.exact(1,arguments,e.name),new o({events:_(t)})},Match:function e(t){y.min(1,arguments,e.name);var n=g(arguments);return n.shift(),new o({match:_(t),terms:_(m(n))})},Union:function e(){return y.min(1,arguments,e.name),new o({union:_(m(arguments))})},Merge:function e(t,n,r){return y.between(2,3,arguments,e.name),new o(v({merge:_(t),with:_(n)},{lambda:_(r)}))},Intersection:function e(){return y.min(1,arguments,e.name),new o({intersection:_(m(arguments))})},Difference:function e(){return y.min(1,arguments,e.name),new o({difference:_(m(arguments))})},Distinct:function e(t){return y.exact(1,arguments,e.name),new o({distinct:_(t)})},Join:function e(t,n){return y.exact(2,arguments,e.name),new o({join:_(t),with:_(n)})},Range:function e(t,n,r){return y.exact(3,arguments,e.name),new o({range:_(t),from:_(n),to:_(r)})},Login:function e(t,n){return y.exact(2,arguments,e.name),new o({login:_(t),params:_(n)})},Logout:function e(t){return y.exact(1,arguments,e.name),new o({logout:_(t)})},Identify:function e(t,n){return y.exact(2,arguments,e.name),new o({identify:_(t),password:_(n)})},Identity:i((function e(){return y.exact(0,arguments,e.name),new o({identity:null})}),"Identity() is deprecated, use CurrentIdentity() instead"),CurrentIdentity:function e(){return y.exact(0,arguments,e.name),new o({current_identity:null})},HasIdentity:i((function e(){return y.exact(0,arguments,e.name),new o({has_identity:null})}),"HasIdentity() is deprecated, use HasCurrentIdentity() instead"),HasCurrentIdentity:function e(){return y.exact(0,arguments,e.name),new o({has_current_identity:null})},CurrentToken:function e(){return y.exact(0,arguments,e.name),new o({current_token:null})},HasCurrentToken:function e(){return y.exact(0,arguments,e.name),new o({has_current_token:null})},Concat:function e(t,n){return y.min(1,arguments,e.name),n=c.defaults(n,null),new o(v({concat:_(t)},{separator:_(n)}))},Casefold:function e(t,n){return y.min(1,arguments,e.name),new o(v({casefold:_(t)},{normalizer:_(n)}))},ContainsStr:function e(t,n){return y.exact(2,arguments,e.name),new o({containsstr:_(t),search:_(n)})},ContainsStrRegex:function e(t,n){return y.exact(2,arguments,e.name),new o({containsstrregex:_(t),pattern:_(n)})},StartsWith:function e(t,n){return y.exact(2,arguments,e.name),new o({startswith:_(t),search:_(n)})},EndsWith:function e(t,n){return y.exact(2,arguments,e.name),new o({endswith:_(t),search:_(n)})},FindStr:function e(t,n,r){return y.between(2,3,arguments,e.name),r=c.defaults(r,null),new o(v({findstr:_(t),find:_(n)},{start:_(r)}))},FindStrRegex:function e(t,n,r,i){return y.between(2,4,arguments,e.name),r=c.defaults(r,null),new o(v({findstrregex:_(t),pattern:_(n)},{start:_(r),num_results:_(i)}))},Length:function e(t){return y.exact(1,arguments,e.name),new o({length:_(t)})},LowerCase:function e(t){return y.exact(1,arguments,e.name),new o({lowercase:_(t)})},LTrim:function e(t){return y.exact(1,arguments,e.name),new o({ltrim:_(t)})},NGram:function e(t,n,r){return y.between(1,3,arguments,e.name),n=c.defaults(n,null),r=c.defaults(r,null),new o(v({ngram:_(t)},{min:_(n),max:_(r)}))},Repeat:function e(t,n){return y.between(1,2,arguments,e.name),n=c.defaults(n,null),new o(v({repeat:_(t)},{number:_(n)}))},ReplaceStr:function e(t,n,r){return y.exact(3,arguments,e.name),new o({replacestr:_(t),find:_(n),replace:_(r)})},ReplaceStrRegex:function e(t,n,r,i){return y.between(3,4,arguments,e.name),i=c.defaults(i,null),new o(v({replacestrregex:_(t),pattern:_(n),replace:_(r)},{first:_(i)}))},RegexEscape:function e(t){return y.exact(1,arguments,e.name),new o({regexescape:_(t)})},RTrim:function e(t){return y.exact(1,arguments,e.name),new o({rtrim:_(t)})},Space:function e(t){return y.exact(1,arguments,e.name),new o({space:_(t)})},SubString:function e(t,n,r){return y.between(1,3,arguments,e.name),n=c.defaults(n,null),r=c.defaults(r,null),new o(v({substring:_(t)},{start:_(n),length:_(r)}))},TitleCase:function e(t){return y.exact(1,arguments,e.name),new o({titlecase:_(t)})},Trim:function e(t){return y.exact(1,arguments,e.name),new o({trim:_(t)})},UpperCase:function e(t){return y.exact(1,arguments,e.name),new o({uppercase:_(t)})},Format:function e(t){y.min(1,arguments,e.name);var n=g(arguments);return n.shift(),new o({format:_(t),values:_(m(n))})},Time:function e(t){return y.exact(1,arguments,e.name),new o({time:_(t)})},TimeAdd:function e(t,n,r){return y.exact(3,arguments,e.name),new o({time_add:_(t),offset:_(n),unit:_(r)})},TimeSubtract:function e(t,n,r){return y.exact(3,arguments,e.name),new o({time_subtract:_(t),offset:_(n),unit:_(r)})},TimeDiff:function e(t,n,r){return y.exact(3,arguments,e.name),new o({time_diff:_(t),other:_(n),unit:_(r)})},Epoch:function e(t,n){return y.exact(2,arguments,e.name),new o({epoch:_(t),unit:_(n)})},Date:function e(t){return y.exact(1,arguments,e.name),new o({date:_(t)})},Now:function e(){return y.exact(0,arguments,e.name),new o({now:_(null)})},NextId:i((function e(){return y.exact(0,arguments,e.name),new o({next_id:null})}),"NextId() is deprecated, use NewId() instead"),NewId:function e(){return y.exact(0,arguments,e.name),new o({new_id:null})},Database:function e(t,n){switch(y.between(1,2,arguments,e.name),arguments.length){case 1:return new o({database:_(t)});case 2:return new o({database:_(t),scope:_(n)})}},Index:function e(t,n){switch(y.between(1,2,arguments,e.name),arguments.length){case 1:return new o({index:_(t)});case 2:return new o({index:_(t),scope:_(n)})}},Class:i((function e(t,n){switch(y.between(1,2,arguments,e.name),arguments.length){case 1:return new o({class:_(t)});case 2:return new o({class:_(t),scope:_(n)})}}),"Class() is deprecated, use Collection() instead"),Collection:function e(t,n){switch(y.between(1,2,arguments,e.name),arguments.length){case 1:return new o({collection:_(t)});case 2:return new o({collection:_(t),scope:_(n)})}},Function:function e(t,n){switch(y.between(1,2,arguments,e.name),arguments.length){case 1:return new o({function:_(t)});case 2:return new o({function:_(t),scope:_(n)})}},Role:function e(t,n){return y.between(1,2,arguments,e.name),n=c.defaults(n,null),new o(v({role:_(t)},{scope:_(n)}))},AccessProviders:function e(t){return y.max(1,arguments,e.name),t=c.defaults(t,null),new o({access_providers:_(t)})},Classes:i((function e(t){return y.max(1,arguments,e.name),t=c.defaults(t,null),new o({classes:_(t)})}),"Classes() is deprecated, use Collections() instead"),Collections:function e(t){return y.max(1,arguments,e.name),t=c.defaults(t,null),new o({collections:_(t)})},Databases:function e(t){return y.max(1,arguments,e.name),t=c.defaults(t,null),new o({databases:_(t)})},Indexes:function e(t){return y.max(1,arguments,e.name),t=c.defaults(t,null),new o({indexes:_(t)})},Functions:function e(t){return y.max(1,arguments,e.name),t=c.defaults(t,null),new o({functions:_(t)})},Roles:function e(t){return y.max(1,arguments,e.name),t=c.defaults(t,null),new o({roles:_(t)})},Keys:function e(t){return y.max(1,arguments,e.name),t=c.defaults(t,null),new o({keys:_(t)})},Tokens:function e(t){return y.max(1,arguments,e.name),t=c.defaults(t,null),new o({tokens:_(t)})},Credentials:function e(t){return y.max(1,arguments,e.name),t=c.defaults(t,null),new o({credentials:_(t)})},Equals:function e(){return y.min(1,arguments,e.name),new o({equals:_(m(arguments))})},Contains:i((function e(t,n){return y.exact(2,arguments,e.name),new o({contains:_(t),in:_(n)})}),"Contains() is deprecated, use ContainsPath() instead"),ContainsPath:function e(t,n){return y.exact(2,arguments,e.name),new o({contains_path:_(t),in:_(n)})},ContainsField:function e(t,n){return y.exact(2,arguments,e.name),new o({contains_field:_(t),in:_(n)})},ContainsValue:function e(t,n){return y.exact(2,arguments,e.name),new o({contains_value:_(t),in:_(n)})},Select:function e(t,n,r){y.between(2,3,arguments,e.name);var i={select:_(t),from:_(n)};return void 0!==r&&(i.default=_(r)),new o(i)},SelectAll:i((function e(t,n){return y.exact(2,arguments,e.name),new o({select_all:_(t),from:_(n)})}),"SelectAll() is deprecated. Avoid use."),Abs:function e(t){return y.exact(1,arguments,e.name),new o({abs:_(t)})},Add:function e(){return y.min(1,arguments,e.name),new o({add:_(m(arguments))})},BitAnd:function e(){return y.min(1,arguments,e.name),new o({bitand:_(m(arguments))})},BitNot:function e(t){return y.exact(1,arguments,e.name),new o({bitnot:_(t)})},BitOr:function e(){return y.min(1,arguments,e.name),new o({bitor:_(m(arguments))})},BitXor:function e(){return y.min(1,arguments,e.name),new o({bitxor:_(m(arguments))})},Ceil:function e(t){return y.exact(1,arguments,e.name),new o({ceil:_(t)})},Divide:function e(){return y.min(1,arguments,e.name),new o({divide:_(m(arguments))})},Floor:function e(t){return y.exact(1,arguments,e.name),new o({floor:_(t)})},Max:function e(){return y.min(1,arguments,e.name),new o({max:_(m(arguments))})},Min:function e(){return y.min(1,arguments,e.name),new o({min:_(m(arguments))})},Modulo:function e(){return y.min(1,arguments,e.name),new o({modulo:_(m(arguments))})},Multiply:function e(){return y.min(1,arguments,e.name),new o({multiply:_(m(arguments))})},Round:function e(t,n){return y.min(1,arguments,e.name),n=c.defaults(n,null),new o(v({round:_(t)},{precision:_(n)}))},Subtract:function e(){return y.min(1,arguments,e.name),new o({subtract:_(m(arguments))})},Sign:function e(t){return y.exact(1,arguments,e.name),new o({sign:_(t)})},Sqrt:function e(t){return y.exact(1,arguments,e.name),new o({sqrt:_(t)})},Trunc:function e(t,n){return y.min(1,arguments,e.name),n=c.defaults(n,null),new o(v({trunc:_(t)},{precision:_(n)}))},Count:function e(t){return y.exact(1,arguments,e.name),new o({count:_(t)})},Sum:function e(t){return y.exact(1,arguments,e.name),new o({sum:_(t)})},Mean:function e(t){return y.exact(1,arguments,e.name),new o({mean:_(t)})},Any:function e(t){return y.exact(1,arguments,e.name),new o({any:_(t)})},All:function e(t){return y.exact(1,arguments,e.name),new o({all:_(t)})},Acos:function e(t){return y.exact(1,arguments,e.name),new o({acos:_(t)})},Asin:function e(t){return y.exact(1,arguments,e.name),new o({asin:_(t)})},Atan:function e(t){return y.exact(1,arguments,e.name),new o({atan:_(t)})},Cos:function e(t){return y.exact(1,arguments,e.name),new o({cos:_(t)})},Cosh:function e(t){return y.exact(1,arguments,e.name),new o({cosh:_(t)})},Degrees:function e(t){return y.exact(1,arguments,e.name),new o({degrees:_(t)})},Exp:function e(t){return y.exact(1,arguments,e.name),new o({exp:_(t)})},Hypot:function e(t,n){return y.min(1,arguments,e.name),n=c.defaults(n,null),new o(v({hypot:_(t)},{b:_(n)}))},Ln:function e(t){return y.exact(1,arguments,e.name),new o({ln:_(t)})},Log:function e(t){return y.exact(1,arguments,e.name),new o({log:_(t)})},Pow:function e(t,n){return y.min(1,arguments,e.name),n=c.defaults(n,null),new o(v({pow:_(t)},{exp:_(n)}))},Radians:function e(t){return y.exact(1,arguments,e.name),new o({radians:_(t)})},Sin:function e(t){return y.exact(1,arguments,e.name),new o({sin:_(t)})},Sinh:function e(t){return y.exact(1,arguments,e.name),new o({sinh:_(t)})},Tan:function e(t){return y.exact(1,arguments,e.name),new o({tan:_(t)})},Tanh:function e(t){return y.exact(1,arguments,e.name),new o({tanh:_(t)})},LT:function e(){return y.min(1,arguments,e.name),new o({lt:_(m(arguments))})},LTE:function e(){return y.min(1,arguments,e.name),new o({lte:_(m(arguments))})},GT:function e(){return y.min(1,arguments,e.name),new o({gt:_(m(arguments))})},GTE:function e(){return y.min(1,arguments,e.name),new o({gte:_(m(arguments))})},And:function e(){return y.min(1,arguments,e.name),new o({and:_(m(arguments))})},Or:function e(){return y.min(1,arguments,e.name),new o({or:_(m(arguments))})},Not:function e(t){return y.exact(1,arguments,e.name),new o({not:_(t)})},ToString:function e(t){return y.exact(1,arguments,e.name),new o({to_string:_(t)})},ToNumber:function e(t){return y.exact(1,arguments,e.name),new o({to_number:_(t)})},ToObject:function e(t){return y.exact(1,arguments,e.name),new o({to_object:_(t)})},ToArray:function e(t){return y.exact(1,arguments,e.name),new o({to_array:_(t)})},ToDouble:function e(t){return y.exact(1,arguments,e.name),new o({to_double:_(t)})},ToInteger:function e(t){return y.exact(1,arguments,e.name),new o({to_integer:_(t)})},ToTime:function e(t){return y.exact(1,arguments,e.name),new o({to_time:_(t)})},ToSeconds:function e(t){return y.exact(1,arguments,e.name),new o({to_seconds:_(t)})},ToMicros:function e(t){return y.exact(1,arguments,e.name),new o({to_micros:_(t)})},ToMillis:function e(t){return y.exact(1,arguments,e.name),new o({to_millis:_(t)})},DayOfMonth:function e(t){return y.exact(1,arguments,e.name),new o({day_of_month:_(t)})},DayOfWeek:function e(t){return y.exact(1,arguments,e.name),new o({day_of_week:_(t)})},DayOfYear:function e(t){return y.exact(1,arguments,e.name),new o({day_of_year:_(t)})},Second:function e(t){return y.exact(1,arguments,e.name),new o({second:_(t)})},Minute:function e(t){return y.exact(1,arguments,e.name),new o({minute:_(t)})},Hour:function e(t){return y.exact(1,arguments,e.name),new o({hour:_(t)})},Month:function e(t){return y.exact(1,arguments,e.name),new o({month:_(t)})},Year:function e(t){return y.exact(1,arguments,e.name),new o({year:_(t)})},ToDate:function e(t){return y.exact(1,arguments,e.name),new o({to_date:_(t)})},MoveDatabase:function e(t,n){return y.exact(2,arguments,e.name),new o({move_database:_(t),to:_(n)})},Documents:function e(t){return y.exact(1,arguments,e.name),new o({documents:_(t)})},Reverse:function e(t){return y.exact(1,arguments,e.name),new o({reverse:_(t)})},AccessProvider:function e(t){return y.exact(1,arguments,e.name),new o({access_provider:_(t)})},wrap:_}},316:(e,t,n)=>{"use strict";var{AbortController:r}=n(779),i=n(523),o=n(908),a=n(168),u=n(637),s=n(541),c=n(555),f=["start","error","version","history_rewrite","set"],l=f.concat(["snapshot"]);function p(e,t,n,i){n=c.applyDefaults(n,{fields:null}),this._client=e,this._onEvent=i,this._query=s.wrap(t),this._urlParams=n.fields?{fields:n.fields.join(",")}:null,this._abort=new r,this._state="idle"}function d(e){this._allowedEvents=e,this._listeners={}}function h(e,t){this._client=e,this._dispatcher=t}p.prototype.snapshot=function(){var e=this;e._client.query(s.Get(e._query)).then((function(t){e._onEvent({type:"snapshot",event:t})})).catch((function(t){e._onEvent({type:"error",event:t})}))},p.prototype.subscribe=function(){var e=this;if("idle"!==e._state)throw new Error("Subscription#start should not be called several times, consider instantiating a new stream instead.");e._state="open";var t=JSON.stringify(e._query),n=Date.now(),r="";function s(t){t instanceof u.AbortError||e._onEvent({type:"error",event:t})}e._client._http.execute({method:"POST",path:"stream",body:t,query:e._urlParams,signal:this._abort.signal,streamConsumer:{onError:s,onData:function(t){var n=a.parseJSONStreaming(r+t);r=n.buffer,n.values.forEach((function(t){void 0!==t.txn&&e._client.syncLastTxnTime(t.txn),"error"===t.event?s(new o.StreamErrorEvent(t)):e._onEvent(t)}))}}}).then((function(r){var o,u=Date.now();try{o=a.parseJSON(r.body)}catch(e){o=r.body}var s=new i("POST","stream",e._urlParams,t,e._query,r.body,o,r.status,r.headers,n,u);e._client._handleRequestResult(r,s)})).catch(s)},p.prototype.close=function(){"closed"!==this._state&&(this._state="closed",this._abort.abort())},d.prototype.on=function(e,t){if(-1===this._allowedEvents.indexOf(e))throw new Error("Unknown event type: "+e);void 0===this._listeners[e]&&(this._listeners[e]=[]),this._listeners[e].push(t)},d.prototype.dispatch=function(e){var t=this._listeners[e.type];if(t)for(var n=0;n<t.length;n++)t[n].call(null,e.event,e)},h.prototype.on=function(e,t){return this._dispatcher.on(e,t),this},h.prototype.start=function(){return this._client.subscribe(),this},h.prototype.close=function(){this._client.close()},e.exports={StreamAPI:function(e){var t=function(t,n){var r=new d(f);return new h(new p(e,t,n,(function(e){r.dispatch(e)})),r)};return t.document=function(t,n){var r=[],i=!0,o=new d(l),a=new p(e,t,n,(function(e){switch(e.type){case"start":o.dispatch(e),a.snapshot();break;case"snapshot":!function(e){o.dispatch(e);for(var t=0;t<r.length;t++){var n=r[t];n.txn>e.event.ts&&o.dispatch(n)}i=!1,r=null}(e);break;case"error":o.dispatch(e);break;default:i?r.push(e):o.dispatch(e)}}));return new h(a,o)},t}}},885:(e,t,n)=>{"use strict";var r=n(742),i=n(927),o=n(908),a=n(547),u=n(555),s=u.isNodeEnv()?n(569):null,c=s&&s.inspect.custom,f=s?s.inspect:JSON.stringify;function l(){}function p(e,t,n){if(!e)throw new o.InvalidValue("id cannot be null or undefined");this.value={id:e},t&&(this.value.collection=t),n&&(this.value.database=n)}u.inherits(l,a),l.prototype._isFaunaValue=!0,u.inherits(p,l),p.prototype._isFaunaRef=!0,Object.defineProperty(p.prototype,"collection",{get:function(){return this.value.collection}}),Object.defineProperty(p.prototype,"class",{get:i((function(){return this.value.collection}),"class is deprecated, use collection instead")}),Object.defineProperty(p.prototype,"database",{get:function(){return this.value.database}}),Object.defineProperty(p.prototype,"id",{get:function(){return this.value.id}}),p.prototype.toJSON=function(){return{"@ref":this.value}},_(p,(function(){var e={collections:"Collection",databases:"Database",indexes:"Index",functions:"Function",roles:"Role",access_providers:"AccessProvider"},t=function(e){return void 0===e.collection},n=function(r){if(t(r)){var i=void 0!==r.database?r.database.toString():"";return"access_providers"===r.id?"AccessProviders("+i+")":r.id.charAt(0).toUpperCase()+r.id.slice(1)+"("+i+")"}if(t(r.collection)){var o=e[r.collection.id];if(void 0!==o)return i=void 0!==r.database?", "+r.database.toString():"",o+'("'+r.id+'"'+i+")"}return"Ref("+n(r.collection)+', "'+r.id+'")'};return n(this)})),p.prototype.valueOf=function(){return this.value},p.prototype.equals=function(e){return(e instanceof p||u.checkInstanceHasProperty(e,"_isFaunaRef"))&&this.id===e.id&&(void 0===this.collection&&void 0===e.collection||this.collection.equals(e.collection))&&(void 0===this.database&&void 0===e.database||this.database.equals(e.database))};var d={COLLECTIONS:new p("collections"),INDEXES:new p("indexes"),DATABASES:new p("databases"),FUNCTIONS:new p("functions"),ROLES:new p("roles"),KEYS:new p("keys"),ACCESS_PROVIDERS:new p("access_providers")};function h(e){this.value=e}function y(e){if(e instanceof Date)e=e.toISOString();else if("Z"!==e.charAt(e.length-1))throw new o.InvalidValue("Only allowed timezone is 'Z', got: "+e);this.value=e}function v(e){e instanceof Date&&(e=e.toISOString().slice(0,10)),this.value=e}function m(e){if(e instanceof ArrayBuffer)this.value=new Uint8Array(e);else if("string"==typeof e)this.value=r.toByteArray(e);else{if(!(e instanceof Uint8Array))throw new o.InvalidValue("Bytes type expect argument to be either Uint8Array|ArrayBuffer|string, got: "+f(e));this.value=e}}function g(e){this.value=e}function _(e,t){e.prototype.toString=t,e.prototype.inspect=t,c&&(e.prototype[c]=t)}d.fromName=function(e){switch(e){case"collections":return d.COLLECTIONS;case"indexes":return d.INDEXES;case"databases":return d.DATABASES;case"functions":return d.FUNCTIONS;case"roles":return d.ROLES;case"keys":return d.KEYS;case"access_providers":return d.ACCESS_PROVIDERS}return new p(e)},u.inherits(h,l),_(h,(function(){return a.toString(this.value)})),h.prototype.toJSON=function(){return{"@set":this.value}},u.inherits(y,l),Object.defineProperty(y.prototype,"date",{get:function(){return new Date(this.value)}}),_(y,(function(){return'Time("'+this.value+'")'})),y.prototype.toJSON=function(){return{"@ts":this.value}},u.inherits(v,l),Object.defineProperty(v.prototype,"date",{get:function(){return new Date(this.value)}}),_(v,(function(){return'Date("'+this.value+'")'})),v.prototype.toJSON=function(){return{"@date":this.value}},u.inherits(m,l),_(m,(function(){return'Bytes("'+r.fromByteArray(this.value)+'")'})),m.prototype.toJSON=function(){return{"@bytes":r.fromByteArray(this.value)}},u.inherits(g,l),_(g,(function(){return"Query("+a.toString(this.value)+")"})),g.prototype.toJSON=function(){return{"@query":this.value}},e.exports={Value:l,Ref:p,Native:d,SetRef:h,FaunaTime:y,FaunaDate:v,Bytes:m,Query:g}},228:e=>{"use strict";e.exports=function(e){if("function"!=typeof e)throw new Error("Could not parse function signature for injection dependencies: Object is not a function");if(!e.length)return[];var t=/^()\(?([^)=]*)\)? *=>/.exec(e+"")||/^[^(]+([^ \(]*) *\(([^\)]*)\)/.exec(e+"");if(!t)throw new Error("Could not parse function signature for injection dependencies: "+e);var n=t[2].replace(/\/\*[\S\s]*?\*\//g," ").replace(/\/\/.*/g," ");function r(e,t,n){return t+n.split(",").map((function(e){return e&&e.trim()})).filter(Boolean).join("@")}return(n=(n=n.replace(/(\{)([^}]*)\}/g,r)).replace(/(\[)([^}]*)\]/g,r)).split(",").map((function(e){return e&&e.trim()})).map((function(e){return"{"===e[0]?e.substring(1).split("@"):"["===e[0]?{items:e.substring(1).split("@")}:e})).filter(Boolean)}},486:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",u="__lodash_placeholder__",s=32,c=128,f=1/0,l=9007199254740991,p=NaN,d=4294967295,h=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",s],["partialRight",64],["rearg",256]],y="[object Arguments]",v="[object Array]",m="[object Boolean]",g="[object Date]",_="[object Error]",w="[object Function]",b="[object GeneratorFunction]",x="[object Map]",S="[object Number]",E="[object Object]",T="[object Promise]",O="[object RegExp]",A="[object Set]",k="[object String]",j="[object Symbol]",I="[object WeakMap]",C="[object ArrayBuffer]",P="[object DataView]",N="[object Float32Array]",R="[object Float64Array]",L="[object Int8Array]",D="[object Int16Array]",M="[object Int32Array]",Z="[object Uint8Array]",U="[object Uint8ClampedArray]",q="[object Uint16Array]",B="[object Uint32Array]",F=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,V=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,$=RegExp(V.source),G=RegExp(H.source),J=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(te.source),re=/^\s+/,ie=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ae=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,se=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ce=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,le=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,de=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,me=/^(?:0|[1-9]\d*)$/,ge=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_e=/($^)/,we=/['\n\r\u2028\u2029\\]/g,be="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xe="a-z\\xdf-\\xf6\\xf8-\\xff",Se="A-Z\\xc0-\\xd6\\xd8-\\xde",Ee="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Te="["+Ee+"]",Oe="["+be+"]",Ae="\\d+",ke="["+xe+"]",je="[^\\ud800-\\udfff"+Ee+Ae+"\\u2700-\\u27bf"+xe+Se+"]",Ie="\\ud83c[\\udffb-\\udfff]",Ce="[^\\ud800-\\udfff]",Pe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ne="[\\ud800-\\udbff][\\udc00-\\udfff]",Re="["+Se+"]",Le="(?:"+ke+"|"+je+")",De="(?:"+Re+"|"+je+")",Me="(?:['’](?:d|ll|m|re|s|t|ve))?",Ze="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ue="(?:"+Oe+"|"+Ie+")?",qe="[\\ufe0e\\ufe0f]?",Be=qe+Ue+"(?:\\u200d(?:"+[Ce,Pe,Ne].join("|")+")"+qe+Ue+")*",Fe="(?:"+["[\\u2700-\\u27bf]",Pe,Ne].join("|")+")"+Be,We="(?:"+[Ce+Oe+"?",Oe,Pe,Ne,"[\\ud800-\\udfff]"].join("|")+")",ze=RegExp("['’]","g"),Ve=RegExp(Oe,"g"),He=RegExp(Ie+"(?="+Ie+")|"+We+Be,"g"),$e=RegExp([Re+"?"+ke+"+"+Me+"(?="+[Te,Re,"$"].join("|")+")",De+"+"+Ze+"(?="+[Te,Re+Le,"$"].join("|")+")",Re+"?"+Le+"+"+Me,Re+"+"+Ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ae,Fe].join("|"),"g"),Ge=RegExp("[\\u200d\\ud800-\\udfff"+be+"\\ufe0e\\ufe0f]"),Je=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ke=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xe=-1,Ye={};Ye[N]=Ye[R]=Ye[L]=Ye[D]=Ye[M]=Ye[Z]=Ye[U]=Ye[q]=Ye[B]=!0,Ye[y]=Ye[v]=Ye[C]=Ye[m]=Ye[P]=Ye[g]=Ye[_]=Ye[w]=Ye[x]=Ye[S]=Ye[E]=Ye[O]=Ye[A]=Ye[k]=Ye[I]=!1;var Qe={};Qe[y]=Qe[v]=Qe[C]=Qe[P]=Qe[m]=Qe[g]=Qe[N]=Qe[R]=Qe[L]=Qe[D]=Qe[M]=Qe[x]=Qe[S]=Qe[E]=Qe[O]=Qe[A]=Qe[k]=Qe[j]=Qe[Z]=Qe[U]=Qe[q]=Qe[B]=!0,Qe[_]=Qe[w]=Qe[I]=!1;var et={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tt=parseFloat,nt=parseInt,rt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,it="object"==typeof self&&self&&self.Object===Object&&self,ot=rt||it||Function("return this")(),at=t&&!t.nodeType&&t,ut=at&&e&&!e.nodeType&&e,st=ut&&ut.exports===at,ct=st&&rt.process,ft=function(){try{return ut&&ut.require&&ut.require("util").types||ct&&ct.binding&&ct.binding("util")}catch(e){}}(),lt=ft&&ft.isArrayBuffer,pt=ft&&ft.isDate,dt=ft&&ft.isMap,ht=ft&&ft.isRegExp,yt=ft&&ft.isSet,vt=ft&&ft.isTypedArray;function mt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function gt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function _t(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function wt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function bt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function xt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function St(e,t){return!(null==e||!e.length)&&Nt(e,t,0)>-1}function Et(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Tt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Ot(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function At(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function kt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function jt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var It=Mt("length");function Ct(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Pt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Nt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Pt(e,Lt,n)}function Rt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Lt(e){return e!=e}function Dt(e,t){var n=null==e?0:e.length;return n?qt(e,t)/n:p}function Mt(e){return function(t){return null==t?i:t[e]}}function Zt(e){return function(t){return null==e?i:e[t]}}function Ut(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function qt(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function Bt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Ft(e){return e?e.slice(0,un(e)+1).replace(re,""):e}function Wt(e){return function(t){return e(t)}}function zt(e,t){return Tt(t,(function(t){return e[t]}))}function Vt(e,t){return e.has(t)}function Ht(e,t){for(var n=-1,r=e.length;++n<r&&Nt(t,e[n],0)>-1;);return n}function $t(e,t){for(var n=e.length;n--&&Nt(t,e[n],0)>-1;);return n}function Gt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var Jt=Zt({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Kt=Zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Xt(e){return"\\"+et[e]}function Yt(e){return Ge.test(e)}function Qt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function en(e,t){return function(n){return e(t(n))}}function tn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==u||(e[n]=u,o[i++]=n)}return o}function nn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function rn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function on(e){return Yt(e)?function(e){for(var t=He.lastIndex=0;He.test(e);)++t;return t}(e):It(e)}function an(e){return Yt(e)?function(e){return e.match(He)||[]}(e):function(e){return e.split("")}(e)}function un(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var sn=Zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),cn=function e(t){var n,r=(t=null==t?ot:cn.defaults(ot.Object(),t,cn.pick(ot,Ke))).Array,ie=t.Date,be=t.Error,xe=t.Function,Se=t.Math,Ee=t.Object,Te=t.RegExp,Oe=t.String,Ae=t.TypeError,ke=r.prototype,je=xe.prototype,Ie=Ee.prototype,Ce=t["__core-js_shared__"],Pe=je.toString,Ne=Ie.hasOwnProperty,Re=0,Le=(n=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",De=Ie.toString,Me=Pe.call(Ee),Ze=ot._,Ue=Te("^"+Pe.call(Ne).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=st?t.Buffer:i,Be=t.Symbol,Fe=t.Uint8Array,We=qe?qe.allocUnsafe:i,He=en(Ee.getPrototypeOf,Ee),Ge=Ee.create,et=Ie.propertyIsEnumerable,rt=ke.splice,it=Be?Be.isConcatSpreadable:i,at=Be?Be.iterator:i,ut=Be?Be.toStringTag:i,ct=function(){try{var e=co(Ee,"defineProperty");return e({},"",{}),e}catch(e){}}(),ft=t.clearTimeout!==ot.clearTimeout&&t.clearTimeout,It=ie&&ie.now!==ot.Date.now&&ie.now,Zt=t.setTimeout!==ot.setTimeout&&t.setTimeout,fn=Se.ceil,ln=Se.floor,pn=Ee.getOwnPropertySymbols,dn=qe?qe.isBuffer:i,hn=t.isFinite,yn=ke.join,vn=en(Ee.keys,Ee),mn=Se.max,gn=Se.min,_n=ie.now,wn=t.parseInt,bn=Se.random,xn=ke.reverse,Sn=co(t,"DataView"),En=co(t,"Map"),Tn=co(t,"Promise"),On=co(t,"Set"),An=co(t,"WeakMap"),kn=co(Ee,"create"),jn=An&&new An,In={},Cn=Uo(Sn),Pn=Uo(En),Nn=Uo(Tn),Rn=Uo(On),Ln=Uo(An),Dn=Be?Be.prototype:i,Mn=Dn?Dn.valueOf:i,Zn=Dn?Dn.toString:i;function Un(e){if(nu(e)&&!Va(e)&&!(e instanceof Wn)){if(e instanceof Fn)return e;if(Ne.call(e,"__wrapped__"))return qo(e)}return new Fn(e)}var qn=function(){function e(){}return function(t){if(!tu(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Bn(){}function Fn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Wn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $n(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Hn;++t<n;)this.add(e[t])}function Gn(e){var t=this.__data__=new Vn(e);this.size=t.size}function Jn(e,t){var n=Va(e),r=!n&&za(e),i=!n&&!r&&Ja(e),o=!n&&!r&&!i&&fu(e),a=n||r||i||o,u=a?Bt(e.length,Oe):[],s=u.length;for(var c in e)!t&&!Ne.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||mo(c,s))||u.push(c);return u}function Kn(e){var t=e.length;return t?e[Hr(0,t-1)]:i}function Xn(e,t){return Ro(Ai(e),ar(t,0,e.length))}function Yn(e){return Ro(Ai(e))}function Qn(e,t,n){(n!==i&&!Ba(e[t],n)||n===i&&!(t in e))&&ir(e,t,n)}function er(e,t,n){var r=e[t];Ne.call(e,t)&&Ba(r,n)&&(n!==i||t in e)||ir(e,t,n)}function tr(e,t){for(var n=e.length;n--;)if(Ba(e[n][0],t))return n;return-1}function nr(e,t,n,r){return lr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function rr(e,t){return e&&ki(t,Pu(t),e)}function ir(e,t,n){"__proto__"==t&&ct?ct(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function or(e,t){for(var n=-1,o=t.length,a=r(o),u=null==e;++n<o;)a[n]=u?i:Au(e,t[n]);return a}function ar(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function ur(e,t,n,r,o,a){var u,s=1&t,c=2&t,f=4&t;if(n&&(u=o?n(e,r,o,a):n(e)),u!==i)return u;if(!tu(e))return e;var l=Va(e);if(l){if(u=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ne.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return Ai(e,u)}else{var p=po(e),d=p==w||p==b;if(Ja(e))return bi(e,s);if(p==E||p==y||d&&!o){if(u=c||d?{}:yo(e),!s)return c?function(e,t){return ki(e,lo(e),t)}(e,function(e,t){return e&&ki(t,Nu(t),e)}(u,e)):function(e,t){return ki(e,fo(e),t)}(e,rr(u,e))}else{if(!Qe[p])return o?e:{};u=function(e,t,n){var r,i=e.constructor;switch(t){case C:return xi(e);case m:case g:return new i(+e);case P:return function(e,t){var n=t?xi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case R:case L:case D:case M:case Z:case U:case q:case B:return Si(e,n);case x:return new i;case S:case k:return new i(e);case O:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case A:return new i;case j:return r=e,Mn?Ee(Mn.call(r)):{}}}(e,p,s)}}a||(a=new Gn);var h=a.get(e);if(h)return h;a.set(e,u),uu(e)?e.forEach((function(r){u.add(ur(r,t,n,r,e,a))})):ru(e)&&e.forEach((function(r,i){u.set(i,ur(r,t,n,i,e,a))}));var v=l?i:(f?c?no:to:c?Nu:Pu)(e);return _t(v||e,(function(r,i){v&&(r=e[i=r]),er(u,i,ur(r,t,n,i,e,a))})),u}function sr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ee(e);r--;){var o=n[r],a=t[o],u=e[o];if(u===i&&!(o in e)||!a(u))return!1}return!0}function cr(e,t,n){if("function"!=typeof e)throw new Ae(o);return Io((function(){e.apply(i,n)}),t)}function fr(e,t,n,r){var i=-1,o=St,a=!0,u=e.length,s=[],c=t.length;if(!u)return s;n&&(t=Tt(t,Wt(n))),r?(o=Et,a=!1):t.length>=200&&(o=Vt,a=!1,t=new $n(t));e:for(;++i<u;){var f=e[i],l=null==n?f:n(f);if(f=r||0!==f?f:0,a&&l==l){for(var p=c;p--;)if(t[p]===l)continue e;s.push(f)}else o(t,l,r)||s.push(f)}return s}Un.templateSettings={escape:J,evaluate:K,interpolate:X,variable:"",imports:{_:Un}},Un.prototype=Bn.prototype,Un.prototype.constructor=Un,Fn.prototype=qn(Bn.prototype),Fn.prototype.constructor=Fn,Wn.prototype=qn(Bn.prototype),Wn.prototype.constructor=Wn,zn.prototype.clear=function(){this.__data__=kn?kn(null):{},this.size=0},zn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},zn.prototype.get=function(e){var t=this.__data__;if(kn){var n=t[e];return n===a?i:n}return Ne.call(t,e)?t[e]:i},zn.prototype.has=function(e){var t=this.__data__;return kn?t[e]!==i:Ne.call(t,e)},zn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=kn&&t===i?a:t,this},Vn.prototype.clear=function(){this.__data__=[],this.size=0},Vn.prototype.delete=function(e){var t=this.__data__,n=tr(t,e);return!(n<0||(n==t.length-1?t.pop():rt.call(t,n,1),--this.size,0))},Vn.prototype.get=function(e){var t=this.__data__,n=tr(t,e);return n<0?i:t[n][1]},Vn.prototype.has=function(e){return tr(this.__data__,e)>-1},Vn.prototype.set=function(e,t){var n=this.__data__,r=tr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Hn.prototype.clear=function(){this.size=0,this.__data__={hash:new zn,map:new(En||Vn),string:new zn}},Hn.prototype.delete=function(e){var t=uo(this,e).delete(e);return this.size-=t?1:0,t},Hn.prototype.get=function(e){return uo(this,e).get(e)},Hn.prototype.has=function(e){return uo(this,e).has(e)},Hn.prototype.set=function(e,t){var n=uo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},$n.prototype.add=$n.prototype.push=function(e){return this.__data__.set(e,a),this},$n.prototype.has=function(e){return this.__data__.has(e)},Gn.prototype.clear=function(){this.__data__=new Vn,this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Gn.prototype.get=function(e){return this.__data__.get(e)},Gn.prototype.has=function(e){return this.__data__.has(e)},Gn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Vn){var r=n.__data__;if(!En||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Hn(r)}return n.set(e,t),this.size=n.size,this};var lr=Ci(_r),pr=Ci(wr,!0);function dr(e,t){var n=!0;return lr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function hr(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],u=t(a);if(null!=u&&(s===i?u==u&&!cu(u):n(u,s)))var s=u,c=a}return c}function yr(e,t){var n=[];return lr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function vr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=vo),i||(i=[]);++o<a;){var u=e[o];t>0&&n(u)?t>1?vr(u,t-1,n,r,i):Ot(i,u):r||(i[i.length]=u)}return i}var mr=Pi(),gr=Pi(!0);function _r(e,t){return e&&mr(e,t,Pu)}function wr(e,t){return e&&gr(e,t,Pu)}function br(e,t){return xt(t,(function(t){return Ya(e[t])}))}function xr(e,t){for(var n=0,r=(t=mi(t,e)).length;null!=e&&n<r;)e=e[Zo(t[n++])];return n&&n==r?e:i}function Sr(e,t,n){var r=t(e);return Va(e)?r:Ot(r,n(e))}function Er(e){return null==e?e===i?"[object Undefined]":"[object Null]":ut&&ut in Ee(e)?function(e){var t=Ne.call(e,ut),n=e[ut];try{e[ut]=i;var r=!0}catch(e){}var o=De.call(e);return r&&(t?e[ut]=n:delete e[ut]),o}(e):function(e){return De.call(e)}(e)}function Tr(e,t){return e>t}function Or(e,t){return null!=e&&Ne.call(e,t)}function Ar(e,t){return null!=e&&t in Ee(e)}function kr(e,t,n){for(var o=n?Et:St,a=e[0].length,u=e.length,s=u,c=r(u),f=1/0,l=[];s--;){var p=e[s];s&&t&&(p=Tt(p,Wt(t))),f=gn(p.length,f),c[s]=!n&&(t||a>=120&&p.length>=120)?new $n(s&&p):i}p=e[0];var d=-1,h=c[0];e:for(;++d<a&&l.length<f;){var y=p[d],v=t?t(y):y;if(y=n||0!==y?y:0,!(h?Vt(h,v):o(l,v,n))){for(s=u;--s;){var m=c[s];if(!(m?Vt(m,v):o(e[s],v,n)))continue e}h&&h.push(v),l.push(y)}}return l}function jr(e,t,n){var r=null==(e=Oo(e,t=mi(t,e)))?e:e[Zo(Xo(t))];return null==r?i:mt(r,e,n)}function Ir(e){return nu(e)&&Er(e)==y}function Cr(e,t,n,r,o){return e===t||(null==e||null==t||!nu(e)&&!nu(t)?e!=e&&t!=t:function(e,t,n,r,o,a){var u=Va(e),s=Va(t),c=u?v:po(e),f=s?v:po(t),l=(c=c==y?E:c)==E,p=(f=f==y?E:f)==E,d=c==f;if(d&&Ja(e)){if(!Ja(t))return!1;u=!0,l=!1}if(d&&!l)return a||(a=new Gn),u||fu(e)?Qi(e,t,n,r,o,a):function(e,t,n,r,i,o,a){switch(n){case P:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case C:return!(e.byteLength!=t.byteLength||!o(new Fe(e),new Fe(t)));case m:case g:case S:return Ba(+e,+t);case _:return e.name==t.name&&e.message==t.message;case O:case k:return e==t+"";case x:var u=Qt;case A:var s=1&r;if(u||(u=nn),e.size!=t.size&&!s)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var f=Qi(u(e),u(t),r,i,o,a);return a.delete(e),f;case j:if(Mn)return Mn.call(e)==Mn.call(t)}return!1}(e,t,c,n,r,o,a);if(!(1&n)){var h=l&&Ne.call(e,"__wrapped__"),w=p&&Ne.call(t,"__wrapped__");if(h||w){var b=h?e.value():e,T=w?t.value():t;return a||(a=new Gn),o(b,T,n,r,a)}}return!!d&&(a||(a=new Gn),function(e,t,n,r,o,a){var u=1&n,s=to(e),c=s.length;if(c!=to(t).length&&!u)return!1;for(var f=c;f--;){var l=s[f];if(!(u?l in t:Ne.call(t,l)))return!1}var p=a.get(e),d=a.get(t);if(p&&d)return p==t&&d==e;var h=!0;a.set(e,t),a.set(t,e);for(var y=u;++f<c;){var v=e[l=s[f]],m=t[l];if(r)var g=u?r(m,v,l,t,e,a):r(v,m,l,e,t,a);if(!(g===i?v===m||o(v,m,n,r,a):g)){h=!1;break}y||(y="constructor"==l)}if(h&&!y){var _=e.constructor,w=t.constructor;_==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(h=!1)}return a.delete(e),a.delete(t),h}(e,t,n,r,o,a))}(e,t,n,r,Cr,o))}function Pr(e,t,n,r){var o=n.length,a=o,u=!r;if(null==e)return!a;for(e=Ee(e);o--;){var s=n[o];if(u&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<a;){var c=(s=n[o])[0],f=e[c],l=s[1];if(u&&s[2]){if(f===i&&!(c in e))return!1}else{var p=new Gn;if(r)var d=r(f,l,c,e,t,p);if(!(d===i?Cr(l,f,3,r,p):d))return!1}}return!0}function Nr(e){return!(!tu(e)||(t=e,Le&&Le in t))&&(Ya(e)?Ue:ye).test(Uo(e));var t}function Rr(e){return"function"==typeof e?e:null==e?is:"object"==typeof e?Va(e)?Ur(e[0],e[1]):Zr(e):ds(e)}function Lr(e){if(!xo(e))return vn(e);var t=[];for(var n in Ee(e))Ne.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Dr(e,t){return e<t}function Mr(e,t){var n=-1,i=$a(e)?r(e.length):[];return lr(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function Zr(e){var t=so(e);return 1==t.length&&t[0][2]?Eo(t[0][0],t[0][1]):function(n){return n===e||Pr(n,e,t)}}function Ur(e,t){return _o(e)&&So(t)?Eo(Zo(e),t):function(n){var r=Au(n,e);return r===i&&r===t?ku(n,e):Cr(t,r,3)}}function qr(e,t,n,r,o){e!==t&&mr(t,(function(a,u){if(o||(o=new Gn),tu(a))!function(e,t,n,r,o,a,u){var s=ko(e,n),c=ko(t,n),f=u.get(c);if(f)Qn(e,n,f);else{var l=a?a(s,c,n+"",e,t,u):i,p=l===i;if(p){var d=Va(c),h=!d&&Ja(c),y=!d&&!h&&fu(c);l=c,d||h||y?Va(s)?l=s:Ga(s)?l=Ai(s):h?(p=!1,l=bi(c,!0)):y?(p=!1,l=Si(c,!0)):l=[]:ou(c)||za(c)?(l=s,za(s)?l=gu(s):tu(s)&&!Ya(s)||(l=yo(c))):p=!1}p&&(u.set(c,l),o(l,c,r,a,u),u.delete(c)),Qn(e,n,l)}}(e,t,u,n,qr,r,o);else{var s=r?r(ko(e,u),a,u+"",e,t,o):i;s===i&&(s=a),Qn(e,u,s)}}),Nu)}function Br(e,t){var n=e.length;if(n)return mo(t+=t<0?n:0,n)?e[t]:i}function Fr(e,t,n){t=t.length?Tt(t,(function(e){return Va(e)?function(t){return xr(t,1===e.length?e[0]:e)}:e})):[is];var r=-1;t=Tt(t,Wt(ao()));var i=Mr(e,(function(e,n,i){var o=Tt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var r=e.length;for(e.sort((function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,u=n.length;++r<a;){var s=Ei(i[r],o[r]);if(s)return r>=u?s:s*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}));r--;)e[r]=e[r].value;return e}(i)}function Wr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],u=xr(e,a);n(u,a)&&Xr(o,mi(a,e),u)}return o}function zr(e,t,n,r){var i=r?Rt:Nt,o=-1,a=t.length,u=e;for(e===t&&(t=Ai(t)),n&&(u=Tt(e,Wt(n)));++o<a;)for(var s=0,c=t[o],f=n?n(c):c;(s=i(u,f,s,r))>-1;)u!==e&&rt.call(u,s,1),rt.call(e,s,1);return e}function Vr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;mo(i)?rt.call(e,i,1):ci(e,i)}}return e}function Hr(e,t){return e+ln(bn()*(t-e+1))}function $r(e,t){var n="";if(!e||t<1||t>l)return n;do{t%2&&(n+=e),(t=ln(t/2))&&(e+=e)}while(t);return n}function Gr(e,t){return Co(To(e,t,is),e+"")}function Jr(e){return Kn(Bu(e))}function Kr(e,t){var n=Bu(e);return Ro(n,ar(t,0,n.length))}function Xr(e,t,n,r){if(!tu(e))return e;for(var o=-1,a=(t=mi(t,e)).length,u=a-1,s=e;null!=s&&++o<a;){var c=Zo(t[o]),f=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=u){var l=s[c];(f=r?r(l,c,s):i)===i&&(f=tu(l)?l:mo(t[o+1])?[]:{})}er(s,c,f),s=s[c]}return e}var Yr=jn?function(e,t){return jn.set(e,t),e}:is,Qr=ct?function(e,t){return ct(e,"toString",{configurable:!0,enumerable:!1,value:ts(t),writable:!0})}:is;function ei(e){return Ro(Bu(e))}function ti(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function ni(e,t){var n;return lr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ri(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!cu(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ii(e,t,is,n)}function ii(e,t,n,r){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var u=(t=n(t))!=t,s=null===t,c=cu(t),f=t===i;o<a;){var l=ln((o+a)/2),p=n(e[l]),d=p!==i,h=null===p,y=p==p,v=cu(p);if(u)var m=r||y;else m=f?y&&(r||d):s?y&&d&&(r||!h):c?y&&d&&!h&&(r||!v):!h&&!v&&(r?p<=t:p<t);m?o=l+1:a=l}return gn(a,4294967294)}function oi(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],u=t?t(a):a;if(!n||!Ba(u,s)){var s=u;o[i++]=0===a?0:a}}return o}function ai(e){return"number"==typeof e?e:cu(e)?p:+e}function ui(e){if("string"==typeof e)return e;if(Va(e))return Tt(e,ui)+"";if(cu(e))return Zn?Zn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function si(e,t,n){var r=-1,i=St,o=e.length,a=!0,u=[],s=u;if(n)a=!1,i=Et;else if(o>=200){var c=t?null:$i(e);if(c)return nn(c);a=!1,i=Vt,s=new $n}else s=t?[]:u;e:for(;++r<o;){var f=e[r],l=t?t(f):f;if(f=n||0!==f?f:0,a&&l==l){for(var p=s.length;p--;)if(s[p]===l)continue e;t&&s.push(l),u.push(f)}else i(s,l,n)||(s!==u&&s.push(l),u.push(f))}return u}function ci(e,t){return null==(e=Oo(e,t=mi(t,e)))||delete e[Zo(Xo(t))]}function fi(e,t,n,r){return Xr(e,t,n(xr(e,t)),r)}function li(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ti(e,r?0:o,r?o+1:i):ti(e,r?o+1:0,r?i:o)}function pi(e,t){var n=e;return n instanceof Wn&&(n=n.value()),At(t,(function(e,t){return t.func.apply(t.thisArg,Ot([e],t.args))}),n)}function di(e,t,n){var i=e.length;if(i<2)return i?si(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var u=e[o],s=-1;++s<i;)s!=o&&(a[o]=fr(a[o]||u,e[s],t,n));return si(vr(a,1),t,n)}function hi(e,t,n){for(var r=-1,o=e.length,a=t.length,u={};++r<o;){var s=r<a?t[r]:i;n(u,e[r],s)}return u}function yi(e){return Ga(e)?e:[]}function vi(e){return"function"==typeof e?e:is}function mi(e,t){return Va(e)?e:_o(e,t)?[e]:Mo(_u(e))}var gi=Gr;function _i(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ti(e,t,n)}var wi=ft||function(e){return ot.clearTimeout(e)};function bi(e,t){if(t)return e.slice();var n=e.length,r=We?We(n):new e.constructor(n);return e.copy(r),r}function xi(e){var t=new e.constructor(e.byteLength);return new Fe(t).set(new Fe(e)),t}function Si(e,t){var n=t?xi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ei(e,t){if(e!==t){var n=e!==i,r=null===e,o=e==e,a=cu(e),u=t!==i,s=null===t,c=t==t,f=cu(t);if(!s&&!f&&!a&&e>t||a&&u&&c&&!s&&!f||r&&u&&c||!n&&c||!o)return 1;if(!r&&!a&&!f&&e<t||f&&n&&o&&!r&&!a||s&&n&&o||!u&&o||!c)return-1}return 0}function Ti(e,t,n,i){for(var o=-1,a=e.length,u=n.length,s=-1,c=t.length,f=mn(a-u,0),l=r(c+f),p=!i;++s<c;)l[s]=t[s];for(;++o<u;)(p||o<a)&&(l[n[o]]=e[o]);for(;f--;)l[s++]=e[o++];return l}function Oi(e,t,n,i){for(var o=-1,a=e.length,u=-1,s=n.length,c=-1,f=t.length,l=mn(a-s,0),p=r(l+f),d=!i;++o<l;)p[o]=e[o];for(var h=o;++c<f;)p[h+c]=t[c];for(;++u<s;)(d||o<a)&&(p[h+n[u]]=e[o++]);return p}function Ai(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function ki(e,t,n,r){var o=!n;n||(n={});for(var a=-1,u=t.length;++a<u;){var s=t[a],c=r?r(n[s],e[s],s,n,e):i;c===i&&(c=e[s]),o?ir(n,s,c):er(n,s,c)}return n}function ji(e,t){return function(n,r){var i=Va(n)?gt:nr,o=t?t():{};return i(n,e,ao(r,2),o)}}function Ii(e){return Gr((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,u=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,u&&go(n[0],n[1],u)&&(a=o<3?i:a,o=1),t=Ee(t);++r<o;){var s=n[r];s&&e(t,s,r,a)}return t}))}function Ci(e,t){return function(n,r){if(null==n)return n;if(!$a(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Ee(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Pi(e){return function(t,n,r){for(var i=-1,o=Ee(t),a=r(t),u=a.length;u--;){var s=a[e?u:++i];if(!1===n(o[s],s,o))break}return t}}function Ni(e){return function(t){var n=Yt(t=_u(t))?an(t):i,r=n?n[0]:t.charAt(0),o=n?_i(n,1).join(""):t.slice(1);return r[e]()+o}}function Ri(e){return function(t){return At(Yu(zu(t).replace(ze,"")),e,"")}}function Li(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=qn(e.prototype),r=e.apply(n,t);return tu(r)?r:n}}function Di(e){return function(t,n,r){var o=Ee(t);if(!$a(t)){var a=ao(n,3);t=Pu(t),n=function(e){return a(o[e],e,o)}}var u=e(t,n,r);return u>-1?o[a?t[u]:u]:i}}function Mi(e){return eo((function(t){var n=t.length,r=n,a=Fn.prototype.thru;for(e&&t.reverse();r--;){var u=t[r];if("function"!=typeof u)throw new Ae(o);if(a&&!s&&"wrapper"==io(u))var s=new Fn([],!0)}for(r=s?r:n;++r<n;){var c=io(u=t[r]),f="wrapper"==c?ro(u):i;s=f&&wo(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?s[io(f[0])].apply(s,f[3]):1==u.length&&wo(u)?s[c]():s.thru(u)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&Va(r))return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Zi(e,t,n,o,a,u,s,f,l,p){var d=t&c,h=1&t,y=2&t,v=24&t,m=512&t,g=y?i:Li(e);return function i(){for(var c=arguments.length,_=r(c),w=c;w--;)_[w]=arguments[w];if(v)var b=oo(i),x=Gt(_,b);if(o&&(_=Ti(_,o,a,v)),u&&(_=Oi(_,u,s,v)),c-=x,v&&c<p){var S=tn(_,b);return Vi(e,t,Zi,i.placeholder,n,_,S,f,l,p-c)}var E=h?n:this,T=y?E[e]:e;return c=_.length,f?_=Ao(_,f):m&&c>1&&_.reverse(),d&&l<c&&(_.length=l),this&&this!==ot&&this instanceof i&&(T=g||Li(T)),T.apply(E,_)}}function Ui(e,t){return function(n,r){return function(e,t,n,r){return _r(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function qi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ui(n),r=ui(r)):(n=ai(n),r=ai(r)),o=e(n,r)}return o}}function Bi(e){return eo((function(t){return t=Tt(t,Wt(ao())),Gr((function(n){var r=this;return e(t,(function(e){return mt(e,r,n)}))}))}))}function Fi(e,t){var n=(t=t===i?" ":ui(t)).length;if(n<2)return n?$r(t,e):t;var r=$r(t,fn(e/on(t)));return Yt(t)?_i(an(r),0,e).join(""):r.slice(0,e)}function Wi(e){return function(t,n,o){return o&&"number"!=typeof o&&go(t,n,o)&&(n=o=i),t=hu(t),n===i?(n=t,t=0):n=hu(n),function(e,t,n,i){for(var o=-1,a=mn(fn((t-e)/(n||1)),0),u=r(a);a--;)u[i?a:++o]=e,e+=n;return u}(t,n,o=o===i?t<n?1:-1:hu(o),e)}}function zi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=mu(t),n=mu(n)),e(t,n)}}function Vi(e,t,n,r,o,a,u,c,f,l){var p=8&t;t|=p?s:64,4&(t&=~(p?64:s))||(t&=-4);var d=[e,t,o,p?a:i,p?u:i,p?i:a,p?i:u,c,f,l],h=n.apply(i,d);return wo(e)&&jo(h,d),h.placeholder=r,Po(h,e,t)}function Hi(e){var t=Se[e];return function(e,n){if(e=mu(e),(n=null==n?0:gn(yu(n),292))&&hn(e)){var r=(_u(e)+"e").split("e");return+((r=(_u(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var $i=On&&1/nn(new On([,-0]))[1]==f?function(e){return new On(e)}:cs;function Gi(e){return function(t){var n=po(t);return n==x?Qt(t):n==A?rn(t):function(e,t){return Tt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ji(e,t,n,a,f,l,p,d){var h=2&t;if(!h&&"function"!=typeof e)throw new Ae(o);var y=a?a.length:0;if(y||(t&=-97,a=f=i),p=p===i?p:mn(yu(p),0),d=d===i?d:yu(d),y-=f?f.length:0,64&t){var v=a,m=f;a=f=i}var g=h?i:ro(e),_=[e,t,n,a,f,v,m,l,p,d];if(g&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==c&&8==n||r==c&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var f=e[3];e[3]=f?Ti(f,s,t[4]):s,e[4]=f?tn(e[3],u):t[4]}(s=t[5])&&(f=e[5],e[5]=f?Oi(f,s,t[6]):s,e[6]=f?tn(e[5],u):t[6]),(s=t[7])&&(e[7]=s),r&c&&(e[8]=null==e[8]?t[8]:gn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(_,g),e=_[0],t=_[1],n=_[2],a=_[3],f=_[4],!(d=_[9]=_[9]===i?h?0:e.length:mn(_[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)w=8==t||16==t?function(e,t,n){var o=Li(e);return function a(){for(var u=arguments.length,s=r(u),c=u,f=oo(a);c--;)s[c]=arguments[c];var l=u<3&&s[0]!==f&&s[u-1]!==f?[]:tn(s,f);return(u-=l.length)<n?Vi(e,t,Zi,a.placeholder,i,s,l,i,i,n-u):mt(this&&this!==ot&&this instanceof a?o:e,this,s)}}(e,t,d):t!=s&&33!=t||f.length?Zi.apply(i,_):function(e,t,n,i){var o=1&t,a=Li(e);return function t(){for(var u=-1,s=arguments.length,c=-1,f=i.length,l=r(f+s),p=this&&this!==ot&&this instanceof t?a:e;++c<f;)l[c]=i[c];for(;s--;)l[c++]=arguments[++u];return mt(p,o?n:this,l)}}(e,t,n,a);else var w=function(e,t,n){var r=1&t,i=Li(e);return function t(){return(this&&this!==ot&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return Po((g?Yr:jo)(w,_),e,t)}function Ki(e,t,n,r){return e===i||Ba(e,Ie[n])&&!Ne.call(r,n)?t:e}function Xi(e,t,n,r,o,a){return tu(e)&&tu(t)&&(a.set(t,e),qr(e,t,i,Xi,a),a.delete(t)),e}function Yi(e){return ou(e)?i:e}function Qi(e,t,n,r,o,a){var u=1&n,s=e.length,c=t.length;if(s!=c&&!(u&&c>s))return!1;var f=a.get(e),l=a.get(t);if(f&&l)return f==t&&l==e;var p=-1,d=!0,h=2&n?new $n:i;for(a.set(e,t),a.set(t,e);++p<s;){var y=e[p],v=t[p];if(r)var m=u?r(v,y,p,t,e,a):r(y,v,p,e,t,a);if(m!==i){if(m)continue;d=!1;break}if(h){if(!jt(t,(function(e,t){if(!Vt(h,t)&&(y===e||o(y,e,n,r,a)))return h.push(t)}))){d=!1;break}}else if(y!==v&&!o(y,v,n,r,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function eo(e){return Co(To(e,i,Ho),e+"")}function to(e){return Sr(e,Pu,fo)}function no(e){return Sr(e,Nu,lo)}var ro=jn?function(e){return jn.get(e)}:cs;function io(e){for(var t=e.name+"",n=In[t],r=Ne.call(In,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function oo(e){return(Ne.call(Un,"placeholder")?Un:e).placeholder}function ao(){var e=Un.iteratee||os;return e=e===os?Rr:e,arguments.length?e(arguments[0],arguments[1]):e}function uo(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function so(e){for(var t=Pu(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,So(i)]}return t}function co(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Nr(n)?n:i}var fo=pn?function(e){return null==e?[]:(e=Ee(e),xt(pn(e),(function(t){return et.call(e,t)})))}:vs,lo=pn?function(e){for(var t=[];e;)Ot(t,fo(e)),e=He(e);return t}:vs,po=Er;function ho(e,t,n){for(var r=-1,i=(t=mi(t,e)).length,o=!1;++r<i;){var a=Zo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&eu(i)&&mo(a,i)&&(Va(e)||za(e))}function yo(e){return"function"!=typeof e.constructor||xo(e)?{}:qn(He(e))}function vo(e){return Va(e)||za(e)||!!(it&&e&&e[it])}function mo(e,t){var n=typeof e;return!!(t=null==t?l:t)&&("number"==n||"symbol"!=n&&me.test(e))&&e>-1&&e%1==0&&e<t}function go(e,t,n){if(!tu(n))return!1;var r=typeof t;return!!("number"==r?$a(n)&&mo(t,n.length):"string"==r&&t in n)&&Ba(n[t],e)}function _o(e,t){if(Va(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!cu(e))||Q.test(e)||!Y.test(e)||null!=t&&e in Ee(t)}function wo(e){var t=io(e),n=Un[t];if("function"!=typeof n||!(t in Wn.prototype))return!1;if(e===n)return!0;var r=ro(n);return!!r&&e===r[0]}(Sn&&po(new Sn(new ArrayBuffer(1)))!=P||En&&po(new En)!=x||Tn&&po(Tn.resolve())!=T||On&&po(new On)!=A||An&&po(new An)!=I)&&(po=function(e){var t=Er(e),n=t==E?e.constructor:i,r=n?Uo(n):"";if(r)switch(r){case Cn:return P;case Pn:return x;case Nn:return T;case Rn:return A;case Ln:return I}return t});var bo=Ce?Ya:ms;function xo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ie)}function So(e){return e==e&&!tu(e)}function Eo(e,t){return function(n){return null!=n&&n[e]===t&&(t!==i||e in Ee(n))}}function To(e,t,n){return t=mn(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=mn(i.length-t,0),u=r(a);++o<a;)u[o]=i[t+o];o=-1;for(var s=r(t+1);++o<t;)s[o]=i[o];return s[t]=n(u),mt(e,this,s)}}function Oo(e,t){return t.length<2?e:xr(e,ti(t,0,-1))}function Ao(e,t){for(var n=e.length,r=gn(t.length,n),o=Ai(e);r--;){var a=t[r];e[r]=mo(a,n)?o[a]:i}return e}function ko(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var jo=No(Yr),Io=Zt||function(e,t){return ot.setTimeout(e,t)},Co=No(Qr);function Po(e,t,n){var r=t+"";return Co(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return _t(h,(function(n){var r="_."+n[0];t&n[1]&&!St(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ae);return t?t[1].split(ue):[]}(r),n)))}function No(e){var t=0,n=0;return function(){var r=_n(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Ro(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var a=Hr(n,o),u=e[a];e[a]=e[n],e[n]=u}return e.length=t,e}var Lo,Do,Mo=(Lo=La((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)})),t}),(function(e){return 500===Do.size&&Do.clear(),e})),Do=Lo.cache,Lo);function Zo(e){if("string"==typeof e||cu(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Uo(e){if(null!=e){try{return Pe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function qo(e){if(e instanceof Wn)return e.clone();var t=new Fn(e.__wrapped__,e.__chain__);return t.__actions__=Ai(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Bo=Gr((function(e,t){return Ga(e)?fr(e,vr(t,1,Ga,!0)):[]})),Fo=Gr((function(e,t){var n=Xo(t);return Ga(n)&&(n=i),Ga(e)?fr(e,vr(t,1,Ga,!0),ao(n,2)):[]})),Wo=Gr((function(e,t){var n=Xo(t);return Ga(n)&&(n=i),Ga(e)?fr(e,vr(t,1,Ga,!0),i,n):[]}));function zo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:yu(n);return i<0&&(i=mn(r+i,0)),Pt(e,ao(t,3),i)}function Vo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=yu(n),o=n<0?mn(r+o,0):gn(o,r-1)),Pt(e,ao(t,3),o,!0)}function Ho(e){return null!=e&&e.length?vr(e,1):[]}function $o(e){return e&&e.length?e[0]:i}var Go=Gr((function(e){var t=Tt(e,yi);return t.length&&t[0]===e[0]?kr(t):[]})),Jo=Gr((function(e){var t=Xo(e),n=Tt(e,yi);return t===Xo(n)?t=i:n.pop(),n.length&&n[0]===e[0]?kr(n,ao(t,2)):[]})),Ko=Gr((function(e){var t=Xo(e),n=Tt(e,yi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?kr(n,i,t):[]}));function Xo(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Yo=Gr(Qo);function Qo(e,t){return e&&e.length&&t&&t.length?zr(e,t):e}var ea=eo((function(e,t){var n=null==e?0:e.length,r=or(e,t);return Vr(e,Tt(t,(function(e){return mo(e,n)?+e:e})).sort(Ei)),r}));function ta(e){return null==e?e:xn.call(e)}var na=Gr((function(e){return si(vr(e,1,Ga,!0))})),ra=Gr((function(e){var t=Xo(e);return Ga(t)&&(t=i),si(vr(e,1,Ga,!0),ao(t,2))})),ia=Gr((function(e){var t=Xo(e);return t="function"==typeof t?t:i,si(vr(e,1,Ga,!0),i,t)}));function oa(e){if(!e||!e.length)return[];var t=0;return e=xt(e,(function(e){if(Ga(e))return t=mn(e.length,t),!0})),Bt(t,(function(t){return Tt(e,Mt(t))}))}function aa(e,t){if(!e||!e.length)return[];var n=oa(e);return null==t?n:Tt(n,(function(e){return mt(t,i,e)}))}var ua=Gr((function(e,t){return Ga(e)?fr(e,t):[]})),sa=Gr((function(e){return di(xt(e,Ga))})),ca=Gr((function(e){var t=Xo(e);return Ga(t)&&(t=i),di(xt(e,Ga),ao(t,2))})),fa=Gr((function(e){var t=Xo(e);return t="function"==typeof t?t:i,di(xt(e,Ga),i,t)})),la=Gr(oa),pa=Gr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,aa(e,n)}));function da(e){var t=Un(e);return t.__chain__=!0,t}function ha(e,t){return t(e)}var ya=eo((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return or(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Wn&&mo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ha,args:[o],thisArg:i}),new Fn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)})),va=ji((function(e,t,n){Ne.call(e,n)?++e[n]:ir(e,n,1)})),ma=Di(zo),ga=Di(Vo);function _a(e,t){return(Va(e)?_t:lr)(e,ao(t,3))}function wa(e,t){return(Va(e)?wt:pr)(e,ao(t,3))}var ba=ji((function(e,t,n){Ne.call(e,n)?e[n].push(t):ir(e,n,[t])})),xa=Gr((function(e,t,n){var i=-1,o="function"==typeof t,a=$a(e)?r(e.length):[];return lr(e,(function(e){a[++i]=o?mt(t,e,n):jr(e,t,n)})),a})),Sa=ji((function(e,t,n){ir(e,n,t)}));function Ea(e,t){return(Va(e)?Tt:Mr)(e,ao(t,3))}var Ta=ji((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),Oa=Gr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&go(e,t[0],t[1])?t=[]:n>2&&go(t[0],t[1],t[2])&&(t=[t[0]]),Fr(e,vr(t,1),[])})),Aa=It||function(){return ot.Date.now()};function ka(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Ji(e,c,i,i,i,i,t)}function ja(e,t){var n;if("function"!=typeof t)throw new Ae(o);return e=yu(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Ia=Gr((function(e,t,n){var r=1;if(n.length){var i=tn(n,oo(Ia));r|=s}return Ji(e,r,t,n,i)})),Ca=Gr((function(e,t,n){var r=3;if(n.length){var i=tn(n,oo(Ca));r|=s}return Ji(t,r,e,n,i)}));function Pa(e,t,n){var r,a,u,s,c,f,l=0,p=!1,d=!1,h=!0;if("function"!=typeof e)throw new Ae(o);function y(t){var n=r,o=a;return r=a=i,l=t,s=e.apply(o,n)}function v(e){return l=e,c=Io(g,t),p?y(e):s}function m(e){var n=e-f;return f===i||n>=t||n<0||d&&e-l>=u}function g(){var e=Aa();if(m(e))return _(e);c=Io(g,function(e){var n=t-(e-f);return d?gn(n,u-(e-l)):n}(e))}function _(e){return c=i,h&&r?y(e):(r=a=i,s)}function w(){var e=Aa(),n=m(e);if(r=arguments,a=this,f=e,n){if(c===i)return v(f);if(d)return wi(c),c=Io(g,t),y(f)}return c===i&&(c=Io(g,t)),s}return t=mu(t)||0,tu(n)&&(p=!!n.leading,u=(d="maxWait"in n)?mn(mu(n.maxWait)||0,t):u,h="trailing"in n?!!n.trailing:h),w.cancel=function(){c!==i&&wi(c),l=0,r=f=a=c=i},w.flush=function(){return c===i?s:_(Aa())},w}var Na=Gr((function(e,t){return cr(e,1,t)})),Ra=Gr((function(e,t,n){return cr(e,mu(t)||0,n)}));function La(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ae(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(La.Cache||Hn),n}function Da(e){if("function"!=typeof e)throw new Ae(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}La.Cache=Hn;var Ma=gi((function(e,t){var n=(t=1==t.length&&Va(t[0])?Tt(t[0],Wt(ao())):Tt(vr(t,1),Wt(ao()))).length;return Gr((function(r){for(var i=-1,o=gn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return mt(e,this,r)}))})),Za=Gr((function(e,t){var n=tn(t,oo(Za));return Ji(e,s,i,t,n)})),Ua=Gr((function(e,t){var n=tn(t,oo(Ua));return Ji(e,64,i,t,n)})),qa=eo((function(e,t){return Ji(e,256,i,i,i,t)}));function Ba(e,t){return e===t||e!=e&&t!=t}var Fa=zi(Tr),Wa=zi((function(e,t){return e>=t})),za=Ir(function(){return arguments}())?Ir:function(e){return nu(e)&&Ne.call(e,"callee")&&!et.call(e,"callee")},Va=r.isArray,Ha=lt?Wt(lt):function(e){return nu(e)&&Er(e)==C};function $a(e){return null!=e&&eu(e.length)&&!Ya(e)}function Ga(e){return nu(e)&&$a(e)}var Ja=dn||ms,Ka=pt?Wt(pt):function(e){return nu(e)&&Er(e)==g};function Xa(e){if(!nu(e))return!1;var t=Er(e);return t==_||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ou(e)}function Ya(e){if(!tu(e))return!1;var t=Er(e);return t==w||t==b||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Qa(e){return"number"==typeof e&&e==yu(e)}function eu(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function tu(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function nu(e){return null!=e&&"object"==typeof e}var ru=dt?Wt(dt):function(e){return nu(e)&&po(e)==x};function iu(e){return"number"==typeof e||nu(e)&&Er(e)==S}function ou(e){if(!nu(e)||Er(e)!=E)return!1;var t=He(e);if(null===t)return!0;var n=Ne.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pe.call(n)==Me}var au=ht?Wt(ht):function(e){return nu(e)&&Er(e)==O},uu=yt?Wt(yt):function(e){return nu(e)&&po(e)==A};function su(e){return"string"==typeof e||!Va(e)&&nu(e)&&Er(e)==k}function cu(e){return"symbol"==typeof e||nu(e)&&Er(e)==j}var fu=vt?Wt(vt):function(e){return nu(e)&&eu(e.length)&&!!Ye[Er(e)]},lu=zi(Dr),pu=zi((function(e,t){return e<=t}));function du(e){if(!e)return[];if($a(e))return su(e)?an(e):Ai(e);if(at&&e[at])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[at]());var t=po(e);return(t==x?Qt:t==A?nn:Bu)(e)}function hu(e){return e?(e=mu(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function yu(e){var t=hu(e),n=t%1;return t==t?n?t-n:t:0}function vu(e){return e?ar(yu(e),0,d):0}function mu(e){if("number"==typeof e)return e;if(cu(e))return p;if(tu(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=tu(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Ft(e);var n=he.test(e);return n||ve.test(e)?nt(e.slice(2),n?2:8):de.test(e)?p:+e}function gu(e){return ki(e,Nu(e))}function _u(e){return null==e?"":ui(e)}var wu=Ii((function(e,t){if(xo(t)||$a(t))ki(t,Pu(t),e);else for(var n in t)Ne.call(t,n)&&er(e,n,t[n])})),bu=Ii((function(e,t){ki(t,Nu(t),e)})),xu=Ii((function(e,t,n,r){ki(t,Nu(t),e,r)})),Su=Ii((function(e,t,n,r){ki(t,Pu(t),e,r)})),Eu=eo(or),Tu=Gr((function(e,t){e=Ee(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&go(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],u=Nu(a),s=-1,c=u.length;++s<c;){var f=u[s],l=e[f];(l===i||Ba(l,Ie[f])&&!Ne.call(e,f))&&(e[f]=a[f])}return e})),Ou=Gr((function(e){return e.push(i,Xi),mt(Lu,i,e)}));function Au(e,t,n){var r=null==e?i:xr(e,t);return r===i?n:r}function ku(e,t){return null!=e&&ho(e,t,Ar)}var ju=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),e[t]=n}),ts(is)),Iu=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),Ne.call(e,t)?e[t].push(n):e[t]=[n]}),ao),Cu=Gr(jr);function Pu(e){return $a(e)?Jn(e):Lr(e)}function Nu(e){return $a(e)?Jn(e,!0):function(e){if(!tu(e))return function(e){var t=[];if(null!=e)for(var n in Ee(e))t.push(n);return t}(e);var t=xo(e),n=[];for(var r in e)("constructor"!=r||!t&&Ne.call(e,r))&&n.push(r);return n}(e)}var Ru=Ii((function(e,t,n){qr(e,t,n)})),Lu=Ii((function(e,t,n,r){qr(e,t,n,r)})),Du=eo((function(e,t){var n={};if(null==e)return n;var r=!1;t=Tt(t,(function(t){return t=mi(t,e),r||(r=t.length>1),t})),ki(e,no(e),n),r&&(n=ur(n,7,Yi));for(var i=t.length;i--;)ci(n,t[i]);return n})),Mu=eo((function(e,t){return null==e?{}:function(e,t){return Wr(e,t,(function(t,n){return ku(e,n)}))}(e,t)}));function Zu(e,t){if(null==e)return{};var n=Tt(no(e),(function(e){return[e]}));return t=ao(t),Wr(e,n,(function(e,n){return t(e,n[0])}))}var Uu=Gi(Pu),qu=Gi(Nu);function Bu(e){return null==e?[]:zt(e,Pu(e))}var Fu=Ri((function(e,t,n){return t=t.toLowerCase(),e+(n?Wu(t):t)}));function Wu(e){return Xu(_u(e).toLowerCase())}function zu(e){return(e=_u(e))&&e.replace(ge,Jt).replace(Ve,"")}var Vu=Ri((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Hu=Ri((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),$u=Ni("toLowerCase"),Gu=Ri((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Ju=Ri((function(e,t,n){return e+(n?" ":"")+Xu(t)})),Ku=Ri((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Xu=Ni("toUpperCase");function Yu(e,t,n){return e=_u(e),(t=n?i:t)===i?function(e){return Je.test(e)}(e)?function(e){return e.match($e)||[]}(e):function(e){return e.match(se)||[]}(e):e.match(t)||[]}var Qu=Gr((function(e,t){try{return mt(e,i,t)}catch(e){return Xa(e)?e:new be(e)}})),es=eo((function(e,t){return _t(t,(function(t){t=Zo(t),ir(e,t,Ia(e[t],e))})),e}));function ts(e){return function(){return e}}var ns=Mi(),rs=Mi(!0);function is(e){return e}function os(e){return Rr("function"==typeof e?e:ur(e,1))}var as=Gr((function(e,t){return function(n){return jr(n,e,t)}})),us=Gr((function(e,t){return function(n){return jr(e,n,t)}}));function ss(e,t,n){var r=Pu(t),i=br(t,r);null!=n||tu(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=br(t,Pu(t)));var o=!(tu(n)&&"chain"in n&&!n.chain),a=Ya(e);return _t(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Ai(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Ot([this.value()],arguments))})})),e}function cs(){}var fs=Bi(Tt),ls=Bi(bt),ps=Bi(jt);function ds(e){return _o(e)?Mt(Zo(e)):function(e){return function(t){return xr(t,e)}}(e)}var hs=Wi(),ys=Wi(!0);function vs(){return[]}function ms(){return!1}var gs,_s=qi((function(e,t){return e+t}),0),ws=Hi("ceil"),bs=qi((function(e,t){return e/t}),1),xs=Hi("floor"),Ss=qi((function(e,t){return e*t}),1),Es=Hi("round"),Ts=qi((function(e,t){return e-t}),0);return Un.after=function(e,t){if("function"!=typeof t)throw new Ae(o);return e=yu(e),function(){if(--e<1)return t.apply(this,arguments)}},Un.ary=ka,Un.assign=wu,Un.assignIn=bu,Un.assignInWith=xu,Un.assignWith=Su,Un.at=Eu,Un.before=ja,Un.bind=Ia,Un.bindAll=es,Un.bindKey=Ca,Un.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Va(e)?e:[e]},Un.chain=da,Un.chunk=function(e,t,n){t=(n?go(e,t,n):t===i)?1:mn(yu(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,u=0,s=r(fn(o/t));a<o;)s[u++]=ti(e,a,a+=t);return s},Un.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Un.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Ot(Va(n)?Ai(n):[n],vr(t,1))},Un.cond=function(e){var t=null==e?0:e.length,n=ao();return e=t?Tt(e,(function(e){if("function"!=typeof e[1])throw new Ae(o);return[n(e[0]),e[1]]})):[],Gr((function(n){for(var r=-1;++r<t;){var i=e[r];if(mt(i[0],this,n))return mt(i[1],this,n)}}))},Un.conforms=function(e){return function(e){var t=Pu(e);return function(n){return sr(n,e,t)}}(ur(e,1))},Un.constant=ts,Un.countBy=va,Un.create=function(e,t){var n=qn(e);return null==t?n:rr(n,t)},Un.curry=function e(t,n,r){var o=Ji(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Un.curryRight=function e(t,n,r){var o=Ji(t,16,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Un.debounce=Pa,Un.defaults=Tu,Un.defaultsDeep=Ou,Un.defer=Na,Un.delay=Ra,Un.difference=Bo,Un.differenceBy=Fo,Un.differenceWith=Wo,Un.drop=function(e,t,n){var r=null==e?0:e.length;return r?ti(e,(t=n||t===i?1:yu(t))<0?0:t,r):[]},Un.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ti(e,0,(t=r-(t=n||t===i?1:yu(t)))<0?0:t):[]},Un.dropRightWhile=function(e,t){return e&&e.length?li(e,ao(t,3),!0,!0):[]},Un.dropWhile=function(e,t){return e&&e.length?li(e,ao(t,3),!0):[]},Un.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&go(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=yu(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:yu(r))<0&&(r+=o),r=n>r?0:vu(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Un.filter=function(e,t){return(Va(e)?xt:yr)(e,ao(t,3))},Un.flatMap=function(e,t){return vr(Ea(e,t),1)},Un.flatMapDeep=function(e,t){return vr(Ea(e,t),f)},Un.flatMapDepth=function(e,t,n){return n=n===i?1:yu(n),vr(Ea(e,t),n)},Un.flatten=Ho,Un.flattenDeep=function(e){return null!=e&&e.length?vr(e,f):[]},Un.flattenDepth=function(e,t){return null!=e&&e.length?vr(e,t=t===i?1:yu(t)):[]},Un.flip=function(e){return Ji(e,512)},Un.flow=ns,Un.flowRight=rs,Un.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Un.functions=function(e){return null==e?[]:br(e,Pu(e))},Un.functionsIn=function(e){return null==e?[]:br(e,Nu(e))},Un.groupBy=ba,Un.initial=function(e){return null!=e&&e.length?ti(e,0,-1):[]},Un.intersection=Go,Un.intersectionBy=Jo,Un.intersectionWith=Ko,Un.invert=ju,Un.invertBy=Iu,Un.invokeMap=xa,Un.iteratee=os,Un.keyBy=Sa,Un.keys=Pu,Un.keysIn=Nu,Un.map=Ea,Un.mapKeys=function(e,t){var n={};return t=ao(t,3),_r(e,(function(e,r,i){ir(n,t(e,r,i),e)})),n},Un.mapValues=function(e,t){var n={};return t=ao(t,3),_r(e,(function(e,r,i){ir(n,r,t(e,r,i))})),n},Un.matches=function(e){return Zr(ur(e,1))},Un.matchesProperty=function(e,t){return Ur(e,ur(t,1))},Un.memoize=La,Un.merge=Ru,Un.mergeWith=Lu,Un.method=as,Un.methodOf=us,Un.mixin=ss,Un.negate=Da,Un.nthArg=function(e){return e=yu(e),Gr((function(t){return Br(t,e)}))},Un.omit=Du,Un.omitBy=function(e,t){return Zu(e,Da(ao(t)))},Un.once=function(e){return ja(2,e)},Un.orderBy=function(e,t,n,r){return null==e?[]:(Va(t)||(t=null==t?[]:[t]),Va(n=r?i:n)||(n=null==n?[]:[n]),Fr(e,t,n))},Un.over=fs,Un.overArgs=Ma,Un.overEvery=ls,Un.overSome=ps,Un.partial=Za,Un.partialRight=Ua,Un.partition=Ta,Un.pick=Mu,Un.pickBy=Zu,Un.property=ds,Un.propertyOf=function(e){return function(t){return null==e?i:xr(e,t)}},Un.pull=Yo,Un.pullAll=Qo,Un.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?zr(e,t,ao(n,2)):e},Un.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?zr(e,t,i,n):e},Un.pullAt=ea,Un.range=hs,Un.rangeRight=ys,Un.rearg=qa,Un.reject=function(e,t){return(Va(e)?xt:yr)(e,Da(ao(t,3)))},Un.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=ao(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Vr(e,i),n},Un.rest=function(e,t){if("function"!=typeof e)throw new Ae(o);return Gr(e,t=t===i?t:yu(t))},Un.reverse=ta,Un.sampleSize=function(e,t,n){return t=(n?go(e,t,n):t===i)?1:yu(t),(Va(e)?Xn:Kr)(e,t)},Un.set=function(e,t,n){return null==e?e:Xr(e,t,n)},Un.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Xr(e,t,n,r)},Un.shuffle=function(e){return(Va(e)?Yn:ei)(e)},Un.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&go(e,t,n)?(t=0,n=r):(t=null==t?0:yu(t),n=n===i?r:yu(n)),ti(e,t,n)):[]},Un.sortBy=Oa,Un.sortedUniq=function(e){return e&&e.length?oi(e):[]},Un.sortedUniqBy=function(e,t){return e&&e.length?oi(e,ao(t,2)):[]},Un.split=function(e,t,n){return n&&"number"!=typeof n&&go(e,t,n)&&(t=n=i),(n=n===i?d:n>>>0)?(e=_u(e))&&("string"==typeof t||null!=t&&!au(t))&&!(t=ui(t))&&Yt(e)?_i(an(e),0,n):e.split(t,n):[]},Un.spread=function(e,t){if("function"!=typeof e)throw new Ae(o);return t=null==t?0:mn(yu(t),0),Gr((function(n){var r=n[t],i=_i(n,0,t);return r&&Ot(i,r),mt(e,this,i)}))},Un.tail=function(e){var t=null==e?0:e.length;return t?ti(e,1,t):[]},Un.take=function(e,t,n){return e&&e.length?ti(e,0,(t=n||t===i?1:yu(t))<0?0:t):[]},Un.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ti(e,(t=r-(t=n||t===i?1:yu(t)))<0?0:t,r):[]},Un.takeRightWhile=function(e,t){return e&&e.length?li(e,ao(t,3),!1,!0):[]},Un.takeWhile=function(e,t){return e&&e.length?li(e,ao(t,3)):[]},Un.tap=function(e,t){return t(e),e},Un.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ae(o);return tu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Pa(e,t,{leading:r,maxWait:t,trailing:i})},Un.thru=ha,Un.toArray=du,Un.toPairs=Uu,Un.toPairsIn=qu,Un.toPath=function(e){return Va(e)?Tt(e,Zo):cu(e)?[e]:Ai(Mo(_u(e)))},Un.toPlainObject=gu,Un.transform=function(e,t,n){var r=Va(e),i=r||Ja(e)||fu(e);if(t=ao(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:tu(e)&&Ya(o)?qn(He(e)):{}}return(i?_t:_r)(e,(function(e,r,i){return t(n,e,r,i)})),n},Un.unary=function(e){return ka(e,1)},Un.union=na,Un.unionBy=ra,Un.unionWith=ia,Un.uniq=function(e){return e&&e.length?si(e):[]},Un.uniqBy=function(e,t){return e&&e.length?si(e,ao(t,2)):[]},Un.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?si(e,i,t):[]},Un.unset=function(e,t){return null==e||ci(e,t)},Un.unzip=oa,Un.unzipWith=aa,Un.update=function(e,t,n){return null==e?e:fi(e,t,vi(n))},Un.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:fi(e,t,vi(n),r)},Un.values=Bu,Un.valuesIn=function(e){return null==e?[]:zt(e,Nu(e))},Un.without=ua,Un.words=Yu,Un.wrap=function(e,t){return Za(vi(t),e)},Un.xor=sa,Un.xorBy=ca,Un.xorWith=fa,Un.zip=la,Un.zipObject=function(e,t){return hi(e||[],t||[],er)},Un.zipObjectDeep=function(e,t){return hi(e||[],t||[],Xr)},Un.zipWith=pa,Un.entries=Uu,Un.entriesIn=qu,Un.extend=bu,Un.extendWith=xu,ss(Un,Un),Un.add=_s,Un.attempt=Qu,Un.camelCase=Fu,Un.capitalize=Wu,Un.ceil=ws,Un.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=mu(n))==n?n:0),t!==i&&(t=(t=mu(t))==t?t:0),ar(mu(e),t,n)},Un.clone=function(e){return ur(e,4)},Un.cloneDeep=function(e){return ur(e,5)},Un.cloneDeepWith=function(e,t){return ur(e,5,t="function"==typeof t?t:i)},Un.cloneWith=function(e,t){return ur(e,4,t="function"==typeof t?t:i)},Un.conformsTo=function(e,t){return null==t||sr(e,t,Pu(t))},Un.deburr=zu,Un.defaultTo=function(e,t){return null==e||e!=e?t:e},Un.divide=bs,Un.endsWith=function(e,t,n){e=_u(e),t=ui(t);var r=e.length,o=n=n===i?r:ar(yu(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Un.eq=Ba,Un.escape=function(e){return(e=_u(e))&&G.test(e)?e.replace(H,Kt):e},Un.escapeRegExp=function(e){return(e=_u(e))&&ne.test(e)?e.replace(te,"\\$&"):e},Un.every=function(e,t,n){var r=Va(e)?bt:dr;return n&&go(e,t,n)&&(t=i),r(e,ao(t,3))},Un.find=ma,Un.findIndex=zo,Un.findKey=function(e,t){return Ct(e,ao(t,3),_r)},Un.findLast=ga,Un.findLastIndex=Vo,Un.findLastKey=function(e,t){return Ct(e,ao(t,3),wr)},Un.floor=xs,Un.forEach=_a,Un.forEachRight=wa,Un.forIn=function(e,t){return null==e?e:mr(e,ao(t,3),Nu)},Un.forInRight=function(e,t){return null==e?e:gr(e,ao(t,3),Nu)},Un.forOwn=function(e,t){return e&&_r(e,ao(t,3))},Un.forOwnRight=function(e,t){return e&&wr(e,ao(t,3))},Un.get=Au,Un.gt=Fa,Un.gte=Wa,Un.has=function(e,t){return null!=e&&ho(e,t,Or)},Un.hasIn=ku,Un.head=$o,Un.identity=is,Un.includes=function(e,t,n,r){e=$a(e)?e:Bu(e),n=n&&!r?yu(n):0;var i=e.length;return n<0&&(n=mn(i+n,0)),su(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Nt(e,t,n)>-1},Un.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:yu(n);return i<0&&(i=mn(r+i,0)),Nt(e,t,i)},Un.inRange=function(e,t,n){return t=hu(t),n===i?(n=t,t=0):n=hu(n),function(e,t,n){return e>=gn(t,n)&&e<mn(t,n)}(e=mu(e),t,n)},Un.invoke=Cu,Un.isArguments=za,Un.isArray=Va,Un.isArrayBuffer=Ha,Un.isArrayLike=$a,Un.isArrayLikeObject=Ga,Un.isBoolean=function(e){return!0===e||!1===e||nu(e)&&Er(e)==m},Un.isBuffer=Ja,Un.isDate=Ka,Un.isElement=function(e){return nu(e)&&1===e.nodeType&&!ou(e)},Un.isEmpty=function(e){if(null==e)return!0;if($a(e)&&(Va(e)||"string"==typeof e||"function"==typeof e.splice||Ja(e)||fu(e)||za(e)))return!e.length;var t=po(e);if(t==x||t==A)return!e.size;if(xo(e))return!Lr(e).length;for(var n in e)if(Ne.call(e,n))return!1;return!0},Un.isEqual=function(e,t){return Cr(e,t)},Un.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Cr(e,t,i,n):!!r},Un.isError=Xa,Un.isFinite=function(e){return"number"==typeof e&&hn(e)},Un.isFunction=Ya,Un.isInteger=Qa,Un.isLength=eu,Un.isMap=ru,Un.isMatch=function(e,t){return e===t||Pr(e,t,so(t))},Un.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Pr(e,t,so(t),n)},Un.isNaN=function(e){return iu(e)&&e!=+e},Un.isNative=function(e){if(bo(e))throw new be("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(e)},Un.isNil=function(e){return null==e},Un.isNull=function(e){return null===e},Un.isNumber=iu,Un.isObject=tu,Un.isObjectLike=nu,Un.isPlainObject=ou,Un.isRegExp=au,Un.isSafeInteger=function(e){return Qa(e)&&e>=-9007199254740991&&e<=l},Un.isSet=uu,Un.isString=su,Un.isSymbol=cu,Un.isTypedArray=fu,Un.isUndefined=function(e){return e===i},Un.isWeakMap=function(e){return nu(e)&&po(e)==I},Un.isWeakSet=function(e){return nu(e)&&"[object WeakSet]"==Er(e)},Un.join=function(e,t){return null==e?"":yn.call(e,t)},Un.kebabCase=Vu,Un.last=Xo,Un.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=yu(n))<0?mn(r+o,0):gn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Pt(e,Lt,o,!0)},Un.lowerCase=Hu,Un.lowerFirst=$u,Un.lt=lu,Un.lte=pu,Un.max=function(e){return e&&e.length?hr(e,is,Tr):i},Un.maxBy=function(e,t){return e&&e.length?hr(e,ao(t,2),Tr):i},Un.mean=function(e){return Dt(e,is)},Un.meanBy=function(e,t){return Dt(e,ao(t,2))},Un.min=function(e){return e&&e.length?hr(e,is,Dr):i},Un.minBy=function(e,t){return e&&e.length?hr(e,ao(t,2),Dr):i},Un.stubArray=vs,Un.stubFalse=ms,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=Ss,Un.nth=function(e,t){return e&&e.length?Br(e,yu(t)):i},Un.noConflict=function(){return ot._===this&&(ot._=Ze),this},Un.noop=cs,Un.now=Aa,Un.pad=function(e,t,n){e=_u(e);var r=(t=yu(t))?on(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Fi(ln(i),n)+e+Fi(fn(i),n)},Un.padEnd=function(e,t,n){e=_u(e);var r=(t=yu(t))?on(e):0;return t&&r<t?e+Fi(t-r,n):e},Un.padStart=function(e,t,n){e=_u(e);var r=(t=yu(t))?on(e):0;return t&&r<t?Fi(t-r,n)+e:e},Un.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),wn(_u(e).replace(re,""),t||0)},Un.random=function(e,t,n){if(n&&"boolean"!=typeof n&&go(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=hu(e),t===i?(t=e,e=0):t=hu(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=bn();return gn(e+o*(t-e+tt("1e-"+((o+"").length-1))),t)}return Hr(e,t)},Un.reduce=function(e,t,n){var r=Va(e)?At:Ut,i=arguments.length<3;return r(e,ao(t,4),n,i,lr)},Un.reduceRight=function(e,t,n){var r=Va(e)?kt:Ut,i=arguments.length<3;return r(e,ao(t,4),n,i,pr)},Un.repeat=function(e,t,n){return t=(n?go(e,t,n):t===i)?1:yu(t),$r(_u(e),t)},Un.replace=function(){var e=arguments,t=_u(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Un.result=function(e,t,n){var r=-1,o=(t=mi(t,e)).length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[Zo(t[r])];a===i&&(r=o,a=n),e=Ya(a)?a.call(e):a}return e},Un.round=Es,Un.runInContext=e,Un.sample=function(e){return(Va(e)?Kn:Jr)(e)},Un.size=function(e){if(null==e)return 0;if($a(e))return su(e)?on(e):e.length;var t=po(e);return t==x||t==A?e.size:Lr(e).length},Un.snakeCase=Gu,Un.some=function(e,t,n){var r=Va(e)?jt:ni;return n&&go(e,t,n)&&(t=i),r(e,ao(t,3))},Un.sortedIndex=function(e,t){return ri(e,t)},Un.sortedIndexBy=function(e,t,n){return ii(e,t,ao(n,2))},Un.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ri(e,t);if(r<n&&Ba(e[r],t))return r}return-1},Un.sortedLastIndex=function(e,t){return ri(e,t,!0)},Un.sortedLastIndexBy=function(e,t,n){return ii(e,t,ao(n,2),!0)},Un.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ri(e,t,!0)-1;if(Ba(e[n],t))return n}return-1},Un.startCase=Ju,Un.startsWith=function(e,t,n){return e=_u(e),n=null==n?0:ar(yu(n),0,e.length),t=ui(t),e.slice(n,n+t.length)==t},Un.subtract=Ts,Un.sum=function(e){return e&&e.length?qt(e,is):0},Un.sumBy=function(e,t){return e&&e.length?qt(e,ao(t,2)):0},Un.template=function(e,t,n){var r=Un.templateSettings;n&&go(e,t,n)&&(t=i),e=_u(e),t=xu({},t,r,Ki);var o,a,u=xu({},t.imports,r.imports,Ki),s=Pu(u),c=zt(u,s),f=0,l=t.interpolate||_e,p="__p += '",d=Te((t.escape||_e).source+"|"+l.source+"|"+(l===X?le:_e).source+"|"+(t.evaluate||_e).source+"|$","g"),h="//# sourceURL="+(Ne.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xe+"]")+"\n";e.replace(d,(function(t,n,r,i,u,s){return r||(r=i),p+=e.slice(f,s).replace(we,Xt),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),u&&(a=!0,p+="';\n"+u+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=s+t.length,t})),p+="';\n";var y=Ne.call(t,"variable")&&t.variable;if(y){if(ce.test(y))throw new be("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(F,""):p).replace(W,"$1").replace(z,"$1;"),p="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Qu((function(){return xe(s,h+"return "+p).apply(i,c)}));if(v.source=p,Xa(v))throw v;return v},Un.times=function(e,t){if((e=yu(e))<1||e>l)return[];var n=d,r=gn(e,d);t=ao(t),e-=d;for(var i=Bt(r,t);++n<e;)t(n);return i},Un.toFinite=hu,Un.toInteger=yu,Un.toLength=vu,Un.toLower=function(e){return _u(e).toLowerCase()},Un.toNumber=mu,Un.toSafeInteger=function(e){return e?ar(yu(e),-9007199254740991,l):0===e?e:0},Un.toString=_u,Un.toUpper=function(e){return _u(e).toUpperCase()},Un.trim=function(e,t,n){if((e=_u(e))&&(n||t===i))return Ft(e);if(!e||!(t=ui(t)))return e;var r=an(e),o=an(t);return _i(r,Ht(r,o),$t(r,o)+1).join("")},Un.trimEnd=function(e,t,n){if((e=_u(e))&&(n||t===i))return e.slice(0,un(e)+1);if(!e||!(t=ui(t)))return e;var r=an(e);return _i(r,0,$t(r,an(t))+1).join("")},Un.trimStart=function(e,t,n){if((e=_u(e))&&(n||t===i))return e.replace(re,"");if(!e||!(t=ui(t)))return e;var r=an(e);return _i(r,Ht(r,an(t))).join("")},Un.truncate=function(e,t){var n=30,r="...";if(tu(t)){var o="separator"in t?t.separator:o;n="length"in t?yu(t.length):n,r="omission"in t?ui(t.omission):r}var a=(e=_u(e)).length;if(Yt(e)){var u=an(e);a=u.length}if(n>=a)return e;var s=n-on(r);if(s<1)return r;var c=u?_i(u,0,s).join(""):e.slice(0,s);if(o===i)return c+r;if(u&&(s+=c.length-s),au(o)){if(e.slice(s).search(o)){var f,l=c;for(o.global||(o=Te(o.source,_u(pe.exec(o))+"g")),o.lastIndex=0;f=o.exec(l);)var p=f.index;c=c.slice(0,p===i?s:p)}}else if(e.indexOf(ui(o),s)!=s){var d=c.lastIndexOf(o);d>-1&&(c=c.slice(0,d))}return c+r},Un.unescape=function(e){return(e=_u(e))&&$.test(e)?e.replace(V,sn):e},Un.uniqueId=function(e){var t=++Re;return _u(e)+t},Un.upperCase=Ku,Un.upperFirst=Xu,Un.each=_a,Un.eachRight=wa,Un.first=$o,ss(Un,(gs={},_r(Un,(function(e,t){Ne.call(Un.prototype,t)||(gs[t]=e)})),gs),{chain:!1}),Un.VERSION="4.17.21",_t(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Un[e].placeholder=Un})),_t(["drop","take"],(function(e,t){Wn.prototype[e]=function(n){n=n===i?1:mn(yu(n),0);var r=this.__filtered__&&!t?new Wn(this):this.clone();return r.__filtered__?r.__takeCount__=gn(n,r.__takeCount__):r.__views__.push({size:gn(n,d),type:e+(r.__dir__<0?"Right":"")}),r},Wn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),_t(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Wn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ao(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),_t(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Wn.prototype[e]=function(){return this[n](1).value()[0]}})),_t(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Wn.prototype[e]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(is)},Wn.prototype.find=function(e){return this.filter(e).head()},Wn.prototype.findLast=function(e){return this.reverse().find(e)},Wn.prototype.invokeMap=Gr((function(e,t){return"function"==typeof e?new Wn(this):this.map((function(n){return jr(n,e,t)}))})),Wn.prototype.reject=function(e){return this.filter(Da(ao(e)))},Wn.prototype.slice=function(e,t){e=yu(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Wn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=yu(t))<0?n.dropRight(-t):n.take(t-e)),n)},Wn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wn.prototype.toArray=function(){return this.take(d)},_r(Wn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Un[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);o&&(Un.prototype[t]=function(){var t=this.__wrapped__,u=r?[1]:arguments,s=t instanceof Wn,c=u[0],f=s||Va(t),l=function(e){var t=o.apply(Un,Ot([e],u));return r&&p?t[0]:t};f&&n&&"function"==typeof c&&1!=c.length&&(s=f=!1);var p=this.__chain__,d=!!this.__actions__.length,h=a&&!p,y=s&&!d;if(!a&&f){t=y?t:new Wn(this);var v=e.apply(t,u);return v.__actions__.push({func:ha,args:[l],thisArg:i}),new Fn(v,p)}return h&&y?e.apply(this,u):(v=this.thru(l),h?r?v.value()[0]:v.value():v)})})),_t(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ke[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Un.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Va(i)?i:[],e)}return this[n]((function(n){return t.apply(Va(n)?n:[],e)}))}})),_r(Wn.prototype,(function(e,t){var n=Un[t];if(n){var r=n.name+"";Ne.call(In,r)||(In[r]=[]),In[r].push({name:t,func:n})}})),In[Zi(i,2).name]=[{name:"wrapper",func:i}],Wn.prototype.clone=function(){var e=new Wn(this.__wrapped__);return e.__actions__=Ai(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ai(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ai(this.__views__),e},Wn.prototype.reverse=function(){if(this.__filtered__){var e=new Wn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Va(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=gn(t,e+a);break;case"takeRight":e=mn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,u=o.end,s=u-a,c=r?u:a-1,f=this.__iteratees__,l=f.length,p=0,d=gn(s,this.__takeCount__);if(!n||!r&&i==s&&d==s)return pi(e,this.__actions__);var h=[];e:for(;s--&&p<d;){for(var y=-1,v=e[c+=t];++y<l;){var m=f[y],g=m.iteratee,_=m.type,w=g(v);if(2==_)v=w;else if(!w){if(1==_)continue e;break e}}h[p++]=v}return h},Un.prototype.at=ya,Un.prototype.chain=function(){return da(this)},Un.prototype.commit=function(){return new Fn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===i&&(this.__values__=du(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Un.prototype.plant=function(e){for(var t,n=this;n instanceof Bn;){var r=qo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Un.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wn){var t=e;return this.__actions__.length&&(t=new Wn(this)),(t=t.reverse()).__actions__.push({func:ha,args:[ta],thisArg:i}),new Fn(t,this.__chain__)}return this.thru(ta)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return pi(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,at&&(Un.prototype[at]=function(){return this}),Un}();ot._=cn,(r=function(){return cn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},779:e=>{"use strict";const t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;if(!t)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!t.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');e.exports.AbortController=t.AbortController},418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,u,s=i(e),c=1;c<arguments.length;c++){for(var f in a=Object(arguments[c]))n.call(a,f)&&(s[f]=a[f]);if(t){u=t(a);for(var l=0;l<u.length;l++)r.call(a,u[l])&&(s[u[l]]=a[u[l]])}}return s}},854:e=>{function t(e){return void 0===e}function n(e){return e===Object(e)}function r(e){return Array.isArray(e)}function i(e,r){return r?n(e)&&!t(e.uri):n(e)&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.slice}function o(e){return!t(e)&&e}e.exports={serialize:function e(a,u,s,c){u=u||{},s=s||new FormData,u.indices=o(u.indices),u.nullsAsUndefineds=o(u.nullsAsUndefineds),u.booleansAsIntegers=o(u.booleansAsIntegers),u.allowEmptyArrays=o(u.allowEmptyArrays),u.noFilesWithArrayNotation=o(u.noFilesWithArrayNotation),u.dotsForObjectNotation=o(u.dotsForObjectNotation);const f="function"==typeof s.getParts;return t(a)||(null===a?u.nullsAsUndefineds||s.append(c,""):"boolean"!=typeof a?r(a)?a.length?a.forEach(((t,r)=>{let o=c+"["+(u.indices?r:"")+"]";u.noFilesWithArrayNotation&&function(e,t){return i(e,t)&&"string"==typeof e.name&&(n(e.lastModifiedDate)||"number"==typeof e.lastModified)}(t,f)&&(o=c),e(t,u,s,o)})):u.allowEmptyArrays&&s.append(c+"[]",""):function(e){return e instanceof Date}(a)?s.append(c,a.toISOString()):n(a)&&!i(a,f)?Object.keys(a).forEach((t=>{const n=a[t];if(r(n))for(;t.length>2&&t.lastIndexOf("[]")===t.length-2;)t=t.substring(0,t.length-2);const i=c?u.dotsForObjectNotation?c+"."+t:c+"["+t+"]":t;e(n,u,s,i)})):s.append(c,a):u.booleansAsIntegers?s.append(c,a?1:0):s.append(c,a)),s}}},927:(e,t,n)=>{function r(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},336:()=>{},858:()=>{},764:()=>{},886:()=>{},305:()=>{},615:()=>{},569:()=>{},844:e=>{"use strict";e.exports=JSON.parse('{"name":"faunadb","version":"4.5.2","apiVersion":"4","description":"FaunaDB Javascript driver for Node.JS and Browsers","homepage":"https://fauna.com","repository":"fauna/faunadb-js","license":"MPL-2.0","keywords":["database","fauna","official","driver"],"bugs":{"url":"https://github.com/fauna/faunadb-js/issues"},"files":["index.d.ts","src/","dist/","tools/printReleaseNotes.js"],"main":"index.js","scripts":{"doc":"jsdoc -c ./jsdoc.json","browserify":"browserify index.js --standalone faunadb -o dist/faunadb.js","browserify-min":"browserify index.js --standalone faunadb | terser -c -m --keep-fnames --keep-classnames -o dist/faunadb-min.js","prettify":"prettier --write \\"{src,test}/**/*.{js,ts}\\"","test":"jest --env=node --verbose=true --forceExit ./test","posttest":"node ./test/afterComplete","semantic-release":"semantic-release","wp":"webpack","postinstall":"node ./tools/printReleaseNotes","postupdate":"node ./tools/printReleaseNotes","load-test":"node ./tools/loadTest"},"types":"index.d.ts","dependencies":{"base64-js":"^1.2.0","boxen":"^5.0.1","btoa-lite":"^1.0.0","chalk":"^4.1.1","cross-fetch":"^3.1.5","dotenv":"^8.2.0","fn-annotate":"^1.1.3","node-abort-controller":"^3.0.1","object-assign":"^4.1.0","util-deprecate":"^1.0.2"},"devDependencies":{"ansi-regex":">=5.0.1","browserify":"^16.2.2","eslint":"^5.3.0","eslint-config-prettier":"^6.5.0","eslint-plugin-prettier":"^3.1.1","husky":"^7.0.4","jest":"^27.4.7","jsdoc":"^3.6.10","json-schema":">=0.4.0","lint-staged":">=8","marked":">=4.0.10","prettier":"1.18.2","semantic-release":"^17.2.3","terser":"^4.3.9","webpack":"^5.23.0","webpack-cli":"^4.5.0","yargs":"^16.2.0"},"lint-staged":{"*.{js,css,json,md}":["prettier --write","git add"],"*.js":["eslint --fix","git add"]},"release":{"branches":["main"]},"browser":{"http2":false,"http":false,"https":false,"os":false,"util":false,"boxen":false,"chalk":false}}')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";function e(e){let t,n,r,i={};for([t,n]of e)i[t]=void 0!==(r=i[t])?[].concat(r,n):n;return i}async function t(t,n){if(t.body&&n)return~n.indexOf("application/json")?t.json():~n.indexOf("multipart/form-data")||~n.indexOf("application/x-www-form-urlencoded")?t.formData().then(e):~n.indexOf("text/")?t.text():t.arrayBuffer()}function r(e){let n=this,{request:r}=e,i=new URL(r.url);return n.url=r.url,n.method=r.method,n.headers=r.headers,n.extend=e.waitUntil.bind(e),n.cf=r.cf,n.params={},n.path=i.pathname,n.hostname=i.hostname,n.origin=i.origin,n.query=i.searchParams,n.search=i.search,n.body=t.bind(0,r,n.headers.get("content-type")),n.body.blob=r.blob.bind(r),n.body.text=r.text.bind(r),n.body.arrayBuffer=r.arrayBuffer.bind(r),n.body.formData=r.formData.bind(r),n.body.json=r.json.bind(r),n}var i=new TextEncoder;function o(e){return e?i.encode(e).byteLength:0}var a="content-type",u="content-length";function s(e){var t=this,n=t.headers=new Headers({"Cache-Control":"private, no-cache"});return t.body="",t.finished=!1,t.status=t.statusCode=200,t.getHeaders=()=>Object.fromEntries(n),t.getHeaderNames=()=>[...n.keys()],t.hasHeader=n.has.bind(n),t.getHeader=n.get.bind(n),t.removeHeader=n.delete.bind(n),t.setHeader=n.set.bind(n),Object.defineProperty(t,"status",{set:e=>{t.statusCode=e},get:()=>t.statusCode}),t.end=e=>{t.finished||(t.finished=!0,t.body=e)},t.writeHead=(e,r)=>{t.statusCode=e;for(let e in r)n.set(e,r[e])},t.send=(n,r,i)=>{let s=typeof r,c={};for(let e in i)c[e.toLowerCase()]=i[e];let f=c[u]||t.getHeader(u),l=c[a]||t.getHeader(a);null==r?r="":"object"===s?(r=JSON.stringify(r),l=l||"application/json;charset=utf-8"):"string"!==s&&(r=String(r)),c[a]=l||"text/plain",c[u]=f||String(r.byteLength||o(r)),204===n||205===n||304===n?(t.removeHeader(u),t.removeHeader(a),delete c[u],delete c[a],r=null):"HEAD"===e&&(r=null),t.writeHead(n,c),t.end(r)},t}var c={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",409:"Conflict",410:"Gone",411:"Length Required",413:"Payload Too Large",422:"Unprocessable Entity",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout"};async function f(e,t,n,r,...i){let o=await e(n,r,...i);return o instanceof Response?o:t||r.finished?new Response(r.body,r):void 0}function l(){let e,t={};return e={add(e,n,r){let i=t[e];if(void 0===i&&(i=t[e]={__d:new Map,__s:{}}),n instanceof RegExp)i.__d.set(n,{keys:[],handler:r});else if(/[:|*]/.test(n)){let{keys:e,pattern:t}=function(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,i,o,a=[],u="",s=e.split("/");for(s[0]||s.shift();i=s.shift();)"*"===(n=i[0])?(a.push("wild"),u+="/(.*)"):":"===n?(r=i.indexOf("?",1),o=i.indexOf(".",1),a.push(i.substring(1,~r?r:~o?o:i.length)),u+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(u+=(~r?"?":"")+"\\"+i.substring(o))):u+="/"+i;return{keys:a,pattern:new RegExp("^"+u+"/?$","i")}}(n);i.__d.set(t,{keys:e,handler:r})}else i.__s[n]={keys:[],handler:r}},onerror(e,t,n,r){let i=c[n=n||500],o=r&&r.message||i||String(n);return new Response(o,{status:n,statusText:i})},async run(n){let i,o=new r(n),a=new s(o.method);return e.prepare&&(i=await f(e.prepare,!1,o,a),i)?i:(i=function(e,t,n){let r,i,o,a,u,s={};if(i=e[t]){if(r=i.__s[n])return{params:s,handler:r.handler};for([o,a]of i.__d)if(u=o.exec(n),null!==u){if(void 0!==u.groups)for(r in u.groups)s[r]=u.groups[r];else if(a.keys.length>0)for(r=0;r<a.keys.length;)s[a.keys[r++]]=u[r];return{params:s,handler:a.handler}}}}(t,o.method,o.path),i?(o.params=i.params,f(i.handler,!0,o,a).catch((t=>f(e.onerror,!0,o,a,500,t)))):f(e.onerror,!0,o,a,404))}}}var p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var h,y,v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function m(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function u(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))}function g(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:u(0),throw:u(1),return:u(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,(a=i?[2&a[0],i.value]:a)[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function _(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function b(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}(y=h=h||{}).assertNever=function(e){throw new Error},y.arrayToEnum=function(e){var t,n,r={};try{for(var i=_(e),o=i.next();!o.done;o=i.next()){var a=o.value;r[a]=a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},y.getValidEnumValues=function(e){var t,n,r=y.objectKeys(e).filter((function(t){return"number"!=typeof e[e[t]]})),i={};try{for(var o=_(r),a=o.next();!a.done;a=o.next()){var u=a.value;i[u]=e[u]}}catch(n){t={error:n}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return y.objectValues(i)},y.objectValues=function(e){return y.objectKeys(e).map((function(t){return e[t]}))},y.objectKeys="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n},y.find=function(e,t){var n,r;try{for(var i=_(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(t(a))return a}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},y.isInteger="function"==typeof Number.isInteger?function(e){return Number.isInteger(e)}:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};var x=h.arrayToEnum(["invalid_type","custom","invalid_union","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]),S=function(e){function t(t){var n=this.constructor,r=e.call(this)||this;return r.issues=[],r.format=function(){var e={_errors:[]},t=function(n){var r,i;try{for(var o=_(n.issues),a=o.next();!a.done;a=o.next()){var u=a.value;if("invalid_union"===u.code)u.unionErrors.map(t);else if("invalid_return_type"===u.code)t(u.returnTypeError);else if("invalid_arguments"===u.code)t(u.argumentsError);else if(0===u.path.length)e._errors.push(u.message);else for(var s=e,c=0;c<u.path.length;){var f,l=u.path[c];c===u.path.length-1?(s[l]=s[l]||{_errors:[]},s[l]._errors.push(u.message)):"string"==typeof l?s[l]=s[l]||{_errors:[]}:"number"==typeof l&&((f=[])._errors=[],s[l]=s[l]||f),s=s[l],c++}}}catch(n){r={error:n}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}};return t(r),e},r.addIssue=function(e){r.issues=b(b([],w(r.issues),!1),[e],!1)},r.addIssues=function(e){void 0===e&&(e=[]),r.issues=b(b([],w(r.issues),!1),w(e),!1)},r.flatten=function(e){var t,n;void 0===e&&(e=function(e){return e.message});var i={},o=[];try{for(var a=_(r.issues),u=a.next();!u.done;u=a.next()){var s=u.value;0<s.path.length?(i[s.path[0]]=i[s.path[0]]||[],i[s.path[0]].push(e(s))):o.push(e(s))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return{formErrors:o,fieldErrors:i}},n=n.prototype,Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n,r.name="ZodError",r.issues=t,r}return d(t,e),Object.defineProperty(t.prototype,"errors",{get:function(){return this.issues},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this.message},Object.defineProperty(t.prototype,"message",{get:function(){return JSON.stringify(this.issues,null,2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.issues.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formErrors",{get:function(){return this.flatten()},enumerable:!1,configurable:!0}),t.create=function(e){return new t(e)},t}(Error),E=function(e,t){var n;switch(e.code){case x.invalid_type:n="undefined"===e.received?"Required":"Expected "+e.expected+", received "+e.received;break;case x.unrecognized_keys:n="Unrecognized key(s) in object: "+e.keys.map((function(e){return"'"+e+"'"})).join(", ");break;case x.invalid_union:n="Invalid input";break;case x.invalid_enum_value:n="Invalid enum value. Expected "+e.options.map((function(e){return"string"==typeof e?"'"+e+"'":e})).join(" | ")+", received "+("string"==typeof t.data?"'"+t.data+"'":t.data);break;case x.invalid_arguments:n="Invalid function arguments";break;case x.invalid_return_type:n="Invalid function return type";break;case x.invalid_date:n="Invalid date";break;case x.invalid_string:n="regex"!==e.validation?"Invalid "+e.validation:"Invalid";break;case x.too_small:n="array"===e.type?"Should have "+(e.inclusive?"at least":"more than")+" "+e.minimum+" items":"string"===e.type?"Should be "+(e.inclusive?"at least":"over")+" "+e.minimum+" characters":"number"===e.type?"Value should be greater than "+(e.inclusive?"or equal to ":"")+e.minimum:"Invalid input";break;case x.too_big:n="array"===e.type?"Should have "+(e.inclusive?"at most":"less than")+" "+e.maximum+" items":"string"===e.type?"Should be "+(e.inclusive?"at most":"under")+" "+e.maximum+" characters long":"number"===e.type?"Value should be less than "+(e.inclusive?"or equal to ":"")+e.maximum:"Invalid input";break;case x.custom:n="Invalid input";break;case x.invalid_intersection_types:n="Intersection results could not be merged";break;case x.not_multiple_of:n="Should be multiple of "+e.multipleOf;break;default:n=t.defaultError,h.assertNever(e)}return{message:n}},T=E,O=h.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);function A(e,t,n){return n&&n.set(e,t),t}var k=function(e,t){if(t&&t.has(e))return t.get(e);switch(typeof e){case"undefined":return A(e,O.undefined,t);case"string":return A(e,O.string,t);case"number":return A(e,isNaN(e)?O.nan:O.number,t);case"boolean":return A(e,O.boolean,t);case"function":return A(e,O.function,t);case"bigint":return A(e,O.bigint,t);case"object":return Array.isArray(e)?A(e,O.array,t):null===e?A(e,O.null,t):e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?A(e,O.promise,t):e instanceof Map?A(e,O.map,t):e instanceof Set?A(e,O.set,t):e instanceof Date?A(e,O.date,t):A(e,O.object,t);default:return A(e,O.unknown,t)}},j=function(e){var t,n,r=e.data,i=e.path,o=e.errorMaps,a=(e=e.issueData,i=b(b([],w(i),!1),w(e.path||[]),!1),v(v({},e),{path:i})),u="";o=o.filter((function(e){return!!e})).slice().reverse();try{for(var s=_(o),c=s.next();!c.done;c=s.next())u=(0,c.value)(a,{data:r,defaultError:u}).message}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return v(v({},e),{path:i,message:e.message||u})};function I(e,t){t=j({issueData:t,data:e.data,path:e.path,errorMaps:[e.contextualErrorMap,e.schemaErrorMap,T,E].filter((function(e){return!!e}))}),e.issues.push(t)}var C,P,N=function(){function e(){this.value="valid"}return e.prototype.dirty=function(){"valid"===this.value&&(this.value="dirty")},e.prototype.abort=function(){"aborted"!==this.value&&(this.value="aborted")},e.mergeArray=function(e,t){var n,r,i=[];try{for(var o=_(t),a=o.next();!a.done;a=o.next()){var u=a.value;if("aborted"===u.status)return R;"dirty"===u.status&&e.dirty(),i.push(u.value)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return{status:e.value,value:i}},e.mergeObjectAsync=function(t,n){return m(this,void 0,void 0,(function(){var r,i,o,a,u,s,c,f,l;return g(this,(function(p){switch(p.label){case 0:r=[],p.label=1;case 1:p.trys.push([1,7,8,9]),i=_(n),o=i.next(),p.label=2;case 2:return o.done?[3,6]:(a=o.value,s=(u=r).push,l={},[4,a.key]);case 3:return l.key=p.sent(),[4,a.value];case 4:s.apply(u,[(l.value=p.sent(),l)]),p.label=5;case 5:return o=i.next(),[3,2];case 6:return[3,9];case 7:return c={error:c=p.sent()},[3,9];case 8:try{o&&!o.done&&(f=i.return)&&f.call(i)}finally{if(c)throw c.error}return[7];case 9:return[2,e.mergeObjectSync(t,r)]}}))}))},e.mergeObjectSync=function(e,t){var n,r,i={};try{for(var o=_(t),a=o.next();!a.done;a=o.next()){var u=a.value,s=u.key,c=u.value;if("aborted"===s.status)return R;if("aborted"===c.status)return R;"dirty"===s.status&&e.dirty(),"dirty"===c.status&&e.dirty(),void 0===c.value&&!u.alwaysSet||(i[s.value]=c.value)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return{status:e.value,value:i}},e}(),R=Object.freeze({status:"aborted"}),L=function(e){return{status:"valid",value:e}},D=function(e){return"aborted"===e.status},M=function(e){return"dirty"===e.status},Z=function(e){return"valid"===e.status},U=function(e){return e instanceof Promise};(P=C=C||{}).errToObj=function(e){return"string"==typeof e?{message:e}:e||{}},P.toString=function(e){return"string"==typeof e?e:null==e?void 0:e.message};var q=function(e,t){if(Z(t))return{success:!0,data:t.value};if(!e.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new S(e.issues)}};function B(e){if(!e)return{};if(e.errorMap&&(e.invalid_type_error||e.required_error))throw new Error('Can\'t use "invalid" or "required" in conjunction with custom error map.');return e.errorMap?{errorMap:e.errorMap}:{errorMap:function(t,n){return"invalid_type"!==t.code?{message:n.defaultError}:void 0===n.data&&e.required_error?{message:e.required_error}:e.invalid_type_error?{message:e.invalid_type_error}:{message:n.defaultError}}}}var F,W=function(){function e(e){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=e,this.transform=this.transform.bind(this),this.default=this.default.bind(this)}return Object.defineProperty(e.prototype,"description",{get:function(){return this._def.description},enumerable:!1,configurable:!0}),e.prototype._processInputParams=function(e){return{status:new N,ctx:v(v({},e.parent),{data:e.data,parsedType:k(e.data,e.parent.typeCache),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent})}},e.prototype._parseSync=function(e){if(e=this._parse(e),U(e))throw new Error("Synchronous parse encountered promise.");return e},e.prototype._parseAsync=function(e){return e=this._parse(e),Promise.resolve(e)},e.prototype.parse=function(e,t){if((t=this.safeParse(e,t)).success)return t.data;throw t.error},e.prototype.safeParse=function(e,t){return t={path:(null==t?void 0:t.path)||[],issues:[],contextualErrorMap:null==t?void 0:t.errorMap,schemaErrorMap:this._def.errorMap,async:null!==(t=null==t?void 0:t.async)&&void 0!==t&&t,typeCache:new Map,parent:null,data:e,parsedType:k(e)},e=this._parseSync({data:e,path:t.path,parent:t}),q(t,e)},e.prototype.parseAsync=function(e,t){return m(this,void 0,void 0,(function(){var n;return g(this,(function(r){switch(r.label){case 0:return[4,this.safeParseAsync(e,t)];case 1:if((n=r.sent()).success)return[2,n.data];throw n.error}}))}))},e.prototype.safeParseAsync=function(e,t){return m(this,void 0,void 0,(function(){var n,r;return g(this,(function(i){switch(i.label){case 0:return n={path:(null==t?void 0:t.path)||[],issues:[],contextualErrorMap:null==t?void 0:t.errorMap,schemaErrorMap:this._def.errorMap,async:!0,typeCache:new Map,parent:null,data:e,parsedType:k(e)},r=this._parse({data:e,path:[],parent:n}),[4,U(r)?r:Promise.resolve(r)];case 1:return r=i.sent(),[2,q(n,r)]}}))}))},e.prototype.refine=function(e,t){return this._refinement((function(n,r){function i(){return r.addIssue(v({code:x.custom},"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(n):t))}var o=e(n);return o instanceof Promise?o.then((function(e){return!!e||(i(),!1)})):!!o||(i(),!1)}))},e.prototype.refinement=function(e,t){return this._refinement((function(n,r){return!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)}))},e.prototype._refinement=function(e){return new Se({schema:this,typeName:_e.ZodEffects,effect:{type:"refinement",refinement:e}})},e.prototype.optional=function(){return Ee.create(this)},e.prototype.nullable=function(){return Te.create(this)},e.prototype.nullish=function(){return this.optional().nullable()},e.prototype.array=function(){return ie.create(this)},e.prototype.promise=function(){return xe.create(this)},e.prototype.or=function(e){return se.create([this,e])},e.prototype.and=function(e){return fe.create(this,e)},e.prototype.transform=function(e){return new Se({schema:this,typeName:_e.ZodEffects,effect:{type:"transform",transform:e}})},e.prototype.default=function(e){return new Oe({innerType:this,defaultValue:"function"==typeof e?e:function(){return e},typeName:_e.ZodDefault})},e.prototype.describe=function(e){return new this.constructor(v(v({},this._def),{description:e}))},e.prototype.isOptional=function(){return this.safeParse(void 0).success},e.prototype.isNullable=function(){return this.safeParse(null).success},e}(),z=/^c[^\s-]{8,}$/i,V=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,H=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._regex=function(e,n,r){return t.refinement((function(t){return e.test(t)}),v({validation:n,code:x.invalid_string},C.errToObj(r)))},t.nonempty=function(e){return t.min(1,C.errToObj(e))},t}return d(t,e),t.prototype._parse=function(e){var t,n,r=(e=this._processInputParams(e)).status,i=e.ctx;if(i.parsedType!==O.string)return I(i,{code:x.invalid_type,expected:O.string,received:i.parsedType}),R;try{for(var o=_(this._def.checks),a=o.next();!a.done;a=o.next()){var u=a.value;if("min"===u.kind)i.data.length<u.value&&(I(i,{code:x.too_small,minimum:u.value,type:"string",inclusive:!0,message:u.message}),r.dirty());else if("max"===u.kind)i.data.length>u.value&&(I(i,{code:x.too_big,maximum:u.value,type:"string",inclusive:!0,message:u.message}),r.dirty());else if("email"===u.kind)H.test(i.data)||(I(i,{validation:"email",code:x.invalid_string,message:u.message}),r.dirty());else if("uuid"===u.kind)V.test(i.data)||(I(i,{validation:"uuid",code:x.invalid_string,message:u.message}),r.dirty());else if("cuid"===u.kind)z.test(i.data)||(I(i,{validation:"cuid",code:x.invalid_string,message:u.message}),r.dirty());else if("url"===u.kind)try{new URL(i.data)}catch(e){I(i,{validation:"url",code:x.invalid_string,message:u.message}),r.dirty()}else"regex"===u.kind&&(u.regex.lastIndex=0,u.regex.test(i.data)||(I(i,{validation:"regex",code:x.invalid_string,message:u.message}),r.dirty()))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return{status:r.value,value:i.data}},t.prototype._addCheck=function(e){return new t(v(v({},this._def),{checks:b(b([],w(this._def.checks),!1),[e],!1)}))},t.prototype.email=function(e){return this._addCheck(v({kind:"email"},C.errToObj(e)))},t.prototype.url=function(e){return this._addCheck(v({kind:"url"},C.errToObj(e)))},t.prototype.uuid=function(e){return this._addCheck(v({kind:"uuid"},C.errToObj(e)))},t.prototype.cuid=function(e){return this._addCheck(v({kind:"cuid"},C.errToObj(e)))},t.prototype.regex=function(e,t){return this._addCheck(v({kind:"regex",regex:e},C.errToObj(t)))},t.prototype.min=function(e,t){return this._addCheck(v({kind:"min",value:e},C.errToObj(t)))},t.prototype.max=function(e,t){return this._addCheck(v({kind:"max",value:e},C.errToObj(t)))},t.prototype.length=function(e,t){return this.min(e,t).max(e,t)},Object.defineProperty(t.prototype,"isEmail",{get:function(){return!!this._def.checks.find((function(e){return"email"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isURL",{get:function(){return!!this._def.checks.find((function(e){return"url"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUUID",{get:function(){return!!this._def.checks.find((function(e){return"uuid"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCUID",{get:function(){return!!this._def.checks.find((function(e){return"cuid"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){var e=-1/0;return this._def.checks.map((function(t){"min"===t.kind&&(null===e||t.value>e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){var e=null;return this._def.checks.map((function(t){"max"===t.kind&&(null===e||t.value<e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),t.create=function(e){return new t(v({checks:[],typeName:_e.ZodString},B(e)))},t}(W),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.min=t.gte,t.max=t.lte,t.step=t.multipleOf,t}return d(t,e),t.prototype._parse=function(e){var t,n,r=(e=this._processInputParams(e)).status,i=e.ctx;if(i.parsedType!==O.number)return I(i,{code:x.invalid_type,expected:O.number,received:i.parsedType}),R;try{for(var o=_(this._def.checks),a=o.next();!a.done;a=o.next()){var u=a.value;"int"===u.kind?h.isInteger(i.data)||(I(i,{code:x.invalid_type,expected:"integer",received:"float",message:u.message}),r.dirty()):"min"===u.kind?(u.inclusive?i.data<u.value:i.data<=u.value)&&(I(i,{code:x.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,message:u.message}),r.dirty()):"max"===u.kind?(u.inclusive?i.data>u.value:i.data>=u.value)&&(I(i,{code:x.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,message:u.message}),r.dirty()):"multipleOf"===u.kind?i.data%u.value!=0&&(I(i,{code:x.not_multiple_of,multipleOf:u.value,message:u.message}),r.dirty()):h.assertNever(u)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return{status:r.value,value:i.data}},t.prototype.gte=function(e,t){return this.setLimit("min",e,!0,C.toString(t))},t.prototype.gt=function(e,t){return this.setLimit("min",e,!1,C.toString(t))},t.prototype.lte=function(e,t){return this.setLimit("max",e,!0,C.toString(t))},t.prototype.lt=function(e,t){return this.setLimit("max",e,!1,C.toString(t))},t.prototype.setLimit=function(e,n,r,i){return new t(v(v({},this._def),{checks:b(b([],w(this._def.checks),!1),[{kind:e,value:n,inclusive:r,message:C.toString(i)}],!1)}))},t.prototype._addCheck=function(e){return new t(v(v({},this._def),{checks:b(b([],w(this._def.checks),!1),[e],!1)}))},t.prototype.int=function(e){return this._addCheck({kind:"int",message:C.toString(e)})},t.prototype.positive=function(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:C.toString(e)})},t.prototype.negative=function(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:C.toString(e)})},t.prototype.nonpositive=function(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:C.toString(e)})},t.prototype.nonnegative=function(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:C.toString(e)})},t.prototype.multipleOf=function(e,t){return this._addCheck({kind:"multipleOf",value:e,message:C.toString(t)})},Object.defineProperty(t.prototype,"minValue",{get:function(){var e,t,n=null;try{for(var r=_(this._def.checks),i=r.next();!i.done;i=r.next()){var o=i.value;"min"===o.kind&&(null===n||o.value>n)&&(n=o.value)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){var e,t,n=null;try{for(var r=_(this._def.checks),i=r.next();!i.done;i=r.next()){var o=i.value;"max"===o.kind&&(null===n||o.value<n)&&(n=o.value)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInt",{get:function(){return!!this._def.checks.find((function(e){return"int"===e.kind}))},enumerable:!1,configurable:!0}),t.create=function(e){return new t(v(v({checks:[],typeName:_e.ZodNumber},B(e)),B(e)))},t}(W),J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){return(e=this._processInputParams(e).ctx).parsedType!==O.bigint?(I(e,{code:x.invalid_type,expected:O.bigint,received:e.parsedType}),R):L(e.data)},t.create=function(e){return new t(v({typeName:_e.ZodBigInt},B(e)))},t}(W),K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){return(e=this._processInputParams(e).ctx).parsedType!==O.boolean?(I(e,{code:x.invalid_type,expected:O.boolean,received:e.parsedType}),R):L(e.data)},t.create=function(e){return new t(v({typeName:_e.ZodBoolean},B(e)))},t}(W),X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){var t;return e=(t=this._processInputParams(e)).status,(t=t.ctx).parsedType!==O.date?(I(t,{code:x.invalid_type,expected:O.date,received:t.parsedType}),R):isNaN(t.data.getTime())?(I(t,{code:x.invalid_date}),R):{status:e.value,value:new Date(t.data.getTime())}},t.create=function(e){return new t(v({typeName:_e.ZodDate},B(e)))},t}(W),Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){return(e=this._processInputParams(e).ctx).parsedType!==O.undefined?(I(e,{code:x.invalid_type,expected:O.undefined,received:e.parsedType}),R):L(e.data)},t.create=function(e){return new t(v({typeName:_e.ZodUndefined},B(e)))},t}(W),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){return(e=this._processInputParams(e).ctx).parsedType!==O.null?(I(e,{code:x.invalid_type,expected:O.null,received:e.parsedType}),R):L(e.data)},t.create=function(e){return new t(v({typeName:_e.ZodNull},B(e)))},t}(W),ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._any=!0,t}return d(t,e),t.prototype._parse=function(e){return e=this._processInputParams(e).ctx,L(e.data)},t.create=function(e){return new t(v({typeName:_e.ZodAny},B(e)))},t}(W),te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._unknown=!0,t}return d(t,e),t.prototype._parse=function(e){return e=this._processInputParams(e).ctx,L(e.data)},t.create=function(e){return new t(v({typeName:_e.ZodUnknown},B(e)))},t}(W),ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){return I(e=this._processInputParams(e).ctx,{code:x.invalid_type,expected:O.never,received:e.parsedType}),R},t.create=function(e){return new t(v({typeName:_e.ZodNever},B(e)))},t}(W),re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){return(e=this._processInputParams(e).ctx).parsedType!==O.undefined?(I(e,{code:x.invalid_type,expected:O.void,received:e.parsedType}),R):L(e.data)},t.create=function(e){return new t(v({typeName:_e.ZodVoid},B(e)))},t}(W),ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){var t=(e=this._processInputParams(e)).status,n=e.ctx,r=this._def;return n.parsedType!==O.array?(I(n,{code:x.invalid_type,expected:O.array,received:n.parsedType}),R):(null!==r.minLength&&n.data.length<r.minLength.value&&(I(n,{code:x.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,message:r.minLength.message}),t.dirty()),null!==r.maxLength&&n.data.length>r.maxLength.value&&(I(n,{code:x.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,message:r.maxLength.message}),t.dirty()),n.async?Promise.all(n.data.map((function(e,t){return r.type._parseAsync({parent:n,path:b(b([],w(n.path),!1),[t],!1),data:e})}))).then((function(e){return N.mergeArray(t,e)})):(e=n.data.map((function(e,t){return r.type._parseSync({parent:n,path:b(b([],w(n.path),!1),[t],!1),data:e})})),N.mergeArray(t,e)))},Object.defineProperty(t.prototype,"element",{get:function(){return this._def.type},enumerable:!1,configurable:!0}),t.prototype.min=function(e,n){return new t(v(v({},this._def),{minLength:{value:e,message:C.toString(n)}}))},t.prototype.max=function(e,n){return new t(v(v({},this._def),{maxLength:{value:e,message:C.toString(n)}}))},t.prototype.length=function(e,t){return this.min(e,t).max(e,t)},t.prototype.nonempty=function(e){return this.min(1,e)},t.create=function(e,n){return new t(v({type:e,minLength:null,maxLength:null,typeName:_e.ZodArray},B(n)))},t}(W);(F||(F={})).mergeShapes=function(e,t){return v(v({},e),t)};var oe=function(e){return function(t){return new ue(v(v({},e),{shape:function(){return v(v({},e.shape()),t)}}))}};function ae(e){if(e instanceof ue){var t,n={};for(t in e.shape){var r=e.shape[t];n[t]=Ee.create(ae(r))}return new ue(v(v({},e._def),{shape:function(){return n}}))}return e instanceof ie?ie.create(ae(e.element)):e instanceof Ee?Ee.create(ae(e.unwrap())):e instanceof Te?Te.create(ae(e.unwrap())):e instanceof le?le.create(e.items.map((function(e){return ae(e)}))):e}var ue=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._cached=null,t.nonstrict=t.passthrough,t.augment=oe(t._def),t.extend=oe(t._def),t}return d(t,e),t.prototype._getCached=function(){if(null!==this._cached)return this._cached;var e=this._def.shape(),t=h.objectKeys(e);return this._cached={shape:e,keys:t}},t.prototype._parse=function(e){var t,n,r,i,o,a=this,u=(f=this._processInputParams(e)).status,s=f.ctx;if(s.parsedType!==O.object)return I(s,{code:x.invalid_type,expected:O.object,received:s.parsedType}),R;var c=(e=this._getCached()).shape,f=e.keys,l=(e=h.objectKeys(s.data).filter((function(e){return!(e in c)})),[]);try{for(var p=_(f),d=p.next();!d.done;d=p.next()){var y=d.value,v=c[y],S=s.data[y];l.push({key:{status:"valid",value:y},value:v._parse({parent:s,data:S,path:b(b([],w(s.path),!1),[y],!1)}),alwaysSet:y in s.data})}}catch(e){E={error:e}}finally{try{d&&!d.done&&(t=p.return)&&t.call(p)}finally{if(E)throw E.error}}if(this._def.catchall instanceof ne){var E=this._def.unknownKeys;if("passthrough"===E)try{for(var T=_(e),A=T.next();!A.done;A=T.next())y=A.value,l.push({key:{status:"valid",value:y},value:{status:"valid",value:s.data[y]}})}catch(e){n={error:e}}finally{try{A&&!A.done&&(r=T.return)&&r.call(T)}finally{if(n)throw n.error}}else if("strict"===E)0<e.length&&(I(s,{code:x.unrecognized_keys,keys:e}),u.dirty());else if("strip"!==E)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{var k=this._def.catchall;try{for(var j=_(e),C=j.next();!C.done;C=j.next())y=C.value,S=s.data[y],l.push({key:{status:"valid",value:y},value:k._parse({parent:s,path:b(b([],w(s.path),!1),[y],!1),data:S}),alwaysSet:y in s.data})}catch(e){i={error:e}}finally{try{C&&!C.done&&(o=j.return)&&o.call(j)}finally{if(i)throw i.error}}}return s.async?Promise.resolve().then((function(){return m(a,void 0,void 0,(function(){var e,t,n,r,i,o,a,u,s;return g(this,(function(c){switch(c.label){case 0:e=[],c.label=1;case 1:c.trys.push([1,7,8,9]),t=_(l),n=t.next(),c.label=2;case 2:return n.done?[3,6]:[4,(r=n.value).key];case 3:return s=c.sent(),o=(i=e).push,s={key:s},[4,r.value];case 4:o.apply(i,[(s.value=c.sent(),s.alwaysSet=r.alwaysSet,s)]),c.label=5;case 5:return n=t.next(),[3,2];case 6:return[3,9];case 7:return a={error:a=c.sent()},[3,9];case 8:try{n&&!n.done&&(u=t.return)&&u.call(t)}finally{if(a)throw a.error}return[7];case 9:return[2,e]}}))}))})).then((function(e){return N.mergeObjectSync(u,e)})):N.mergeObjectSync(u,l)},Object.defineProperty(t.prototype,"shape",{get:function(){return this._def.shape()},enumerable:!1,configurable:!0}),t.prototype.strict=function(e){var n=this;return C.errToObj,new t(v(v(v({},this._def),{unknownKeys:"strict"}),void 0!==e?{errorMap:function(t,r){var i,o;return r=null!==(o=null===(i=(o=n._def).errorMap)||void 0===i?void 0:i.call(o,t,r).message)&&void 0!==o?o:r.defaultError,"unrecognized_keys"===t.code?{message:null!==(t=C.errToObj(e).message)&&void 0!==t?t:r}:{message:r}}}:{}))},t.prototype.strip=function(){return new t(v(v({},this._def),{unknownKeys:"strip"}))},t.prototype.passthrough=function(){return new t(v(v({},this._def),{unknownKeys:"passthrough"}))},t.prototype.setKey=function(e,t){var n;return this.augment(((n={})[e]=t,n))},t.prototype.merge=function(e){var n=F.mergeShapes(this._def.shape(),e._def.shape());return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:function(){return n},typeName:_e.ZodObject})},t.prototype.catchall=function(e){return new t(v(v({},this._def),{catchall:e}))},t.prototype.pick=function(e){var n=this,r={};return h.objectKeys(e).map((function(e){r[e]=n.shape[e]})),new t(v(v({},this._def),{shape:function(){return r}}))},t.prototype.omit=function(e){var n=this,r={};return h.objectKeys(this.shape).map((function(t){-1===h.objectKeys(e).indexOf(t)&&(r[t]=n.shape[t])})),new t(v(v({},this._def),{shape:function(){return r}}))},t.prototype.deepPartial=function(){return ae(this)},t.prototype.partial=function(e){var n,r=this,i={};if(e)return h.objectKeys(this.shape).map((function(t){-1===h.objectKeys(e).indexOf(t)?i[t]=r.shape[t]:i[t]=r.shape[t].optional()})),new t(v(v({},this._def),{shape:function(){return i}}));for(n in this.shape){var o=this.shape[n];i[n]=o.optional()}return new t(v(v({},this._def),{shape:function(){return i}}))},t.prototype.required=function(){var e,n={};for(e in this.shape){for(var r=this.shape[e];r instanceof Ee;)r=r._def.innerType;n[e]=r}return new t(v(v({},this._def),{shape:function(){return n}}))},t.create=function(e,n){return new t(v({shape:function(){return e},unknownKeys:"strip",catchall:ne.create(),typeName:_e.ZodObject},B(n)))},t.strictCreate=function(e,n){return new t(v({shape:function(){return e},unknownKeys:"strict",catchall:ne.create(),typeName:_e.ZodObject},B(n)))},t.lazycreate=function(e,n){return new t(v({shape:e,unknownKeys:"strip",catchall:ne.create(),typeName:_e.ZodObject},B(n)))},t}(W),se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){var t=this,n=this._processInputParams(e).ctx;function r(e){var t,r,i,o,a;try{for(var u=_(e),s=u.next();!s.done;s=u.next())if("valid"===(c=s.value).result.status)return c.result}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}try{for(var c,f=_(e),l=f.next();!l.done;l=f.next())if("dirty"===(c=l.value).result.status)return(a=n.issues).push.apply(a,b([],w(c.ctx.issues),!1)),c.result}catch(e){i={error:e}}finally{try{l&&!l.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}return e=e.map((function(e){return new S(e.ctx.issues)})),I(n,{code:x.invalid_union,unionErrors:e}),R}return e=this._def.options,n.async?Promise.all(e.map((function(e){return m(t,void 0,void 0,(function(){var t,r;return g(this,(function(i){switch(i.label){case 0:return t=v(v({},n),{issues:[],parent:null}),r={},[4,e._parseAsync({data:n.data,path:n.path,parent:t})];case 1:return[2,(r.result=i.sent(),r.ctx=t,r)]}}))}))}))).then(r):r(e.map((function(e){var t=v(v({},n),{issues:[],parent:null});return{result:e._parseSync({data:n.data,path:n.path,parent:t}),ctx:t}})))},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.options},enumerable:!1,configurable:!0}),t.create=function(e,n){return new t(v({options:e,typeName:_e.ZodUnion},B(n)))},t}(W);function ce(e,t){var n,r,i=k(e),o=k(t);if(e===t)return{valid:!0,data:e};if(i===O.object&&o===O.object){var a=h.objectKeys(t),u=h.objectKeys(e).filter((function(e){return-1!==a.indexOf(e)})),s=v(v({},e),t);try{for(var c=_(u),f=c.next();!f.done;f=c.next()){var l=f.value;if(!(p=ce(e[l],t[l])).valid)return{valid:!1};s[l]=p.data}}catch(e){n={error:e}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return{valid:!0,data:s}}if(i!==O.array||o!==O.array)return{valid:!1};if(e.length!==t.length)return{valid:!1};for(var p,d=[],y=0;y<e.length;y++){if(!(p=ce(e[y],t[y])).valid)return{valid:!1};d.push(p.data)}return{valid:!0,data:d}}var fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){function t(e,t){if(D(e)||D(t))return R;var i=ce(e.value,t.value);return i.valid?((M(e)||M(t))&&n.dirty(),{status:n.value,value:i.data}):(I(r,{code:x.invalid_intersection_types}),R)}var n=(e=this._processInputParams(e)).status,r=e.ctx;return r.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((function(e){var n;return t(e=(n=w(e,2))[0],n=n[1])})):t(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))},t.create=function(e,n,r){return new t(v({left:e,right:n,typeName:_e.ZodIntersection},B(r)))},t}(W),le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){var t=this,n=(e=this._processInputParams(e)).status,r=e.ctx;return r.parsedType!==O.array?(I(r,{code:x.invalid_type,expected:O.array,received:r.parsedType}),R):r.data.length<this._def.items.length?(I(r,{code:x.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),R):(!this._def.rest&&r.data.length>this._def.items.length&&(I(r,{code:x.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),n.dirty()),e=r.data.map((function(e,n){var i=t._def.items[n]||t._def.rest;return i?i._parse({data:e,path:b(b([],w(r.path),!1),[n],!1),parent:r}):null})).filter((function(e){return!!e})),r.async?Promise.all(e).then((function(e){return N.mergeArray(n,e)})):N.mergeArray(n,e))},Object.defineProperty(t.prototype,"items",{get:function(){return this._def.items},enumerable:!1,configurable:!0}),t.prototype.rest=function(e){return new t(v(v({},this._def),{rest:e}))},t.create=function(e,n){return new t(v({items:e,typeName:_e.ZodTuple,rest:null},B(n)))},t}(W),pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),Object.defineProperty(t.prototype,"keySchema",{get:function(){return this._def.keyType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueSchema",{get:function(){return this._def.valueType},enumerable:!1,configurable:!0}),t.prototype._parse=function(e){var t=this._processInputParams(e),n=(e=t.status,t.ctx);if(n.parsedType!==O.object)return I(n,{code:x.invalid_type,expected:O.object,received:n.parsedType}),R;var r,i=[],o=this._def.keyType,a=this._def.valueType;for(r in n.data)i.push({key:o._parse({data:r,path:b(b([],w(n.path),!1),[r],!1),parent:n}),value:a._parse({data:n.data[r],path:b(b([],w(n.path),!1),[r],!1),parent:n})});return n.async?N.mergeObjectAsync(e,i):N.mergeObjectSync(e,i)},Object.defineProperty(t.prototype,"element",{get:function(){return this._def.valueType},enumerable:!1,configurable:!0}),t.create=function(e,n,r){return new t(n instanceof W?v({keyType:e,valueType:n,typeName:_e.ZodRecord},B(r)):v({keyType:$.create(),valueType:e,typeName:_e.ZodRecord},B(n)))},t}(W),de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){var t,n,r=this,i=(e=this._processInputParams(e)).status,o=e.ctx;if(o.parsedType!==O.map)return I(o,{code:x.invalid_type,expected:O.map,received:o.parsedType}),R;var a=this._def.keyType,u=this._def.valueType,s=b([],w(o.data.entries()),!1).map((function(e,t){e=(n=w(e,2))[0];var n=n[1];return{key:a._parse({data:e,path:b(b([],w(o.path),!1),[t,"key"],!1),parent:o}),value:u._parse({data:n,path:b(b([],w(o.path),!1),[t,"value"],!1),parent:o})}}));if(o.async){var c=new Map;return Promise.resolve().then((function(){return m(r,void 0,void 0,(function(){var e,t,n,r,o,a,u;return g(this,(function(f){switch(f.label){case 0:f.trys.push([0,6,7,8]),e=_(s),t=e.next(),f.label=1;case 1:return t.done?[3,5]:[4,(n=t.value).key];case 2:return r=f.sent(),[4,n.value];case 3:if(o=f.sent(),"aborted"===r.status||"aborted"===o.status)return[2,R];"dirty"!==r.status&&"dirty"!==o.status||i.dirty(),c.set(r.value,o.value),f.label=4;case 4:return t=e.next(),[3,1];case 5:return[3,8];case 6:return a={error:a=f.sent()},[3,8];case 7:try{t&&!t.done&&(u=e.return)&&u.call(e)}finally{if(a)throw a.error}return[7];case 8:return[2,{status:i.value,value:c}]}}))}))}))}var f=new Map;try{for(var l=_(s),p=l.next();!p.done;p=l.next()){var d=p.value,h=d.key,y=d.value;if("aborted"===h.status||"aborted"===y.status)return R;"dirty"!==h.status&&"dirty"!==y.status||i.dirty(),f.set(h.value,y.value)}}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return{status:i.value,value:f}},t.create=function(e,n,r){return new t(v({valueType:n,keyType:e,typeName:_e.ZodMap},B(r)))},t}(W),he=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){var t=(e=this._processInputParams(e)).status,n=e.ctx;if(n.parsedType!==O.set)return I(n,{code:x.invalid_type,expected:O.set,received:n.parsedType}),R;var r=this._def.valueType;function i(e){var n,r,i=new Set;try{for(var o=_(e),a=o.next();!a.done;a=o.next()){var u=a.value;if("aborted"===u.status)return R;"dirty"===u.status&&t.dirty(),i.add(u.value)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return{status:t.value,value:i}}return e=b([],w(n.data.values()),!1).map((function(e,t){return r._parse({data:e,path:b(b([],w(n.path),!1),[t],!1),parent:n})})),n.async?Promise.all(e).then(i):i(e)},t.create=function(e,n){return new t(v({valueType:e,typeName:_e.ZodSet},B(n)))},t}(W),ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.validate=t.implement,t}return d(t,e),t.prototype._parse=function(e){var t=this,n=this._processInputParams(e).ctx;if(n.parsedType!==O.function)return I(n,{code:x.invalid_type,expected:O.function,received:n.parsedType}),R;function r(e,t){return j({data:e,path:n.path,errorMaps:[n.contextualErrorMap,n.schemaErrorMap,T,E].filter((function(e){return!!e})),issueData:{code:x.invalid_arguments,argumentsError:t}})}function i(e,t){return j({data:e,path:n.path,errorMaps:[n.contextualErrorMap,n.schemaErrorMap,T,E].filter((function(e){return!!e})),issueData:{code:x.invalid_return_type,returnTypeError:t}})}var o={errorMap:n.contextualErrorMap},a=n.data;return this._def.returns instanceof xe?L((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return m(t,void 0,void 0,(function(){var t,n,u;return g(this,(function(s){switch(s.label){case 0:return t=new S([]),[4,this._def.args.parseAsync(e,o).catch((function(n){throw t.addIssue(r(e,n)),t}))];case 1:return n=s.sent(),[4,a.apply(void 0,b([],w(n),!1))];case 2:return u=s.sent(),[4,this._def.returns._def.type.parseAsync(u,o).catch((function(e){throw t.addIssue(i(u,e)),t}))];case 3:return[2,s.sent()]}}))}))})):L((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!(u=t._def.args.safeParse(e,o)).success)throw new S([r(e,u.error)]);var u,s=a.apply(void 0,b([],w(u.data),!1));if(!(u=t._def.returns.safeParse(s,o)).success)throw new S([i(s,u.error)]);return u.data}))},t.prototype.parameters=function(){return this._def.args},t.prototype.returnType=function(){return this._def.returns},t.prototype.args=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(v(v({},this._def),{args:le.create(e).rest(te.create())}))},t.prototype.returns=function(e){return new t(v(v({},this._def),{returns:e}))},t.prototype.implement=function(e){return this.parse(e)},t.prototype.strictImplement=function(e){return this.parse(e)},t.create=function(e,n,r){return new t(v({args:(e||le.create([])).rest(te.create()),returns:n||te.create(),typeName:_e.ZodFunction},B(r)))},t}(W),ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),Object.defineProperty(t.prototype,"schema",{get:function(){return this._def.getter()},enumerable:!1,configurable:!0}),t.prototype._parse=function(e){return e=this._processInputParams(e).ctx,this._def.getter()._parse({data:e.data,path:e.path,parent:e})},t.create=function(e,n){return new t(v({getter:e,typeName:_e.ZodLazy},B(n)))},t}(W),me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){var t;return e=(t=this._processInputParams(e)).status,(t=t.ctx).data!==this._def.value?(I(t,{code:x.invalid_type,expected:this._def.value,received:t.data}),R):{status:e.value,value:t.data}},Object.defineProperty(t.prototype,"value",{get:function(){return this._def.value},enumerable:!1,configurable:!0}),t.create=function(e,n){return new t(v({value:e,typeName:_e.ZodLiteral},B(n)))},t}(W);function ge(e){return new we({values:e,typeName:_e.ZodEnum})}var _e,we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){return e=this._processInputParams(e).ctx,-1===this._def.values.indexOf(e.data)?(I(e,{code:x.invalid_enum_value,options:this._def.values}),R):L(e.data)},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.values},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enum",{get:function(){var e,t,n={};try{for(var r=_(this._def.values),i=r.next();!i.done;i=r.next()){var o=i.value;n[o]=o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Values",{get:function(){var e,t,n={};try{for(var r=_(this._def.values),i=r.next();!i.done;i=r.next()){var o=i.value;n[o]=o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Enum",{get:function(){var e,t,n={};try{for(var r=_(this._def.values),i=r.next();!i.done;i=r.next()){var o=i.value;n[o]=o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),t.create=ge,t}(W),be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return-1===(e=h.getValidEnumValues(this._def.values)).indexOf(t.data)?(I(t,{code:x.invalid_enum_value,options:h.objectValues(e)}),R):L(t.data)},t.create=function(e,n){return new t(v({values:e,typeName:_e.ZodNativeEnum},B(n)))},t}(W),xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){var t=this,n=this._processInputParams(e).ctx;return n.parsedType!==O.promise&&!1===n.async?(I(n,{code:x.invalid_type,expected:O.promise,received:n.parsedType}),R):(e=n.parsedType===O.promise?n.data:Promise.resolve(n.data),L(e.then((function(e){return t._def.type.parseAsync(e,{path:n.path,errorMap:n.contextualErrorMap})}))))},t.create=function(e,n){return new t(v({type:e,typeName:_e.ZodPromise},B(n)))},t}(W),Se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.innerType=function(){return this._def.schema},t.prototype._parse=function(e){var t=this,n=(e=this._processInputParams(e)).status,r=e.ctx,i=this._def.effect||null;if("preprocess"===i.type)return e=i.transform(r.data),r.async?Promise.resolve(e).then((function(e){return t._def.schema._parseAsync({data:e,path:r.path,parent:r})})):this._def.schema._parseSync({data:e,path:r.path,parent:r});if("refinement"===i.type){var o={addIssue:function(e){I(r,e),e.fatal?n.abort():n.dirty()},get path(){return r.path}};function e(e){var t=i.refinement(e,o);if(r.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e}if(o.addIssue=o.addIssue.bind(o),!1!==r.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((function(t){return"aborted"===t.status?R:("dirty"===t.status&&n.dirty(),e(t.value).then((function(){return{status:n.value,value:t.value}})))}));var a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===a.status?R:("dirty"===a.status&&n.dirty(),e(a.value),{status:n.value,value:a.value})}if("transform"===i.type){if(!1!==r.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((function(e){return Z(e)?Promise.resolve(i.transform(e.value)).then(L):e}));if(a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r}),!Z(a))return a;if((a=i.transform(a.value))instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return L(a)}h.assertNever(i)},t.create=function(e,n,r){return new t(v({schema:e,typeName:_e.ZodEffects,effect:n},B(r)))},t.createWithPreprocess=function(e,n,r){return new t(v({schema:n,effect:{type:"preprocess",transform:e},typeName:_e.ZodEffects},B(r)))},t}(W),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){return(e=this._processInputParams(e).ctx).parsedType===O.undefined?L(void 0):this._def.innerType._parse({data:e.data,path:e.path,parent:e})},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e,n){return new t(v({innerType:e,typeName:_e.ZodOptional},B(n)))},t}(W),Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){return(e=this._processInputParams(e).ctx).parsedType===O.null?L(null):this._def.innerType._parse({data:e.data,path:e.path,parent:e})},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e,n){return new t(v({innerType:e,typeName:_e.ZodNullable},B(n)))},t}(W),Oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return e=t.data,t.parsedType===O.undefined&&(e=this._def.defaultValue()),this._def.innerType._parse({data:e,path:t.path,parent:t})},t.prototype.removeDefault=function(){return this._def.innerType},t.create=function(e,t){return new Ee(v({innerType:e,typeName:_e.ZodOptional},B(t)))},t}(W),Ae=function(e,t){return e?ee.create().refine(e,t):ee.create()},ke={object:ue.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodPromise="ZodPromise"}(_e=_e||{});var je,Ie=$.create,Ce=G.create,Pe=J.create,Ne=K.create,Re=X.create,Le=Y.create,De=Q.create,Me=ee.create,Ze=te.create,Ue=ne.create,qe=re.create,Be=ie.create,Fe=ue.create,We=ue.strictCreate,ze=se.create,Ve=fe.create,He=le.create,$e=pe.create,Ge=de.create,Je=he.create,Ke=ye.create,Xe=ve.create,Ye=me.create,Qe=we.create,et=be.create,tt=xe.create,nt=Se.create,rt=Ee.create,it=Te.create,ot=Se.createWithPreprocess,at=(Object.freeze({__proto__:null,ZodParsedType:O,getParsedType:k,makeIssue:j,EMPTY_PATH:[],addIssueToContext:I,ParseStatus:N,INVALID:R,DIRTY:function(e){return{status:"dirty",value:e}},OK:L,isAborted:D,isDirty:M,isValid:Z,isAsync:U,ZodType:W,ZodString:$,ZodNumber:G,ZodBigInt:J,ZodBoolean:K,ZodDate:X,ZodUndefined:Y,ZodNull:Q,ZodAny:ee,ZodUnknown:te,ZodNever:ne,ZodVoid:re,ZodArray:ie,get objectUtil(){return F},ZodObject:ue,ZodUnion:se,ZodIntersection:fe,ZodTuple:le,ZodRecord:pe,ZodMap:de,ZodSet:he,ZodFunction:ye,ZodLazy:ve,ZodLiteral:me,ZodEnum:we,ZodNativeEnum:be,ZodPromise:xe,ZodEffects:Se,ZodTransformer:Se,ZodOptional:Ee,ZodNullable:Te,ZodDefault:Oe,custom:Ae,Schema:W,ZodSchema:W,late:ke,get ZodFirstPartyTypeKind(){return _e},any:Me,array:Be,bigint:Pe,boolean:Ne,date:Re,effect:nt,enum:Qe,function:Ke,instanceof:function(e,t){return void 0===t&&(t={message:"Input not instance of "+e.name}),Ae((function(t){return t instanceof e}),t)},intersection:Ve,lazy:Xe,literal:Ye,map:Ge,nativeEnum:et,never:Ue,null:De,nullable:it,number:Ce,object:Fe,oboolean:function(){return Ne().optional()},onumber:function(){return Ce().optional()},optional:rt,ostring:function(){return Ie().optional()},preprocess:ot,promise:tt,record:$e,set:Je,strictObject:We,string:Ie,transformer:nt,tuple:He,undefined:Le,union:ze,unknown:Ze,void:qe,ZodIssueCode:x,quotelessJson:function(e){return JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:")},ZodError:S,defaultErrorMap:E,get overrideErrorMap(){return T},setErrorMap:function(e){T=e}}),n(97)),ut=n.n(at),st=new Uint8Array(16);function ct(){if(!je&&!(je="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return je(st)}const ft=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,lt=function(e){return"string"==typeof e&&ft.test(e)};for(var pt=[],dt=0;dt<256;++dt)pt.push((dt+256).toString(16).substr(1));const ht=function(e,t,n){var r=(e=e||{}).random||(e.rng||ct)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(pt[e[t+0]]+pt[e[t+1]]+pt[e[t+2]]+pt[e[t+3]]+"-"+pt[e[t+4]]+pt[e[t+5]]+"-"+pt[e[t+6]]+pt[e[t+7]]+"-"+pt[e[t+8]]+pt[e[t+9]]+"-"+pt[e[t+10]]+pt[e[t+11]]+pt[e[t+12]]+pt[e[t+13]]+pt[e[t+14]]+pt[e[t+15]]).toLowerCase();if(!lt(n))throw TypeError("Stringified UUID is invalid");return n}(r)};var yt=n(489);const vt=e=>1e3*e,mt=e=>vt(60*e),gt=e=>mt(60*e),_t=e=>gt(24*e),wt=e=>_t(7*e),bt=e=>_t(30*e),xt=()=>Date.now()+0,St=[0,gt(4),gt(8),_t(1),_t(2),_t(4),wt(2),bt(1),bt(4),1/0];function Et(e){const t=St[e];if(!t)throw new Error(`Invalid SRS level ${e}`);return t}const Tt={seconds:vt,minutes:mt,hours:gt,days:_t,weeks:wt,months:bt,now:xt,toNextSRSLevel:Et},Ot=new class{async getText(e){return await STORE.get(e,"text")}async getJson(e){return await STORE.get(e,"json")}async putText(e,t,n){return(null==n?void 0:n.expirationTtl)&&(n={expirationTtl:n.expirationTtl}),await STORE.put(e,t,n)}async putJson(e,t,n){(null==n?void 0:n.expirationTtl)&&(n={expirationTtl:n.expirationTtl}),await STORE.put(e,JSON.stringify(t),n)}async delete(e){try{await STORE.delete(e)}catch(e){console.error(e)}}};var At;!function(e){e.get=async function(e){const t=await Ot.getJson(`sessions:${e}`);return null===t?null:Object.assign({},{key:e},t)},e.create=async function(e){const t=ht();return await Ot.putJson(`sessions:${t}`,{userId:e},{expirationTtl:wt(5)/1e3}),t},e.expire=async function(e){return await Ot.delete(`sessions:${e}`)},e.asCookie=function(e){return yt.q("sessionKey",e,{httpOnly:!0,maxAge:wt(4)/1e3})}}(At||(At={}));var kt=n(486),jt=n.n(kt);const It="undefined"!=typeof process?process.env:n.g,Ct=It.FRONTEND_BASE_URL||"",Pt=!!Ct&&!Ct.includes("localhost"),Nt=It.IS_TESTING||!1,Rt=It.MAILGUN_SECRET||"",Lt=It.DISCORD_SIGNUP_WEBHOOK||"",Dt=("undefined"!=typeof process?process.env:n.g).FAUNA_ADMIN_KEY||"";class Mt extends Error{constructor(e){var t,n;let r="unknown error",i=e.message;const o=null===(n=null===(t=e.requestResult)||void 0===t?void 0:t.responseContent)||void 0===n?void 0:n.errors;switch(o&&o.length&&(r=o[0].code,i=o[0].description),super(i),r){case"instance not found":this.status=404;break;case"instance not unique":this.status=409;break;case"permission denied":this.status=403;break;case"unauthorized":case"authentication failed":this.status=401;break;default:this.status=500}this.code=r}}function Zt(e){if(e instanceof at.Expr&&"date"in e)return e.date.getTime();if(e instanceof at.Expr&&"id"in e)return e.id;if(Array.isArray(e))return e.map(Zt);if("object"==typeof e){const t={};for(const n in e){const r=n.match(/^(.+)Ref$/);r?t[r[1]+"Id"]=Zt(e[n]):"ref"===n?t.id=Zt(e[n]):"data"===n?Object.assign(t,Zt(e.data)):t[n]=Zt(e[n])}return t}return e}function Ut(e){return Zt(e)}var qt;!function(e){function t(e){return(0,at.Let)({obj:e},(0,at.If)((0,at.Exists)((0,at.Var)("obj")),(0,at.Get)((0,at.Var)("obj")),null))}async function n(t){try{return await e.fauna.client.query(t)}catch(e){throw new Mt(e)}}let r,i;var o;e.fauna=Pt?{client:new(ut().Client)({secret:Dt})}:{client:new(ut().Client)({secret:Dt,domain:"localhost",port:8443,scheme:"http"})},e.GetIfExists=t,e.faunaQuery=n,e.querySingle=async function(e){const t=await n(e);return null===t?t:Ut(t)},e.query=async function(e){return(await n(e)).data.map(Ut)},function(n){n.get=async function(n){return await e.querySingle(t((0,at.Ref)((0,at.Collection)("users"),n)))},n.expect=async function(t){return await e.querySingle((0,at.Get)((0,at.Ref)((0,at.Collection)("users"),t)))},n.getByEmail=async function(n){return await e.querySingle(t((0,at.Match)((0,at.Index)("users_by_email"),n)))},n.expectByEmail=async function(t){return await e.querySingle((0,at.Get)((0,at.Match)((0,at.Index)("users_by_email"),t)))},n.listAll=async function(){return await e.query((0,at.Map)((0,at.Paginate)((0,at.Documents)((0,at.Collection)("users"))),(0,at.Lambda)("id",(0,at.Get)((0,at.Var)("id")))))},n.create=async function(t){return await e.querySingle((0,at.Create)((0,at.Collection)("users"),{credentials:{password:t.password},data:jt().omit(t,"password")}))},n.changePassword=async function(t,n){return await e.querySingle((0,at.Update)((0,at.Ref)((0,at.Collection)("users"),t),{credentials:{password:n}}))},n.update=async function(t,n){return await e.querySingle((0,at.Update)((0,at.Ref)((0,at.Collection)("users"),t),{data:n}))}}(r=e.users||(e.users={})),(o=i=e.progress||(e.progress={})).get=async function(n,r){return await e.querySingle(t(function(e,t){return(0,at.Match)((0,at.Index)("progress_by_user_and_pattern"),[(0,at.Ref)((0,at.Collection)("users"),e),t])}(n,r)))},o.update=async function(t,n){return await e.querySingle((0,at.Update)((0,at.Ref)((0,at.Collection)("progress"),t),{data:n}))},o.listAllFor=async function(t){return await e.query((0,at.Map)((0,at.Paginate)((0,at.Match)((0,at.Index)("progress_by_user"),(0,at.Ref)((0,at.Collection)("users"),t))),(0,at.Lambda)("ref",(0,at.Get)((0,at.Var)("ref")))))},o.resetFor=async function(t){await e.query((0,at.Map)((0,at.Paginate)((0,at.Match)((0,at.Index)("progress_by_user"),(0,at.Ref)((0,at.Collection)("users"),t))),(0,at.Lambda)("ref",(0,at.Delete)((0,at.Var)("ref")))))},o.completeLevel=async function(t,n,r){const i=await e.progress.get(t,n);if(!i)return await e.querySingle((0,at.Create)((0,at.Collection)("progress"),{data:{userRef:(0,at.Ref)((0,at.Collection)("users"),t),patternId:n,initiallyLearnedAt:(0,at.Now)(),lastLeveledAt:(0,at.Now)(),srsLevel:r}}));const o=i.lastLeveledAt+Et(i.srsLevel);let a={};return r>i.srsLevel&&xt()>=o&&(a={lastLeveledAt:(0,at.Now)(),srsLevel:r}),await e.querySingle((0,at.Update)((0,at.Ref)((0,at.Collection)("progress"),i.id),{data:a}))}}(qt||(qt={}));class Bt extends Error{constructor(e,t){super(t),this.status=e}}var Ft,Wt=n(854);class zt extends Error{constructor(e){super(e)}}!function(e){async function t(e){const{headers:t}=e,n=t.get("content-type");return n?n.includes("application/json")?await e.json():(n.includes("application/text")||n.includes("text/html"),await e.text()):e}e.request=async function(e,n){const r=await fetch(e,n);if(200!==r.status){console.error(r);const i=await t(r);throw console.error(i),new zt(`Received ${r.status} from ${n.method} request to ${e}`)}return await t(r)},e.get=async function(t,n={}){return e.request(t,{method:"GET",headers:n.headers||{}})},e.del=async function(t,n={}){return e.request(t,{method:"DELETE",headers:n.headers||{}})},e.post=async function(t,n,r={}){return e.request(t,{body:(0,Wt.serialize)(n,{},new URLSearchParams),method:"POST",headers:kt.extend({"content-type":"application/x-www-form-urlencoded"},r.headers||{})})},e.postJson=async function(t,n,r={}){return e.request(t,{body:JSON.stringify(n),method:"POST",headers:kt.extend({"content-type":"application/json;charset=UTF-8"},r.headers||{})})}}(Ft||(Ft={}));const Vt=Ft,Ht=[];async function $t(e){const t={to:e.to,from:e.from||"Sprachy <noreply@sprachy.com>",subject:e.subject};if("html"in e?t.html=e.html:t.text=e.text,Nt)Ht.push(e);else{if(Rt)return await Vt.post("https://api.mailgun.net/v3/mg.sprachy.com/messages",t,{headers:{Authorization:`Basic ${btoa(`api:${Rt}`)}`}});console.log("No MAILGUN_SECRET set. Would've sent this email:"),console.log(t)}}const Gt=Fe({email:Ie().email(),password:Ie(),confirmPassword:Ie()}).refine((e=>e.password.length>=10),{message:"Password must be at least length 10",path:["password"]}).refine((e=>e.password===e.confirmPassword),{message:"Confirm password must be identical to password",path:["confirmPassword"]}),Jt=Fe({email:Ie(),password:Ie()}),Kt=Fe({email:Ie()}),Xt=Fe({token:Ie(),newPassword:Ie(),confirmPassword:Ie()}).refine((e=>e.newPassword.length>=10),{message:"Password must be at least length 10",path:["newPassword"]}).refine((e=>e.newPassword===e.confirmPassword),{message:"Confirm password must be identical to password",path:["confirmPassword"]});async function Yt(e){const[t,n]=await Promise.all([qt.users.expect(e.session.userId),qt.progress.listAllFor(e.session.userId)]);return{user:t,progressItems:n}}const Qt=Fe({patternId:Ie(),level:Ce()}),en=Fe({newEmail:Ie()}),tn=Fe({token:Ie()}),nn=new class{constructor(){this.worktopRouter=new l}add(e,t,n){this.worktopRouter.add(e,t,(async(e,t)=>{const r=yt.Q(e.headers.get("cookie")||"").sessionKey,i=r?await At.get(r):null,o=e;o.session=i;try{const e=await n(o,t);void 0!==e&&t.send(e.status||200,e)}catch(e){console.error(e),e instanceof Bt?t.send(e.status,e.message):e instanceof S?t.send(422,{status:422,code:"validation failed",errors:e.issues}):e instanceof Mt?t.send(e.status,{statuscode:e.code,message:e.message}):t.send(500,{status:500,code:"unexpected error",message:e.stack})}}))}};nn.add("POST","/api/signup",(async function(e,t){const{email:n,password:r}=Gt.parse(await e.body());try{const e=await qt.users.create({email:n,password:r,isAdmin:!1}),i=await qt.progress.listAllFor(e.id),o=await At.create(e.id);if(t.headers.set("Set-Cookie",At.asCookie(o)),Lt){const e={username:"SignUp",avatar_url:"",content:`Yuh new learny person **${n}** appeared! ❤️🐿️`};Vt.postJson(Lt,e)}return{status:200,summary:{user:e,progressItems:i}}}catch(e){if(e instanceof Mt&&"instance not unique"===e.code)return{status:409,code:"user already exists"};throw e}})),nn.add("POST","/api/login",(async function(e,t){const{email:n,password:r}=Jt.parse(await e.body());if(null===await qt.users.getByEmail(n))return{status:401,code:"new user"};try{const e=await qt.faunaQuery((0,at.Login)((0,at.Match)((0,at.Index)("users_by_email"),n),{password:r})),i=await qt.users.expect(e.instance.value.id),o=await At.create(i.id);return t.headers.set("Set-Cookie",At.asCookie(o)),{status:200,summary:{user:i,progressItems:await qt.progress.listAllFor(i.id)}}}catch(e){if(e instanceof Mt&&"authentication failed"===e.code)return{status:401,code:"wrong password"};throw e}})),nn.add("POST","/api/logout",(async function(e){e.session&&await At.expire(e.session.key)})),nn.add("POST","/api/reset-password",(async function(e){const{email:t}=Kt.parse(await e.body()),n=await qt.users.getByEmail(t);if(n){const e=ht();await Ot.putJson(`reset_password_tokens:${e}`,{userId:n.id},{expirationTtl:Tt.days(1)/1e3}),await $t({to:n.email,subject:"Reset your Sprachy password",text:`\nPlease click here to reset your password: ${Ct}/reset-password/${e}\n      `})}})),nn.add("POST","/api/confirm-reset-password",(async function(e){const{token:t,newPassword:n}=Xt.parse(await e.body()),r=await Ot.getJson(`reset_password_tokens:${t}`),i=await qt.users.get((null==r?void 0:r.userId)||"");if(!i)throw new Bt(401,"Invalid or expired token");await qt.users.changePassword(i.id,n)}));const rn=new class{constructor(e){this.parent=e}add(e,t,n){this.parent.add(e,t,(async(e,t)=>e.session?n(e,t):{status:401,code:"login required"}))}}(nn);var on;rn.add("GET","/api/progress",Yt),rn.add("POST","/api/progress",(async function(e){const{patternId:t,level:n}=Qt.parse(await e.body());return await qt.progress.completeLevel(e.session.userId,t,n)})),rn.add("POST","/api/debug/reset-progress",(async function(e){return await qt.progress.resetFor(e.session.userId),Yt(e)})),rn.add("POST","/api/debug/timeskip",(async function(e){const t=await qt.progress.listAllFor(e.session.userId);return await Promise.all(t.map((e=>qt.progress.update(e.id,{lastLeveledAt:e.lastLeveledAt-Tt.toNextSRSLevel(e.srsLevel)})))),Yt(e)})),rn.add("POST","/api/account/change-email",(async function(e){const{newEmail:t}=en.parse(await e.body()),n=ht();await Ot.putJson(`email_confirm_tokens:${n}`,{userId:e.session.userId,email:t},{expirationTtl:Tt.weeks(4)/1e3}),await $t({to:t,subject:"Confirm your Sprachy email address",text:`\nYou requested to change your Sprachy email address to ${t}.\n\nPlease click here to confirm: ${Ct}/settings?emailConfirmToken=${n}\n    `})})),rn.add("POST","/api/account/confirm-email-change",(async function(e){const{token:t}=tn.parse(await e.body()),n=await Ot.getJson(`email_confirm_tokens:${t}`);if(n&&n.userId===e.session.userId)return await qt.users.update(e.session.userId,{email:n.email}),{newEmail:n.email};throw new Bt(400,"Invalid or expired token")})),new class{constructor(e){this.parent=e}add(e,t,n){this.parent.add(e,t,(async(e,t)=>{const r=await qt.users.get(e.session.userId);if(!r||!r.isAdmin)return{status:403,code:"admin only"};const i=e;return i.user=r,n(i,t)}))}}(rn).add("GET","/api/admin/users",(async function(e){return await qt.users.listAll()})),on=nn.worktopRouter.run,addEventListener("fetch",function(e){return t=>t.respondWith(e(t))}(on))})()})();